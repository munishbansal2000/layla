/*! For license information please see 45622.c04a670b.js.LICENSE.txt */
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f2a6357b-b277-4156-af45-ad7275412632",e._sentryDebugIdIdentifier="sentry-dbid-f2a6357b-b277-4156-af45-ad7275412632")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"web_ssr-platform_20251225_022df67f"};"use strict";(self.webpackChunkklook_ssr_platform=self.webpackChunkklook_ssr_platform||[]).push([["45622"],{13506:function(e,t){var n,r,o=function(e,t){var n;try{var r=null===(n=document.defaultView)||void 0===n?void 0:n.getComputedStyle(e,"");return e.style[t]||r?r[t]:null}catch(n){return e.style[t]}},i=function(e,t){var n=o(e,{undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)]);return["scroll","auto","overlay"].some(function(e){return n.includes(e)})},a=function(e,t,n){void 0===t&&(t=document.documentElement),void 0===n&&(n="offsetTop");for(var r=0;null!==e&&e!==t;)r+=e[n],e=e.offsetParent;return r},s=function(e){return e.scrollTop||window.pageYOffset||document.documentElement.scrollTop},c=function(e,t){var n=t>0?t:0;e===window?(document.documentElement.scrollTop=n,document.body.scrollTop=n):e.scrollTop=n},l=function(e){return Math.pow(e,3)},u=function(e){return e<.5?l(2*e)/2:1-l((1-e)*2)/2};t.getRealCurrentTarget=function(e,t,n){for(;t;){if(n(t))return t;if(t===e||t.parentNode===e)break;t=t.parentNode}return null};t.getScrollContainer=function(e,t){for(var n=e;n;){if([window,document,document.documentElement].includes(n))return window;if(i(n,t))break;n=n.parentNode}return n}},94048:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(31632).IconWrapper("icon-calendar",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("path",{attrs:{d:"M36.1353 8.00024H11.621C7.45518 8.00024 4.07812 11.4865 4.07812 15.7869V35.2536C4.07812 39.554 7.45518 43.0402 11.621 43.0402H36.1353C40.3011 43.0402 43.6781 39.554 43.6781 35.2536V15.7869C43.6781 11.4865 40.3011 8.00024 36.1353 8.00024Z",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth}}),e("path",{attrs:{d:"M2.3999 20.2H44.5",stroke:t.colors[2],"stroke-width":t.strokeWidth}}),e("path",{attrs:{d:"M15.2017 12.1998V4.7998",stroke:t.colors[2],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}}),e("path",{attrs:{d:"M32.1982 12.1998V4.7998",stroke:t.colors[2],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}})]));t.default=r},77936:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(31632).IconWrapper("icon-triangle-down",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("path",{attrs:{d:"M22.5409 31.4437L10.5787 18.6839C9.97995 18.0453 10.4328 17 11.3082 17L36.6918 17C37.5672 17 38.0201 18.0453 37.4213 18.6839L25.4591 31.4437C24.6689 32.2865 23.3311 32.2865 22.5409 31.4437Z",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin}})]));t.default=r},95825:function(e,t,n){let r;n.d(t,{jB:()=>oa});var o,i,a,s,c,l,u,p,d,f,h,m,v,y,_=n("95334"),g=n("20144"),k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function w(e,t){return e(t={exports:{}},t.exports),t.exports}var S=b(w(function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports})),$=w(function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});b($);var x=w(function(e){var t=$.default;e.exports=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports});b(x);var C=w(function(e){var t=$.default;e.exports=function(e){var n=x(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports});b(C);var T=b(w(function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports})),P=w(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});b(P);var D=b(w(function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports})),R=w(function(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports});b(R);var O=b(w(function(e){var t=$.default;e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return R(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),j=b(w(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));function I(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function M(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}function L(e){return 16===e?4.2:20===e?3.9:3.6}let N={size:"1em",strokeWidth:3.2,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#2073F9",background:"transparent"},filled:{fill:"#2073F9",background:"#FFF"},twoTone:{fill:"#2073F9",twoTone:"#F44622"},multiColor:{outStrokeColor:"#2073F9",outFillColor:"#F44622",innerStrokeColor:"#08B371",innerFillColor:"#F09B0A"}},prefix:"i"};function E(e,t,n){return{name:"icon-"+e,inject:{ICON_CONFIGS:{default:N}},props:["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","spin"],data:()=>({id:"icon-"+((1+Math.random())*0x100000000|0).toString(16).substring(1)}),inheritAttrs:!1,render(r){let{size:o,strokeWidth:i,strokeLinecap:a,strokeLinejoin:s,theme:c,fill:l,id:u,spin:p,ICON_CONFIGS:d=N}=this,f=function(e,t,n){let r="string"==typeof t.fill?[t.fill]:t.fill||[],o=[];switch(t.theme||n.theme){case"outline":o.push("string"==typeof r[0]?r[0]:"currentColor"),o.push("transparent"),o.push("string"==typeof r[0]?r[0]:"currentColor"),o.push("transparent");break;case"filled":o.push("string"==typeof r[0]?r[0]:"currentColor"),o.push("string"==typeof r[0]?r[0]:"currentColor"),o.push("#FFF"),o.push("#FFF");break;case"two-tone":o.push("string"==typeof r[0]?r[0]:"currentColor"),o.push("string"==typeof r[1]?r[1]:n.colors.twoTone.twoTone),o.push("string"==typeof r[0]?r[0]:"currentColor"),o.push("string"==typeof r[1]?r[1]:n.colors.twoTone.twoTone);break;case"multi-color":o.push("string"==typeof r[0]?r[0]:"currentColor"),o.push("string"==typeof r[1]?r[1]:n.colors.multiColor.outFillColor),o.push("string"==typeof r[2]?r[2]:n.colors.multiColor.innerStrokeColor),o.push("string"==typeof r[3]?r[3]:n.colors.multiColor.innerFillColor)}return{size:t.size||n.size,strokeWidth:L(t.size)||L(n.size),strokeLinecap:t.strokeLinecap||n.strokeLinecap,strokeLinejoin:t.strokeLinejoin||n.strokeLinejoin,colors:o,id:e}}(u,{size:o,strokeWidth:i,strokeLinecap:a,strokeLinejoin:s,theme:c,fill:l},d),h=["i-icon"];return h.push("i-icon-"+e),t&&d.rtl&&h.push("i-icon-rtl"),p&&h.push("i-icon-spin"),r("span",{class:h.join(" ")},[n(r,f)])}}}var A=function(e,t,n,r,o,i,a,s,c,l){"boolean"!=typeof a&&(c=s,s=a,a=!1);var u,p="function"==typeof n?n.options:n;if(e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,o&&(p.functional=!0)),r&&(p._scopeId=r),i?(u=function(e){!(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)&&"undefined"!=typeof __VUE_SSR_CONTEXT__&&(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},p._ssrRegister=u):t&&(u=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),u){if(p.functional){var d=p.render;p.render=function(e,t){return u.call(t),d(e,t)}}else{var f=p.beforeCreate;p.beforeCreate=f?[].concat(f,u):[u]}}return n},H=w(function(e){var t=$.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=Object.create((t&&t.prototype instanceof m?t:m).prototype);return a(o,"_invoke",{value:function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=function e(t,n){var r=n.method,o=t.iterator[r];if(void 0===o)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),h;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,h)}(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,new C(r||[]))}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var h={};function m(){}function v(){}function y(){}var _={};p(_,c,function(){return this});var g=Object.getPrototypeOf,k=g&&g(g(T([])));k&&k!==o&&i.call(k,c)&&(_=k);var b=y.prototype=m.prototype=Object.create(_);function w(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function S(e,n){var r;a(this,"_invoke",{value:function(o,a){function s(){return new n(function(r,s){!function r(o,a,s,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==t(p)&&i.call(p,"__await")?n.resolve(p.__await).then(function(e){r("next",e,s,c)},function(e){r("throw",e,s,c)}):n.resolve(p).then(function(e){u.value=e,s(u)},function(e){return r("throw",e,s,c)})}c(l.arg)}(o,a,r,s)})}return r=r?r.then(s,s):s()}})}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function T(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=p(y,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,p(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},r.awrap=function(e){return{__await:e}},w(S.prototype),p(S.prototype,l,function(){return this}),r.AsyncIterator=S,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new S(d(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(b),p(b,u,"Generator"),p(b,c,function(){return this}),p(b,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports});b(H);var B=H();try{regeneratorRuntime=B}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=B:Function("r","regeneratorRuntime = r")(B)}var F=function(e){return new Promise(function(t){var n=document.createElement("textarea");n.value=e,n.style.position="absolute",n.style.left="-9999px",n.readOnly=!0,n.contentEditable="true",document.body.appendChild(n),W(n,0,e.length),document.execCommand("copy")?(document.body.removeChild(n),t(!0)):t(!1)})},W=function(e,t,n){if(navigator.userAgent.match(/ipad|iPod|iphone/i)){var r=document.createRange();r.selectNodeContents(e);var o=window.getSelection();o.removeAllRanges(),o.addRange(r),e.setSelectionRange(t,n)}else e.select()};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(){U=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=Object.create((t&&t.prototype instanceof d?t:d).prototype);return r(i,"_invoke",{value:function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return x()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=function e(t,n){var r=n.method,o=t.iterator[r];if(void 0===o)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),p;var i=u(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,p):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,p)}(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,new S(o||[]))}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function d(){}function f(){}function h(){}var m={};c(m,i,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v($([])));y&&y!==t&&n.call(y,i)&&(m=y);var _=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var o;r(this,"_invoke",{value:function(r,i){function a(){return new t(function(o,a){!function r(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(p).then(function(e){l.value=e,a(l)},function(e){return r("throw",e,a,s)})}s(c.arg)}(r,i,o,a)})}return o=o?o.then(a,a):a()}})}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function $(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=h,r(_,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(k.prototype),c(k.prototype,a,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new k(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},g(_),c(_,s,"Generator"),c(_,i,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=$,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:$(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function Y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function K(e,t,n){return(t=Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function J(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var ee=U;var et=(o=g.default)&&"object"==typeof o&&"default"in o?o:{default:o};function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t,n){(n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t)).forEach(function(r){var o=n?Reflect.getOwnMetadata(r,t,n):Reflect.getOwnMetadata(r,t);n?Reflect.defineMetadata(r,o,e,n):Reflect.defineMetadata(r,o,e)})}var eo=({__proto__:[]})instanceof Array;function ei(e){return function(t,n,r){var o="function"==typeof t?t:t.constructor;!o.__decorators__&&(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push(function(t){return e(t,n,r)})}}var ea=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function es(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.name=r.name||e._componentTag||e.name;var o=e.prototype;Object.getOwnPropertyNames(o).forEach(function(e){if("constructor"!==e){if(ea.indexOf(e)>-1){r[e]=o[e];return}var t=Object.getOwnPropertyDescriptor(o,e);void 0!==t.value?"function"==typeof t.value?(r.methods||(r.methods={}))[e]=t.value:(r.mixins||(r.mixins=[])).push({data:function(){var n,r,o;return n={},r=e,o=t.value,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n}}):(t.get||t.set)&&((r.computed||(r.computed={}))[e]={get:t.get,set:t.set})}}),(r.mixins||(r.mixins=[])).push({data:function(){var t,n,r,o,i;return t=this,r=(n=e).prototype._init,n.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)!t.hasOwnProperty(r)&&n.push(r);n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})})},o=new n,n.prototype._init=r,i={},Object.keys(o).forEach(function(e){void 0!==o[e]&&(i[e]=o[e])}),i}});var i=e.__decorators__;i&&(i.forEach(function(e){return e(r)}),delete e.__decorators__);var a=Object.getPrototypeOf(e.prototype),s=a instanceof et.default?a.constructor:et.default,c=s.extend(r);if(function(e,t,n){Object.getOwnPropertyNames(t).forEach(function(r){if(ec[r])return;var o=Object.getOwnPropertyDescriptor(e,r);if(!o||!!o.configurable){var i=Object.getOwnPropertyDescriptor(t,r);if(!eo){if("cid"===r)return;var a,s,c=Object.getOwnPropertyDescriptor(n,r);if(a=i.value,s=en(a),null!=a&&("object"===s||"function"===s)&&c&&c.value===i.value)return}Object.defineProperty(e,r,i)}})}(c,e,s),"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys){;er(t=c,n=e),Object.getOwnPropertyNames(n.prototype).forEach(function(e){er(t.prototype,n.prototype,e)}),Object.getOwnPropertyNames(n).forEach(function(e){er(t,n,e)})}return c}var ec={prototype:!0,arguments:!0,callee:!0,caller:!0};function el(e){return"function"==typeof e?es(e):function(t){return es(t,e)}}el.registerHooks=function(e){var t;ea.push.apply(ea,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(t=e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}())};var eu="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function ep(e,t,n){if(eu&&!Array.isArray(e)&&"function"!=typeof e&&void 0===e.type){var r=Reflect.getMetadata("design:type",t,n);r!==Object&&(e.type=r)}}var ed=function(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i},ef=J,eh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Y(i,r,o,a,s,"next",e)}function s(e){Y(i,r,o,a,s,"throw",e)}a(void 0)})}},em=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},ev=function(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},ey=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Z(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(s)throw i}}}},e_=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=G(e);return n=t?Reflect.construct(r,arguments,G(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return J(e)}(this,n)}},eg=K,ek=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)},eb=function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})},ew=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){K(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},eS=ee,e$=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Z(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},ex=function(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},eC=el,eT=function(e){return void 0===e&&(e={}),function(t,n){ep(e,t,n),ei(function(t,n){(t.props||(t.props={}))[n]=e})(t,n)}},eP=function(e,t,n,r,o,i,a,s,c,l){let u;"boolean"!=typeof a&&(c=s,s=a,a=!1);let p="function"==typeof n?n.options:n;if(e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,o&&(p.functional=!0)),r&&(p._scopeId=r),i?(u=function(e){!(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)&&"undefined"!=typeof __VUE_SSR_CONTEXT__&&(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},p._ssrRegister=u):t&&(u=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),u){if(p.functional){let e=p.render;p.render=function(t,n){return u.call(n),e(t,n)}}else{let e=p.beforeCreate;p.beforeCreate=e?[].concat(e,u):[u]}}return n},eD=w(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o,i,a,s,c,l,u,p,d,f,h,m=(n=g.default)&&"object"==typeof n&&"default"in n?n:{default:n},v=(r=eC({name:"klk-icon"}),o=eT({default:""}),i=eT(),a=eT(String),s=eT({type:String,default:"klk-icon-"}),r((l=function(e){ek(n,e);var t=e_(n);function n(){var e;em(this,n);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),eb(ef(e),"type",u,ef(e)),eb(ef(e),"size",p,ef(e)),eb(ef(e),"color",d,ef(e)),eb(ef(e),"scope",f,ef(e)),e}return ev(n,[{key:"linkType",get:function(){return"#".concat(this.scope).concat(this.type)}},{key:"classes",get:function(){return"klk-icon klk-icon-".concat(this.type)}},{key:"styles",get:function(){var e={};return this.size&&(e.fontSize="".concat(parseFloat(this.size.toString()).toString(),"px")),this.color&&(e.color=this.color),e}},{key:"handleClick",value:function(e){this.$emit("click",e)}}]),n}(m.default),u=ed(l.prototype,"type",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=ed(l.prototype,"size",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=ed(l.prototype,"color",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=ed(l.prototype,"scope",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=l))||c),y=eP({render:function(){var e=this.$createElement,t=this._self._c||e;return t("i",{class:this.classes,style:this.styles,on:{click:this.handleClick}},[t("svg",[t("use",{attrs:{"xlink:href":this.linkType}})])])},staticRenderFns:[]},void 0,v,void 0,!1,void 0,!1,void 0,void 0,void 0),_="undefined"==typeof window&&void 0!==k;_||function(){if(!h){(h=document.createElement("script")).src="https://cdn.klook.com/s/dist_web/klook-storybook/packages/klook-ui/dist/font_1602031_7yrmcdskhuj.js",h.type="text/javascript";var e=document.getElementsByTagName("head")[0];e&&e.appendChild(h)}}(),y.install=function(e){e.component("klk-icon",y)},t.default=y});b(eD);var eR=w(function(e,t){function n(e){if(!e)return 0;let t="string"==typeof e?e:e.$options.name;switch(t=t.replace("klk-","")){case"toast":case"message":return 3e3;case"modal":case"bottom-sheet":case"drawer":case"loading":return 2e3;case"notification":return 1200;case"announcement":return 600;case"poptip":case"dropdown":case"select":return 200;default:return 0}}Object.defineProperty(t,"__esModule",{value:!0});t.findComponentDownward=function e(t,n){let r=t.$children,o=null;if(r.length)for(let t of r){if(t.$options.name===n){o=t;break}if(o=e(t,n))break}return o},t.findComponentUpward=function(e,t,n){n="string"==typeof t?[t]:t;let r=e.$parent,o=r.$options.name;for(;r&&(!o||0>n.indexOf(o));)(r=r.$parent)&&(o=r.$options.name);return r},t.findComponentsDownward=function e(t,n){return t.$children.reduce((t,r)=>{r.$options.name===n&&t.push(r);let o=e(r,n);return t.concat(o)},[])},t.findComponentsUpward=function e(t,n){let r=[],o=t.$parent;return o?(o.$options.name===n&&r.push(o),r.concat(e(o,n))):[]},t.genUpdateCompZIndexFn=function(e,t){let r=e=e||n(t);return function(t=!1){return t&&(r=e),r++}},t.getCompInitialZIndex=n,t.getFirstComponentChild=function(e){return e&&e.filter(e=>e&&e.tag)[0]}});b(eR),eR.findComponentDownward,eR.findComponentUpward,eR.findComponentsDownward,eR.findComponentsUpward,eR.genUpdateCompZIndexFn,eR.getCompInitialZIndex,eR.getFirstComponentChild;var eO=w(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0});let r=((n=g.default)&&"object"==typeof n&&"default"in n?n:{default:n}).default.prototype.$isServer,o=/-(\w)/g,i=/\B([A-Z])/g;t.camelize=function(e){return e.replace(o,(e,t)=>t?t.toUpperCase():"")},t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.hyphenate=function(e){return e.replace(i,"-$1").toLowerCase()},t.isServer=r});b(eO),eO.camelize,eO.capitalize,eO.hyphenate,eO.isServer;var ej=w(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o,i,a,s,c={};Object.defineProperty(n=c,"__esModule",{value:!0}),r={KLOOK_APP:/klook\/(\d+\.)+\d+/i,IOSMobile:/iPad|iPhone|iPod/i,ANDROID:/android|adr/i,PHONE:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,DEVICE:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},o={NORMAL:/miniprogram/i,WECHAT:/micromessenger/i,XHS:/swan/i,BYTEDANCE:/toutiaomicroapp/i},n.PLATFORM_MP=void 0,(i=n.PLATFORM_MP||(n.PLATFORM_MP={})).NORMAL="",i.WECHAT="mp-wechat",i.XHS="mp-xiaohongshu",i.BYTEDANCE="mp-bytedance",a=function(e){void 0===e&&(e=navigator.userAgent);var t=Object.keys(o).find(function(t){var n=o[t];return(Array.isArray(n)?n:[n]).some(function(t){return t.test(e)})});return t&&n.PLATFORM_MP[t]||n.PLATFORM_MP.NORMAL},s=function(e){void 0===e&&(e=navigator.userAgent);var t=r.KLOOK_APP.test(e),n=r.IOSMobile.test(e),o=r.DEVICE.test(e),i=r.ANDROID.test(e),s=a(e),c=n||t||!!s||o;return{isIOSMobile:n,isKlookApp:t,isAndroid:i,platform:c?"mobile":"desktop",isMobile:c,platformMp:s}},n.DEVICE_REG_EXPS=r,n.MICRO_PROGRAM_REG_EXPS=o,n.default=s,n.detectDevice=s,n.getMpType=a;t.isIOS=!1,t.isAndroid=!1,t.isMobile=!1,!eO.isServer&&({isIOSMobile:t.isIOS,isAndroid:t.isAndroid,isMobile:t.isMobile}=c.detectDevice()),t.isEdge=function(){return!eO.isServer&&navigator.userAgent.indexOf("Edge")>-1},t.isFirefox=function(){return!eO.isServer&&!!window.navigator.userAgent.match(/firefox/i)},t.isIE=function(){return!eO.isServer&&!isNaN(Number(document.documentMode))},t.isPc=function(){for(var e="undefined"!=typeof navigator?navigator.userAgent:"",t=["Android","iPhone","Windows Phone","iPad","iPod"],n=!0,r=0;r<t.length;r++)if(e.indexOf(t[r])>0){n=!1;break}return n}});b(ej),ej.isIOS,ej.isAndroid,ej.isMobile,ej.isEdge,ej.isFirefox,ej.isIE,ej.isPc;var eI=w(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.isNullish=function(e){return null==e},t.isObject=function(e){return null!==e&&e&&"object"==typeof e&&!Array.isArray(e)},t.isPromise=function(e){return e&&"function"==typeof e.then},t.isTypeOf=function(e,t){return(t=t.toLowerCase())===Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}});b(eI),eI.isNullish,eI.isObject,eI.isPromise,eI.isTypeOf;var eM=w(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});let n="[Klook-UI]";t.deprecated=function(e,...t){console.error(`${n} [deprecated]: ${e}`,...t)},t.error=function(e,...t){console.error(`${n} [error]: ${e}`,...t)},t.info=function(e,...t){},t.warning=function(e,...t){}});b(eM),eM.deprecated,eM.error,eM.info,eM.warning;var eL=b(w(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o,i,a,s,c,l,u,p,d=(n=g.default)&&"object"==typeof n&&"default"in n?n:{default:n},f=eR.getCompInitialZIndex("klk-toast"),h=eR.genUpdateCompZIndexFn(f),m=(r=eC({components:{Icon:eD.default}}),o=eT(),i=eT(),a=eT(),r((c=function(e){ek(n,e);var t=e_(n);function n(){var e;em(this,n);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),eb(ef(e),"message",l,ef(e)),eb(ef(e),"icon",u,ef(e)),eb(ef(e),"iconColor",p,ef(e)),eg(ef(e),"zIndex",h()),e}return ev(n,[{key:"cStyle",get:function(){var e;return e=ej.isMobile?"calc(100vw - 80px)":"420px",{zIndex:this.zIndex,maxWidth:e}}},{key:"hide",value:function(){this.$emit("hide")}},{key:"mounted",value:function(){var e;!eI.isNullish(null===(e=this.$options.propsData)||void 0===e?void 0:e.maxWidth)&&eM.deprecated("maxWidth 配置已废弃")}}]),n}(d.default),l=ed(c.prototype,"message",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=ed(c.prototype,"icon",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=ed(c.prototype,"iconColor",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=c))||s),v=eP({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"klk-toast",style:this.cStyle},[t("div",{staticClass:"klk-toast-inner"},[this.icon?t("Icon",{staticClass:"klk-toast-icon",attrs:{type:this.icon,size:48,color:this.iconColor}}):this._e(),this._v(" "),t("div",{staticClass:"klk-toast-message"},[this._v("\n      "+this._s(this.message)+"\n    ")])],1)])},staticRenderFns:[]},void 0,m,void 0,!1,void 0,!1,void 0,void 0,void 0);let y=d.default.extend(v),_={duration:2e3,multiple:!1},k=[];function b(e,t){if(eO.isServer)return;!_.multiple&&k.length?k.shift().hide():h(!k.length);let n=eI.isObject(e)?e:{message:e};n=Object.assign({},_,n);let r=new y({el:document.createElement("div"),propsData:Object.assign({},n)}),o=r.$el,i=!1;t instanceof Element&&1===t.nodeType?(o.style.position="absolute","static"===getComputedStyle(t).position&&(t.style.position="relative",i=!0)):t=document.body,t.appendChild(o);let a=null;return n.hide=()=>{k=k.filter(e=>e!==n),t.removeChild(o),i&&(t.style.position=""),r.$destroy(),n=null,a&&window.clearTimeout(a)},r.$on("hide",n.hide),n.duration&&(a=window.setTimeout(n.hide,n.duration)),k.push(n),r}b.setDefaultOptions=function(e){_=Object.assign(_,e)},b.install=function(e){e.prototype.$toast=b},t.default=b})),eN=w(function(e,t){var n,r;n=0,r=function(){var e="millisecond",t="second",n="minute",r="hour",o="week",i="month",a="quarter",s="year",c="date",l="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},f="en",h={};h[f]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")};var m=function(e){return e instanceof g},v=function(e,t,n){var r;if(!e)return f;if("string"==typeof e)h[e]&&(r=e),t&&(h[e]=t,r=e);else{var o=e.name;h[o]=e,r=o}return!n&&r&&(f=r),r||!n&&f},y=function(e,t){if(m(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new g(n)},_={s:d,z:function(e){var t=-e.utcOffset(),n=Math.abs(t);return(t<=0?"+":"-")+d(Math.floor(n/60),2,"0")+":"+d(n%60,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,i),a=n-o<0,s=t.clone().add(r+(a?-1:1),i);return+(-(r+(n-o)/(a?o-s:s-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(l){return({M:i,y:s,w:o,d:"day",D:c,h:r,m:n,s:t,ms:e,Q:a})[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};_.l=v,_.i=m,_.w=function(e,t){return y(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var g=function(){function d(e){this.$L=v(e.locale,null,!0),this.parse(e)}var f=d.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(u);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return _},f.isValid=function(){return this.$d.toString()!==l},f.isSame=function(e,t){var n=y(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return y(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<y(e)},f.$g=function(e,t,n){return _.u(e)?this[t]:this.set(n,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,a){var l=this,u=!!_.u(a)||a,p=_.p(e),d=function(e,t){var n=_.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return u?n:n.endOf("day")},f=function(e,t){return _.w(l.toDate()[e].apply(l.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},h=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(p){case s:return u?d(1,0):d(31,11);case i:return u?d(1,m):d(0,m+1);case o:var g=this.$locale().weekStart||0,k=(h<g?h+7:h)-g;return d(u?v-k:v+(6-k),m);case"day":case c:return f(y+"Hours",0);case r:return f(y+"Minutes",1);case n:return f(y+"Seconds",2);case t:return f(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(o,a){var l,u=_.p(o),p="set"+(this.$u?"UTC":""),d=((l={}).day=p+"Date",l[c]=p+"Date",l[i]=p+"Month",l[s]=p+"FullYear",l[r]=p+"Hours",l[n]=p+"Minutes",l[t]=p+"Seconds",l[e]=p+"Milliseconds",l)[u],f="day"===u?this.$D+(a-this.$W):a;if(u===i||u===s){var h=this.clone().set(c,1);h.$d[d](f),h.init(),this.$d=h.set(c,Math.min(this.$D,h.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[_.p(e)]()},f.add=function(e,a){var c,l=this;e=Number(e);var u=_.p(a),p=function(t){var n=y(l);return _.w(n.date(n.date()+Math.round(t*e)),l)};if(u===i)return this.set(i,this.$M+e);if(u===s)return this.set(s,this.$y+e);if("day"===u)return p(1);if(u===o)return p(7);var d=((c={})[n]=6e4,c[r]=36e5,c[t]=1e3,c)[u]||1,f=this.$d.getTime()+e*d;return _.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=_.z(this),i=this.$H,a=this.$m,s=this.$M,c=n.weekdays,u=n.months,d=function(e,n,o,i){return e&&(e[n]||e(t,r))||o[n].substr(0,i)},f=function(e){return _.s(i%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:_.s(s+1,2,"0"),MMM:d(n.monthsShort,s,u,3),MMMM:d(u,s),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,c,2),ddd:d(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:_.s(i,2,"0"),h:f(1),hh:f(2),a:h(i,a,!0),A:h(i,a,!1),m:String(a),mm:_.s(a,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:o};return r.replace(p,function(e,t){return t||m[e]||o.replace(":","")})},f.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},f.diff=function(e,c,l){var u,p=_.p(c),d=y(e),f=(d.utcOffset()-this.utcOffset())*6e4,h=this-d,m=_.m(this,d);return m=((u={})[s]=m/12,u[i]=m,u[a]=m/3,u[o]=(h-f)/6048e5,u.day=(h-f)/864e5,u[r]=h/36e5,u[n]=h/6e4,u[t]=h/1e3,u)[p]||h,l?m:_.a(m)},f.daysInMonth=function(){return this.endOf(i).$D},f.$locale=function(){return h[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=v(e,t,!0);return r&&(n.$L=r),n},f.clone=function(){return _.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),k=g.prototype;return y.prototype=k,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W","day"],["$M",i],["$y",s],["$D",c]].forEach(function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),y.extend=function(e,t){return e.$i||(e(t,g,y),e.$i=!0),y},y.locale=v,y.isDayjs=m,y.unix=function(e){return y(1e3*e)},y.en=h[f],y.Ls=h,y.p={},y},e.exports=r()}),eE=Object.prototype,eA=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eE)};var eH=(i=Object.keys,a=Object,function(e){return i(a(e))}),eB=Object.prototype.hasOwnProperty,eF=function(e){if(!eA(e))return eH(e);var t=[];for(var n in Object(e))eB.call(e,n)&&"constructor"!=n&&t.push(n);return t},eW="object"==typeof k&&k&&k.Object===Object&&k,ez="object"==typeof self&&self&&self.Object===Object&&self,eU=eW||ez||Function("return this")(),eY=eU.Symbol,eV=Object.prototype,eK=eV.hasOwnProperty,eG=eV.toString,eq=eY?eY.toStringTag:void 0,eJ=function(e){var t=eK.call(e,eq),n=e[eq];try{e[eq]=void 0;var r=!0}catch(e){}var o=eG.call(e);return r&&(t?e[eq]=n:delete e[eq]),o},eZ=Object.prototype.toString,eX=eY?eY.toStringTag:void 0,eQ=function(e){var t;if(null==e)return void 0===e?"[object Undefined]":"[object Null]";return eX&&eX in Object(e)?eJ(e):(t=e,eZ.call(t))},e0=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},e1=function(e){if(!e0(e))return!1;var t=eQ(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},e2=eU["__core-js_shared__"];var e3=(s=/[^.]+$/.exec(e2&&e2.keys&&e2.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",e4=Function.prototype.toString,e5=function(e){if(null!=e){try{return e4.call(e)}catch(e){}try{return e+""}catch(e){}}return""},e6=/^\[object .+?Constructor\]$/,e7=Object.prototype,e8=Function.prototype.toString,e9=e7.hasOwnProperty,te=RegExp("^"+e8.call(e9).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=function(e){var t;return!!e0(e)&&(t=e,!e3||!(e3 in t))&&(e1(e)?te:e6).test(e5(e))},tn=function(e,t){var n,r,o=(n=e,r=t,null==n?void 0:n[r]);return tt(o)?o:void 0},tr=tn(eU,"DataView"),to=tn(eU,"Map"),ti=tn(eU,"Promise"),ta=tn(eU,"Set"),ts=tn(eU,"WeakMap"),tc="[object Map]",tl="[object Promise]",tu="[object Set]",tp="[object WeakMap]",td="[object DataView]",tf=e5(tr),th=e5(to),tm=e5(ti),tv=e5(ta),ty=e5(ts),t_=eQ;(tr&&t_(new tr(new ArrayBuffer(1)))!=td||to&&t_(new to)!=tc||ti&&t_(ti.resolve())!=tl||ta&&t_(new ta)!=tu||ts&&t_(new ts)!=tp)&&(t_=function(e){var t=eQ(e),n="[object Object]"==t?e.constructor:void 0,r=n?e5(n):"";if(r)switch(r){case tf:return td;case th:return tc;case tm:return tl;case tv:return tu;case ty:return tp}return t});var tg=t_,tk=function(e){return null!=e&&"object"==typeof e},tb=function(e){return tk(e)&&"[object Arguments]"==eQ(e)},tw=Object.prototype,tS=tw.hasOwnProperty,t$=tw.propertyIsEnumerable,tx=tb(function(){return arguments}())?tb:function(e){return tk(e)&&tS.call(e,"callee")&&!t$.call(e,"callee")},tC=Array.isArray,tT=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff},tP=function(){return!1},tD=w(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?eU.Buffer:void 0,i=o?o.isBuffer:void 0;e.exports=i||tP}),tR={};tR["[object Float32Array]"]=tR["[object Float64Array]"]=tR["[object Int8Array]"]=tR["[object Int16Array]"]=tR["[object Int32Array]"]=tR["[object Uint8Array]"]=tR["[object Uint8ClampedArray]"]=tR["[object Uint16Array]"]=tR["[object Uint32Array]"]=!0,tR["[object Arguments]"]=tR["[object Array]"]=tR["[object ArrayBuffer]"]=tR["[object Boolean]"]=tR["[object DataView]"]=tR["[object Date]"]=tR["[object Error]"]=tR["[object Function]"]=tR["[object Map]"]=tR["[object Number]"]=tR["[object Object]"]=tR["[object RegExp]"]=tR["[object Set]"]=tR["[object String]"]=tR["[object WeakMap]"]=!1;var tO=w(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&eW.process,i=function(){try{var e=r&&r.require&&r.require("util").types;if(e)return e;return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),tj=tO&&tO.isTypedArray;var tI=tj?(c=tj,function(e){return c(e)}):function(e){return tk(e)&&tT(e.length)&&!!tR[eQ(e)]},tM=Object.prototype.hasOwnProperty,tL=function(e){if(null==e)return!0;if(null!=(t=e)&&tT(t.length)&&!e1(t)&&(tC(e)||"string"==typeof e||"function"==typeof e.splice||tD(e)||tI(e)||tx(e)))return!e.length;var t,n=tg(e);if("[object Map]"==n||"[object Set]"==n)return!e.size;if(eA(e))return!eF(e).length;for(var r in e)if(tM.call(e,r))return!1;return!0},tN=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.arex_data={},e.originData={},e.selectSeatData={select_train_time:{departure_time:""}},e.departureStation=[],e.confirmBtnLoading=!1,e.scheduleDate="",e.showConfirmModal=!1,e.showMore=!1,e.showDate=!1,e.showSelectSeat=!1,e.timeList=[],e.tips="",e.modalTitle="",e.date_tip="",e.date_desc="",e.date="",e}return T(o,[{key:"showSelectSeatChange",value:function(e){!e&&(this.timeList=[],this.selectSeatData={select_train_time:{departure_time:""}})}},{key:"scheduleDateChange",value:function(e){this.timeList=[],this.selectSeatData={select_train_time:{departure_time:""}},this.getTimeList()}},{key:"sectionData",get:function(){return this.section||{}}},{key:"sectionBody",get:function(){return this.sectionData.body||{}}},{key:"sectionContent",get:function(){return this.sectionBody.content||{}}},{key:"businessData",get:function(){return this.sectionContent.data||{}}},{key:"isAsync",get:function(){return"async"===this.sectionContent.load_type}},{key:"bookingRefNo",get:function(){return this.businessData.booking_no||""}},{key:"confirmBtnDisable",get:function(){var e,t,n=!1;return!(null===(t=null===(e=this.selectSeatData)||void 0===e?void 0:e.select_train_time)||void 0===t?void 0:t.departure_time)&&(n=!0),!this.scheduleDate&&(n=!0),n}},{key:"currentQRCode",get:function(){var e,t=(null===(e=this.arex_data)||void 0===e?void 0:e.ticket_details)||[];return this.showMore?t.slice(0,6):t}},{key:"initShowMore",value:function(){var e;((null===(e=this.arex_data)||void 0===e?void 0:e.ticket_details)||[]).length>6?this.showMore=!0:this.showMore=!1}},{key:"handleChangeDate",value:function(e){this.scheduleDate=eN(e).format("YYYY-MM-DD"),this.showDate=!1}},{key:"handleMore",value:function(){this.showMore=!this.showMore}},{key:"cancelConfirm",value:function(){this.showConfirmModal=!1,this.confirmBtnLoading=!1}},{key:"handleSetSeatForm",value:function(e){this.selectSeatData=e}},{key:"handleSubmit",value:function(){this.confirmBtnLoading=!0,this.showConfirmModal=!0}},{key:"handleDoubleConfirm",value:function(e){this.showConfirmModal=!1,this.confirmActive(this.selectSeatData.select_train_time)}},{key:"getArexStatus",value:function(){return M(this,void 0,void 0,B.mark(function e(){var t,n=this;return B.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get("/v1/np2pbffserv/booking/detail",{params:{booking_ref_no:this.bookingRefNo,provider_id:"1208"}});case 3:(t=e.sent).data&&t.data.result&&(this.arex_data=t.data.result,this.$nextTick(function(){n.initShowMore()})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.message&&this.$alert(e.t0.message);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"handleCopy",value:function(e){return M(this,void 0,void 0,B.mark(function t(){return B.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:t.sent&&eL(this.$t("copy_success"));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTimeList",value:function(){var e,t;return M(this,void 0,void 0,B.mark(function n(){var r,o,i,a,s,c,l,u,p;return B.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.$axios.post("/v2/np2pbffserv/schedule",{provider_id:"1208",date:this.scheduleDate,booking_ref_no:this.bookingRefNo});case 3:(r=n.sent).data&&!tL(r.data.result)?(a=void 0===(i=(o=r.data.result).train_list)?[]:i,s=o.tips,c=o.title,l=o.date_tip,u=o.date_desc,p=o.date,this.timeList=a,this.tips=s,this.modalTitle=c,this.date_tip=l,this.date_desc=u,this.date=p):this.$alert(null===(t=null===(e=r.data)||void 0===e?void 0:e.error)||void 0===t?void 0:t.message),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),n.t0.message&&this.$alert(n.t0.message);case 10:case"end":return n.stop()}},n,this,[[0,7]])}))}},{key:"confirmActive",value:function(e){var t,n;return M(this,void 0,void 0,B.mark(function r(){var o;return B.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.$axios.post("/v1/np2pbffserv/ticket/active",{booking_ref_no:this.bookingRefNo,provider_id:"1208",select_train_time:e});case 3:console.log("jolon res",o=r.sent),o.data&&o.data.success?(this.confirmBtnLoading=!1,this.showSelectSeat=!1,this.getArexStatus()):(this.confirmBtnLoading=!1,this.$alert((null===(n=null===(t=o.data)||void 0===t?void 0:t.error)||void 0===n?void 0:n.message)||"网络错误，请重试",this.$t("120020"))),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(0),r.t0.message&&this.$alert(r.t0.message),console.log("jolon error",r.t0),this.confirmBtnLoading=!1;case 13:case"end":return r.stop()}},r,this,[[0,8]])}))}},{key:"mounted",value:function(){this.getArexStatus(),this.getTimeList()}}]),o}(_.Vue);I([(0,_.Prop)()],tN.prototype,"hideSection",void 0),I([(0,_.Prop)()],tN.prototype,"setSectionState",void 0),I([(0,_.Prop)()],tN.prototype,"state",void 0),I([(0,_.Prop)()],tN.prototype,"section",void 0),I([(0,_.Watch)("showSelectSeat")],tN.prototype,"showSelectSeatChange",null),I([(0,_.Watch)("scheduleDate",{immediate:!0})],tN.prototype,"scheduleDateChange",null),tN=I([_.Component],tN);var tE=E("icon-chevron-down",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("path",{attrs:{d:"M10 17L24 32L31 24.5L38 17",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin}})])),tA=E("icon-close",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("path",{attrs:{d:"M10 10L38 38",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}}),e("path",{attrs:{d:"M38 10L10 38",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}})])),tH=E("icon-information",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("circle",{attrs:{cx:"24",cy:"24",r:"21",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth}}),e("path",{attrs:{d:"M24 35V24",stroke:t.colors[2],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}}),e("circle",{attrs:{cx:"24",cy:"15.5",r:"2.5",fill:t.colors[2]}})])),tB=E("icon-alarm",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("g",{attrs:{"clip-path":"url(#"+t.id+"1349a6a6)"}},[e("circle",{attrs:{cx:"24",cy:"26.5",r:"19.5",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth}}),e("path",{attrs:{d:"M23 18V28.8333L32 33",stroke:t.colors[2],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin}}),e("line",{attrs:{x1:"12.6226",y1:"2.29695",x2:"6.28304",y2:"7.80785",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}}),e("line",{attrs:{x1:"1.8",y1:"-1.8",x2:"10.2",y2:"-1.8",transform:"matrix(-0.788011 -0.615661 -0.615661 0.788011 42 10)",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}})]),e("defs",[e("clipPath",{attrs:{id:t.id+"1349a6a6"}},[e("rect",{attrs:{width:"48",height:"48",fill:"white"}})])])])),tF=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.seatData={select_train_time:{departure_time:""}},e.timeList=[],e}return T(o,[{key:"className",get:function(){return"seat-form"}},{key:"handleSelectTime",value:function(e){this.$emit("handle-set-seat-form",{select_train_time:e})}}]),o}(_.Vue);tF.displayName="ArexSeatForm",I([(0,_.Prop)()],tF.prototype,"seatData",void 0),I([(0,_.Prop)()],tF.prototype,"timeList",void 0);var tW=tF=I([(0,_.Component)({components:{IconAlarm:tB}})],tF);let tz=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:Array.isArray(e.timeList)&&e.timeList.length,expression:"Array.isArray(timeList) && timeList.length"}],class:""+e.className,nativeOn:{click:function(e){return e.stopPropagation()}}},[n("div",{class:e.className+"-item"},e._l(e.timeList,function(t,r){return n("div",{key:r,class:[e.className+"-item-time-item",t.departure_time===e.seatData.select_train_time.departure_time&&e.className+"-item-time-item-select"],on:{click:function(n){return e.handleSelectTime(t)}}},[e._v("\n      "+e._s(t.display_departure_time)+"\n      "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.departure_time===e.seatData.select_train_time.departure_time,expression:"time.departure_time === seatData.select_train_time.departure_time"}],class:e.className+"-item-time-item-icon"},[n("img",{attrs:{src:"https://res.klook.com/image/upload/v1701850084/UED_new/Transport%20Tickets/%E9%A6%96%E9%A1%B5_2306%28Pre-sale%E4%BC%98%E5%8C%96%29/icon_check_outlined_1.svg"}})])])}),0)])},staticRenderFns:[]},void 0,tW,"data-v-776def29",!1,void 0,!1,void 0,void 0,void 0);var tU=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o,[{key:"showDateChange",value:function(){this.showDate?window.addEventListener("click",this.openModal):window.removeEventListener("click",this.openModal)}},{key:"selectDate",get:function(){return this.scheduleDate?eN(this.scheduleDate).toDate():eN().toDate()}},{key:"beforeDestroy",value:function(){window.removeEventListener("click",this.openModal)}},{key:"className",get:function(){return"ptp-arex"}},{key:"maxDate",get:function(){return eN().add(2,"month").toDate()}},{key:"handleOpenDate",value:function(){this.showDate=!0}},{key:"openModal",value:function(e){this.showDate=!1}},{key:"handleCloseDrawer",value:function(){this.showSelectSeat=!1}},{key:"handleClickActive",value:function(){this.selectSeatData={select_train_time:{departure_time:"",display_departure_time:""}},this.scheduleDate="",this.originData={},this.showSelectSeat=!0}},{key:"handleConfirm",value:function(){if(!this.confirmBtnDisable&&!this.confirmBtnLoading)this.handleSubmit()}}]),o}(tN);tU.displayName="DesktopExperiencePtp_arex",I([(0,_.Watch)("showDate")],tU.prototype,"showDateChange",null),tU=I([(0,_.Component)({components:{IconClose:tA,SeatForm:tz,IconChevronDown:tE,IconInformation:tH}})],tU);var tY=E("icon-back",!0,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("path",{attrs:{d:"M31 8L13 24L22 32L31 40",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin}})])),tV=E("icon-caution-circle",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("circle",{attrs:{cx:"24",cy:"24",r:"21",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth}}),e("path",{attrs:{d:"M24 25V14",stroke:t.colors[2],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap}}),e("circle",{attrs:{cx:"24",cy:"33",r:"2.5",fill:t.colors[2]}})])),tK=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.seatData={select_train_time:{departure_time:""}},e.confirmBtnDisable=!1,e.confirmBtnLoading=!1,e.showConfirmModal=!1,e.timeList=[],e.tips="",e.dateDesc="",e.date="",e.dateTip="",e.scheduleDate="",e.showDate=!1,e}return T(o,[{key:"className",get:function(){return"seat-mobile-modal"}},{key:"maxDate",get:function(){return eN().add(2,"month").toDate()}},{key:"selectDate",get:function(){return this.scheduleDate?eN(this.scheduleDate).toDate():eN().toDate()}},{key:"handleSubmit",value:function(){if(!this.confirmBtnLoading)this.$emit("submit",this.seatData)}},{key:"handleDoubleConfirm",value:function(){this.$emit("handle-double-confirm")}},{key:"cancelConfirm",value:function(){this.$emit("cancel-confirm")}},{key:"handleChangeDate",value:function(e){this.$emit("handle-change-date",e),this.showDate=!1}},{key:"handleSelectTime",value:function(e){this.seatData=Object.assign(Object.assign({},this.seatData),{select_train_time:e}),this.$emit("handle-set-seat-form",this.seatData)}}]),o}(_.Vue);tK.displayName="ArexSeatForm",I([(0,_.Prop)()],tK.prototype,"seatData",void 0),I([(0,_.Prop)()],tK.prototype,"confirmBtnDisable",void 0),I([(0,_.Prop)()],tK.prototype,"confirmBtnLoading",void 0),I([(0,_.Prop)()],tK.prototype,"showConfirmModal",void 0),I([(0,_.Prop)()],tK.prototype,"timeList",void 0),I([(0,_.Prop)()],tK.prototype,"tips",void 0),I([(0,_.Prop)()],tK.prototype,"dateDesc",void 0),I([(0,_.Prop)()],tK.prototype,"date",void 0),I([(0,_.Prop)()],tK.prototype,"dateTip",void 0),I([(0,_.Prop)()],tK.prototype,"scheduleDate",void 0);var tG=tK=I([(0,_.Component)({components:{IconCautionCircle:tV}})],tK);let tq=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:""+e.className},[n("div",{class:e.className+"-content"},[e.tips?n("div",{class:e.className+"-content-tips"},[n("IconCautionCircle",{attrs:{theme:"outline",size:"16",fill:"#2073F9"}}),e._v(" "),n("div",{class:e.className+"-content-tips-content"},[e._v("\n        "+e._s(e.tips)+"\n      ")])],1):e._e(),e._v(" "),n("div",{class:e.className+"-content-subtitle"},[e._v(e._s(e.$t("175209")))]),e._v(" "),n("div",{class:e.className+"-content-date"},[n("klk-input",{class:e.className+"-content-date-input",attrs:{readonly:!0,value:e.scheduleDate,placeholder:e.$t("175210"),"append-icon":"icon_time_calendar"},on:{focus:function(t){e.showDate=!0}},nativeOn:{click:function(e){return e.stopPropagation()}}})],1),e._v(" "),Array.isArray(e.timeList)&&e.timeList.length?n("div",{class:e.className+"-content-subtitle"},[e._v(e._s(e.$t("175211")))]):e._e(),e._v(" "),n("div",{class:e.className+"-form"},[n("div",{class:e.className+"-item"},e._l(e.timeList,function(t,r){return n("div",{key:r,class:[e.className+"-item-time-item",t.departure_time===e.seatData.select_train_time.departure_time&&e.className+"-item-time-item-select"],on:{click:function(n){return e.handleSelectTime(t)}}},[e._v("\n          "+e._s(t.display_departure_time)+"\n          "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.departure_time===e.seatData.select_train_time.departure_time,expression:"time.departure_time === seatData.select_train_time.departure_time"}],class:e.className+"-item-time-item-icon"},[n("img",{attrs:{src:"https://res.klook.com/image/upload/v1701850084/UED_new/Transport%20Tickets/%E9%A6%96%E9%A1%B5_2306%28Pre-sale%E4%BC%98%E5%8C%96%29/icon_check_outlined_1.svg"}})])])}),0)])]),e._v(" "),n("div",{class:e.className+"-footer"},[n("klk-button",{class:e.className+"-footer-btn",attrs:{size:"normal",type:"primary",disabled:e.confirmBtnDisable,loading:e.confirmBtnLoading},on:{click:e.handleSubmit}},[e._v("\n    "+e._s(e.$t("120345-confirm"))+"\n    ")])],1),e._v(" "),n("client-only",[e.showConfirmModal&&e.seatData&&e.seatData.select_train_time?n("klk-modal",{attrs:{open:e.showConfirmModal,"overlay-closable":!1},on:{"update:open":function(t){e.showConfirmModal=t},"on-confirm":e.handleDoubleConfirm,"on-cancel":e.cancelConfirm}},[n("div",{class:e.className+"-confirm-modal"},[n("div",{class:e.className+"-confirm-modal-title"},[e._v("\n          "+e._s(e.$t("175212"))+"\n        ")]),e._v(" "),n("div",{class:e.className+"-confirm-modal-item"},[n("p",[e._v("\n            "+e._s(e.$t("175213",{MMM:e.seatData.select_train_time.display_travel_date,d:"",YYYY:""}))+"\n          ")]),e._v(" "),n("p",[e._v("\n            "+e._s(e.$t("175214",{HH1:""+e.seatData.select_train_time.display_departure_time,mm1:"",HH2:""+e.seatData.select_train_time.display_arrival_time,mm2:""}))+"\n          ")])])])]):e._e(),e._v(" "),e.showDate?n("klk-bottom-sheet",{attrs:{"show-close":"",visible:e.showDate,title:e.$t("12761"),height:"70%"},on:{"update:visible":function(t){e.showDate=t}}},[n("klk-date-picker",{ref:"date",class:e.className+"-content-date-datepicker",attrs:{date:e.selectDate,type:"date","min-date":new Date,"max-date":e.maxDate,"vertical-scroll":""},on:{select:e.handleChangeDate}})],1):e._e()],1)],1)},staticRenderFns:[]},void 0,tG,"data-v-b512283a",!1,void 0,!1,void 0,void 0,void 0);var tJ=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o,[{key:"className",get:function(){return"arex-mobile"}},{key:"handleCloseModal",value:function(){this.showSelectSeat=!1}},{key:"handleShowModal",value:function(){this.scheduleDate="",this.showSelectSeat=!0}}]),o}(tN);tJ.displayName="MobileExperiencePtp_arex",tJ=I([(0,_.Component)({components:{SeatMobileModal:tq,IconBack:tY}})],tJ);var tZ=n("79999"),tX=n("43286"),tQ=n("82720"),t0=E("icon-switch",!1,(e,t)=>e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"}},[e("path",{attrs:{d:"M16.7027 41L6 31L42 31",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin}}),e("path",{attrs:{d:"M31.2973 7L42 17L6 17",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin}})])),t1=w(function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports});b(t1);var t2=w(function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports});b(t2);var t3=w(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports});b(t3);var t4=w(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return t3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t3(e,t)}},e.exports.__esModule=!0,e.exports.default=e.exports});b(t4);var t5=w(function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports});b(t5);var t6=b(w(function(e){e.exports=function(e,t){return t1(e)||t2(e,t)||t4(e,t)||t5()},e.exports.__esModule=!0,e.exports.default=e.exports})),t7={ptpStationSearch:"/v3/reappserv/ptp/:productType/location/search",ptpSearchForm:"/v1/reappserv/ptp/:productType/search/form",ptpTagResult:"/v1/reappserv/ptp/calendar/tag/result",getCurrentProductType:"/v1/reappserv/ptp/vertical_info"};function t8(){return(t8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function t9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ne={ip_country:"US",default_currency:"USD",default_languages:"en",support_currencies:["HKD","USD","TWD","SGD","CNY","AUD","GBP","LAK","EUR","THB","NZD","MYR","JPY","AED","PHP","KRW","VND","IDR","SEK","NOK","DKK","CHF","TRY","ISK","INR","KHR","MMK","MOP","QAR","OMR","JOD","FJD","CAD","MUR","MXN","MAD","EGP","ZAR","MGA","ILS"],only_server_support_currencies:[],support_languages:["de","en","en-AU","en-CA","en-GB","en-HK","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US","es","fr","id","it","ja","ko","ru","th","vi","zh-CN","zh-HK","zh-TW","ms-MY"],change_site_tip:!1,footer_change_site:!0,href:"https://www.klook.com/",website:"www.klook.com",business_license:!1,pay_way:"all",price_guarantee:!0},nt={ip_country:"CN",default_currency:"CNY",default_languages:"zh-CN",support_currencies:["CNY"],only_server_support_currencies:[],support_languages:["zh-CN"],change_site_tip:!0,href:"https://www.klook.cn/",website:"www.klook.cn",business_license:!0,pay_way:"china",price_guarantee:!1},nn={"www.klook.cn":nt,"klook.cn":nt,"guest.klook.com":{website:"guest.klook.com",footer_change_site:!1},"cap.klook.com":{website:"cap.klook.com"}},nr=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},no="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},ni="object"==typeof no&&no&&no.Object===Object&&no,na="object"==typeof self&&self&&self.Object===Object&&self,ns=ni||na||Function("return this")(),nc=ns.Symbol,nl=Object.prototype,nu=nl.hasOwnProperty,np=nl.toString,nd=nc?nc.toStringTag:void 0,nf=function(e){var t=nu.call(e,nd),n=e[nd];try{e[nd]=void 0;var r=!0}catch(e){}var o=np.call(e);return r&&(t?e[nd]=n:delete e[nd]),o},nh=Object.prototype.toString,nm=nc?nc.toStringTag:void 0,nv=function(e){var t;if(null==e)return void 0===e?"[object Undefined]":"[object Null]";return nm&&nm in Object(e)?nf(e):(t=e,nh.call(t))},ny=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},n_=function(e){if(!ny(e))return!1;var t=nv(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ng=ns["__core-js_shared__"];var nk=(l=/[^.]+$/.exec(ng&&ng.keys&&ng.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",nb=Function.prototype.toString,nw=function(e){if(null!=e){try{return nb.call(e)}catch(e){}try{return e+""}catch(e){}}return""},nS=/^\[object .+?Constructor\]$/,n$=Object.prototype,nx=Function.prototype.toString,nC=n$.hasOwnProperty,nT=RegExp("^"+nx.call(nC).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nP=function(e){var t;return!!ny(e)&&(t=e,!nk||!(nk in t))&&(n_(e)?nT:nS).test(nw(e))},nD=function(e,t){var n,r,o=(n=e,r=t,null==n?void 0:n[r]);return nP(o)?o:void 0},nR=nD(Object,"create"),nO=Object.prototype.hasOwnProperty,nj=Object.prototype.hasOwnProperty;function nI(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}nI.prototype.clear=function(){this.__data__=nR?nR(null):{},this.size=0},nI.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nI.prototype.get=function(e){var t=this.__data__;if(nR){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return nO.call(t,e)?t[e]:void 0},nI.prototype.has=function(e){var t=this.__data__;return nR?void 0!==t[e]:nj.call(t,e)},nI.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nR&&void 0===t?"__lodash_hash_undefined__":t,this};var nM=function(e,t){for(var n,r,o=e.length;o--;){;if(n=e[o][0],n===(r=t)||n!=n&&r!=r)return o}return -1},nL=Array.prototype.splice;function nN(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}nN.prototype.clear=function(){this.__data__=[],this.size=0},nN.prototype.delete=function(e){var t=this.__data__,n=nM(t,e);return!(n<0)&&(n==t.length-1?t.pop():nL.call(t,n,1),--this.size,!0)},nN.prototype.get=function(e){var t=this.__data__,n=nM(t,e);return n<0?void 0:t[n][1]},nN.prototype.has=function(e){return nM(this.__data__,e)>-1},nN.prototype.set=function(e,t){var n=this.__data__,r=nM(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var nE=nD(ns,"Map"),nA=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},nH=function(e,t){var n=e.__data__;return nA(t)?n["string"==typeof t?"string":"hash"]:n.map};function nB(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}nB.prototype.clear=function(){this.size=0,this.__data__={hash:new nI,map:new(nE||nN),string:new nI}},nB.prototype.delete=function(e){var t=nH(this,e).delete(e);return this.size-=t?1:0,t},nB.prototype.get=function(e){return nH(this,e).get(e)},nB.prototype.has=function(e){return nH(this,e).has(e)},nB.prototype.set=function(e,t){var n=nH(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function nF(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new nB;++t<n;)this.add(e[t])}nF.prototype.add=nF.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},nF.prototype.has=function(e){return this.__data__.has(e)};var nW=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return -1},nz=function(e){return e!=e},nU=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return -1},nY=function(e,t){var n,r,o;return!!(null==e?0:e.length)&&(n=e,o=0,((r=t)==r?nU(n,r,0):nW(n,nz,o))>-1)},nV=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1},nK=function(e){return function(t){return e(t)}},nG=function(e,t){return e.has(t)},nq=Math.min,nJ=function(e,t,n){for(var r=n?nV:nY,o=e[0].length,i=e.length,a=i,s=Array(i),c=1/0,l=[];a--;){var u=e[a];a&&t&&(u=nr(u,nK(t))),c=nq(u.length,c),s[a]=!n&&(t||o>=120&&u.length>=120)?new nF(a&&u):void 0}u=e[0];var p=-1,d=s[0];e:for(;++p<o&&l.length<c;){var f=u[p],h=t?t(f):f;if(f=n||0!==f?f:0,!(d?nG(d,h):r(l,h,n))){for(a=i;--a;){var m=s[a];if(!(m?nG(m,h):r(e[a],h,n)))continue e}d&&d.push(h),l.push(f)}}return l},nZ=function(e){return e},nX=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},nQ=Math.max,n0=function(){try{var e=nD(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),n1=Date.now;var n2=(u=n0?function(e,t){var n;return n0(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0})}:nZ,p=0,d=0,function(){var e=n1(),t=16-(e-d);if(d=e,t>0){if(++p>=800)return arguments[0]}else p=0;return u.apply(void 0,arguments)}),n3=function(e){var t;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&!n_(e)},n4=function(e){var t;return null!=(t=e)&&"object"==typeof t&&n3(e)},n5=function(e){return n4(e)?e:[]};var n6=n2((m=f=function(e){var t=nr(e,n5);return t.length&&t[0]===e[0]?nJ(t):[]},v=void 0,y=nZ,v=nQ(void 0===v?m.length-1:v,0),function(){for(var e=arguments,t=-1,n=nQ(e.length-v,0),r=Array(n);++t<n;)r[t]=e[v+t];t=-1;for(var o=Array(v+1);++t<v;)o[t]=e[t];return o[v]=y(r),nX(m,this,o)}),f+""),n7=[{title:"English (Australia)",value:"en-AU"},{title:"English (Canada)",value:"en-CA"},{title:"English (Hong Kong, SAR)",value:"en-HK"},{title:"English (India)",value:"en-IN"},{title:"English (Malaysia)",value:"en-MY"},{title:"English (New Zealand)",value:"en-NZ"},{title:"English (Philippines)",value:"en-PH"},{title:"English (Singapore)",value:"en-SG"},{title:"English (US)",value:"en-US"},{title:"English (UK)",value:"en-GB"},{title:"English (International)",value:"en"},{title:"简体中文",value:"zh-CN"},{title:"繁體中文",children:[{title:"香港繁體",value:"zh-HK"},{title:"台灣繁體",value:"zh-TW"}]},{title:"日本語",value:"ja"},{title:"한국어",value:"ko"},{title:"ไทย",value:"th"},{title:"Tiếng Việt",value:"vi"},{title:"Bahasa Indonesia",value:"id"},{title:"Bahasa Malaysia",value:"ms-MY"},{title:"Fran\xe7ais",value:"fr"},{title:"Espa\xf1ol",value:"es"},{title:"Deutsch",value:"de"},{title:"Italiano",value:"it"},{title:"Русский",value:"ru"}],n8=["de","en","en-AU","en-CA","en-GB","en-HK","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US","es","fr","id","it","ja","ko","ru","th","vi","zh-CN","zh-HK","zh-TW","ms-MY"],n9={DE:"de",BS:"en",AU:"en-AU",CA:"en-CA",GB:"en-GB",IN:"en-IN",MY:"en-MY",NZ:"en-NZ",PH:"en-PH",SG:"en-SG",US:"en-US",ES:"es",FR:"fr",ID:"id",IT:"it",JP:"ja",KR:"ko",RU:"ru",TH:"th",VN:"vi",CN:"zh-CN",HK:"zh-HK",TW:"zh-TW",VI:"vi"},re={"en-MY":{ms:"ms-MY"}},rt={de:"de_DE",en:"en_BS","en-AU":"en_AU","en-CA":"en_CA","en-GB":"en_GB","en-HK":"en_HK","en-IN":"en_IN","en-MY":"en_MY","en-NZ":"en_NZ","en-PH":"en_PH","en-SG":"en_SG","en-US":"en_US",es:"es_ES",fr:"fr_FR",id:"id_ID",it:"it_IT",ja:"ja_JP",ko:"ko_KR",ru:"ru_RU",th:"th_TH",vi:"vi_VN","zh-CN":"zh_CN","zh-HK":"zh_HK","zh-TW":"zh_TW","ms-MY":"ms_MY"},rn=["de","it","fr","ru","es"],rr={"zh-TW":["TW","HK","MO","SG","CN","TH","MY","AU","US","KR"],"zh-HK":["HK","TW","MO","SG","CN","TH","MY","AU","US","KR"],"zh-CN":["CN","HK","SG","MY","KR","US","CA","AU","TH"],en:["DE","FR","RU","NL","BE","CH","SE","ES","BR","AE"],"en-US":["US","MX","CA","BR","CO","AG","PE","VE","CL","KR"],"en-AU":["AU","NZ","PG","SG","ID","MY","IN","AE","GB","US"],"en-NZ":["NZ","AU","PG","SG","ID","MY","IN","AE","GB","US"],"en-GB":["GB","DK","FI","IS","NO","SE","IE","BE","NL","CH"],"en-IN":["IN","LK","PK","BD","MY","SG","NP","AE","GB","US"],"en-SG":["SG","MY","PH","TH","ID","IN","AU","HK","CA","GB"],"en-CA":["CA","US","HK","GB","FR","LB","AE","SG","PH","CN"],"en-HK":["HK","TW","MO","SG","CN","TH","MY","AU","US","KR"],"en-PH":["PH","SG","MY","TH","ID","IN","AU","HK","CA","US"],"en-MY":["MY","SG","PH","TH","ID","IN","AU","HK","AE","GB"],"ms-MY":["MY","SG","PH","TH","ID","IN","AU","HK","AE","GB"],ko:["KR","CN","JP","US","TW","HK","PH","SG","TH","MY"],th:["TH","SG","HK","PH","KR","MY","IN","AU","ID","CA"],vi:["VN","SG","HK","PH","KR","MY","IN","AU","ID","CA"],id:["ID","SG","HK","MY","PH","TW","KR","CN","TH","US"],ja:["JP","US","GB","AU","CA","SG","CN","HK","TW","KR"],de:["DE","AU","CH","BE","DK","SE","GB","NL","NO","IS"],it:["IT","AL","US","CH","CA","MT","BE","HR","SM","MC"],fr:["FR","CA","BE","CH","LU","SE","NL","GB","MC","MA"],ru:["RU","UA","KZ","BY","KG","EE","LV","LT","IL","MD"],es:["ES","MX","AR","CO","PE","VE","CL","EC","CR","PA"]};function ro(e){return t8({},ne,nn[e]||{}).support_languages}var ri=function(e){return rr[e]},ra=w(function(e,t){var n,r;n=0,r=function(){return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach(function(e){r[e]=t[e]}),r}}},e.exports=r()});function rs(e,t){return e.replace(/:([a-z]+)/gi,function(n,r){if(!t[r])throw Error("url parameter not find: ".concat(e));return t[r]})}eN.extend(ra);var rc={de:"de",en:"en","en-AU":"en","en-CA":"en","en-GB":"en","en-HK":"en","en-IN":"en","en-MY":"en","en-NZ":"en","en-PH":"en","en-SG":"en","en-US":"en","ms-MY":"ms-my",es:"es",fr:"fr",id:"id",it:"it",ja:"ja",ko:"ko",ru:"ru",th:"th",vi:"vi","zh-CN":"zh-cn","zh-HK":"zh-cn","zh-TW":"zh-cn"},rl={"h:mma":["en","en-AU","en-CA","en-GB","en-HK","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US"],"h:mm A":["zh-CN","zh-TW","zh-HK"],"A h:mm":["ko"],"HH:mm":["th","vi","id","ja","ms-MY"]};function ru(e){for(var t=Object.keys(rl),n=0;n<t.length;n+=1){var r=t[n];if(rl[r].includes(e))return r}return""}function rp(e){var t={1:["en","en-AU","en-CA","en-GB","en-HK","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US","ms-MY"],2:["zh-CN","zh-TW","zh-HK"],3:["ko"],4:["th","vi","id","ja","de","it","fr","ru","es"]},n=1;for(var r in t)t[r].includes(e)&&(n=r);return n}function rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rf=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.roundStatus="one_way",e.showTripModal=!1,e.form={from:{name:"",ruid:""},to:{name:"",ruid:""},departure_date:new Date,departure_time:"",return_date:"",return_time:"",passengers:[],seat_class:"",filter_only:!1},e.showStation=!1,e.showPassenger=!1,e.showSeat=!1,e.showDepartureDateTime=!1,e.showReturnDateTime=!1,e.nowRuid="",e.keyword="",e.stationType="from",e.ptpHistory={from:[],to:[]},e.ptpTagResult=[],e.originPtpTagResult=[],e.ptpFullHistory=[],e.showResult=!1,e.origin={},e.message={},e.productType="",e.loading=!1,e.validatorData={from:null,to:null,departure_date:null,departure_time:null,return_date:null,return_time:null,passengers:null,filter_only:null,seat_class:null},e}return T(o,[{key:"roundArr",get:function(){return[{label:this.$t("5068-oneway"),value:"one_way"},{label:this.$t("5109-round_trip"),value:"round_trip"}]}},{key:"needHistory",get:function(){return"DEST"!==this.currentPage&&!0}},{key:"round",get:function(){return this.origin.show_departure_date_input&&this.origin.show_return_date_input}},{key:"roundStatusText",get:function(){var e=this,t=this.roundArr.filter(function(t){return t.value===e.roundStatus})[0];return(null==t?void 0:t.label)||""}},{key:"resetValidator",value:function(){this.validatorData={from:null,to:null,departure_date:null,departure_time:null,return_date:null,return_time:null,passengers:null,filter_only:null}}},{key:"clickReturnIcon",value:function(){this.form.return_date="",this.form.return_time="",this.roundStatus="one_way",this.showReturnDateTime&&(this.showReturnDateTime=!1)}},{key:"roundStatusChange",value:function(e){this.roundStatus=e,this.resetValidator(),this.roundStatus=e,"one_way"===e?(this.form.return_date="",this.form.return_time=""):(eN(this.form.departure_date).diff(new Date,"day")>this.origin.date_range_count-this.origin.return_days_add?this.form.return_date=eN().add(this.origin.date_range_count,"day").$d:this.form.return_date=eN(this.form.departure_date).add(this.origin.return_days_add,"day").$d,this.form.return_time=this.origin.return_time),this.showTripModal=!1}},{key:"PassengerText",get:function(){var e=this,t="";return this.form.passengers&&this.form.passengers.forEach(function(n,r){var o,i,a="",s=e.origin.passenger_types.findIndex(function(e){return e.value===n.passenger_type});a=(null===(i=null===(o=e.origin.passenger_types)||void 0===o?void 0:o[s])||void 0===i?void 0:i.name)||n.name,t+="".concat(r?", ":"").concat(n.count," ").concat(a)}),t}},{key:"searchButtonSpm",get:function(){var e,t;return"SearchBtn?trg=manual&ext="+encodeURIComponent(JSON.stringify({FromStationId:null===(e=this.form.from)||void 0===e?void 0:e.ruid,ToStationId:null===(t=this.form.to)||void 0===t?void 0:t.ruid}))}},{key:"MaxDate",get:function(){return eN().add(this.origin.date_range_count,"day")}},{key:"historyList",get:function(){return this.productType+"list"}},{key:"fullHistoryStorageItem",get:function(){return"transpotrt_nuxt__".concat(this.productType,"_full_history")}},{key:"language",get:function(){return window.KLK_LANG||(((window.__KLOOK__||{}).state||{}).klook||{}).language||"en"}},{key:"historyForm",get:function(){return"".concat(this.productType,"formdata").concat(this.language)}},{key:"leafCategoryIdChange",value:function(){this.initSearchForm(),this.getHistory(),this.getFullHistory()}},{key:"initSearchForm",value:function(){var e;return M(this,void 0,void 0,B.mark(function t(){var n,r,o;return B.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.$axios.$get(t7.getCurrentProductType,{params:{leaf_category_id:this.leafCategoryId}});case 4:if(!((n=t.sent).success&&n.result)){t.next=15;break}return this.productType=null===(e=n.result.items[0])||void 0===e?void 0:e.product_type,r={traffic_channel:"destination_page",departure_city_dest_id:"DEST"===this.currentPage?this.departureCityDestId:"",destination_city_desc_id:"DEST"===this.currentPage?this.destinationCityDestId:""},t.next=10,this.$axios.$get(rs(t7.ptpSearchForm,{productType:this.productType}),{params:r});case 10:(o=t.sent).success&&o.result&&(this.origin=o.result),this.loading=!1,this.initForm(),this.getTagResult();case 15:t.next=19;break;case 17:t.prev=17,t.t0=t.catch(1);case 19:case"end":return t.stop()}},t,this,[[1,17]])}))}},{key:"initPassengers",value:function(){var e;return null===(e=this.origin.passenger_types)||void 0===e?void 0:e.filter(function(e){return"adult"===e.value}).map(function(e){var t=[];return(null==e?void 0:e.show_range_info)&&t.push(void 0),{count:1,passenger_type:e.value,name:e.name,ages:t}})}},{key:"getDate",value:function(e,t){try{if(!e||!this.origin||!this.language||!this.$t)return"";!this.origin.show_time_input&&(t="");var n=this.language||"en";return function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5?arguments[5]:void 0,s=a||{},c=s.isMeridiem,l=s.isOldType,u=e;eN.locale(l?n:rc[r=n]||r),"string"==typeof u&&(u=new Date(u.replace(/-/g,"/")));var p=t("global.standard.date.format");return 2===o&&(u.getHours()>0||u.getMinutes()>0)&&(p+=l?function(e){var t;switch(rp(e)){case"1":t=" h:mma";break;case"2":t=" h:mm A";break;case"3":t=" A h:mm";break;case"4":t=" HH:mm"}return t}(n):" HH:mm"),3===o&&(p=t("global.standard.date.format_hide_year")),4===o&&(p=ru(n)),5===o&&(p+=" ".concat(ru(n))),6===o&&(p=t("global.standard.date.format")),i&&/d+/.test(i)&&(p+=i),c&&function(e,t){"3"===rp(e)&&eN.updateLocale(e,{meridiem:function(e){return e<12?t("14311"):t("15935")}})}(n,t),6===o&&(u.getHours()>=0||u.getMinutes()>=0)&&(p+=" HH:mm"),eN(u).format(p)}(e,this.$t.bind(this),n,1)+(t?", ".concat(t):"")}catch(e){}}},{key:"openStation",value:function(e){this.showStation=!0,this.stationType=e;try{this.$refs.search.initLocation()}catch(e){}}},{key:"removeHistory",value:function(){this.ptpHistory={from:[],to:[]},localStorage.setItem(this.historyList,JSON.stringify(this.ptpHistory)),localStorage.setItem(this.historyForm,"")}},{key:"removeFullHistory",value:function(){this.ptpFullHistory=[],localStorage.setItem(this.fullHistoryStorageItem,JSON.stringify(this.ptpFullHistory))}},{key:"addFullHistory",value:function(){var e=Object.assign({},this.form),t=[e],n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rd(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(this.ptpFullHistory);try{for(r.s();!(n=r.n()).done;){var o=n.value;!(e.from.name===o.from.name&&e.to.name===o.to.name)&&t.length<6&&t.push(o)}}catch(e){r.e(e)}finally{r.f()}this.ptpFullHistory=t,localStorage.setItem(this.fullHistoryStorageItem,JSON.stringify(t))}},{key:"addHistory",value:function(){var e=this;if(Object.keys(this.ptpHistory).forEach(function(t){var n=e.ptpHistory[t].findIndex(function(n){return n.ruid===e.form[t].ruid});if(n>-1){var r=e.ptpHistory[t][n];e.ptpHistory[t].splice(n,1),e.ptpHistory[t].unshift(r)}else e.ptpHistory[t].length>5&&e.ptpHistory[t].pop(),e.ptpHistory[t].unshift(Object.assign({},e.form[t]))}),localStorage.setItem(this.historyList,JSON.stringify(this.ptpHistory)),this.needHistory){var t=Object.assign({},this.form);t.return_date&&(t.return_date=eN(t.return_date).format("YYYY-MM-DD")),t.departure_date=eN(t.departure_date).format("YYYY-MM-DD"),localStorage.setItem(this.historyForm,JSON.stringify(t))}}},{key:"selectFullStation",value:function(e){var t=e.from,n=e.to;this.form.from=Object.assign({},t),this.form.to=Object.assign({},n)}},{key:"getTagResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.productType;return M(this,void 0,void 0,B.mark(function t(){var n,r,o,i,a,s,c;return B.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="DEST"===this.currentPage?"destination_page":void 0,t.next=3,this.$axios.$get("".concat(t7.ptpTagResult,"?product_type=").concat(e,"&traffic_channel=").concat(n),{});case 3:(r=t.sent).success&&r.result&&(this.originPtpTagResult=r.result.tag_results||[],i=void 0===(o=r.result.tag_results)?[]:o,a="",s="",c=[],i.forEach(function(e){for(var t,n=e.end_date,r=e.start_date,o=eN(n).diff(eN(r),"day")+1,i=0;i<o;i++)!function(){var o={date:eN(r).add(i,"day").format("YYYY-MM-DD"),tag_name:e.tag_name,icon:e.icon,display_color:e.display_color,end_date:n,start_date:r,priority:e.priority},a=c.findIndex(function(e){return e.date===o.date});-1===a?c.push(o):c[a]=o.priority<(null===(t=c[a])||void 0===t?void 0:t.priority)?o:c[a]}();(!a||eN(a).isBefore(eN(n)))&&(a=n),(!s||eN(s).isAfter(eN(r)))&&(s=r)}),this.ptpTagResult=c);case 5:case"end":return t.stop()}},t,this)}))}},{key:"selectStation",value:function(e){this.form[this.stationType]={name:e.name,ruid:e.ruid,type:e.type,city_name:e.city_name,position_icon:e.position_icon},this.openOtherStation(this.stationType)}},{key:"openOtherStation",value:function(e){var t=this,n={from:"to",to:"from"};(!this.form[n[e]]||!this.form[n[e]].ruid)&&setTimeout(function(){t.stationType=n[e],t.$refs[n[e]]&&t.$refs[n[e]].focus(),t.showStation=!0},400)}},{key:"openDateTime",value:function(e,t){if(this.openModal(e,t),"showReturnDateTime"===e&&"one_way"===this.roundStatus){this.roundStatus="round_trip";var n=eN(this.form.departure_date).add(0|this.origin.return_days_add,"day");n.diff(this.MaxDate,"day")>0?this.form.return_date=this.MaxDate.$d:this.form.return_date=n.$d,this.form.return_time=this.origin.return_time}}},{key:"getFullHistory",value:function(){var e=localStorage.getItem(this.fullHistoryStorageItem);this.ptpFullHistory=e?JSON.parse(e):[]}},{key:"getHistory",value:function(){var e=this,t=localStorage.getItem(this.historyList);if(this.ptpHistory=Object.assign({from:[],to:[]},t&&JSON.parse(t)||{}),this.needHistory){var n=localStorage.getItem(this.historyForm);if(n){var r=JSON.parse(n);r.passengers&&(r.passengers=(r.passengers||[]).filter(function(t){var n=e.origin.passenger_types;return(void 0===n?[]:n).map(function(e){return e.value}).includes(t.passenger_type)}),r.passengers=r.passengers.map(function(t){var n=e.origin.passenger_types,r=(void 0===n?[]:n).find(function(e){return e.value===t.passenger_type});if(null==r?void 0:r.show_range_info){if(t.ages){var o=null==r?void 0:r.range_info,i=o.age_min,a=o.age_max,s=t.ages.map(function(e){if(!(e<i)&&!(e>a))return e});return Object.assign(Object.assign({},t),{ages:s})}for(var c=[],l=0;l<t.count;l++)c.push(void 0);return Object.assign(Object.assign({},t),{ages:c})}return Object.assign(Object.assign({},t),{ages:[]})}));var o=!0;r.departure_time&&eN("".concat(r.departure_date," ").concat(r.departure_time)).isBefore(eN(Date.now()))?(r.departure_date=this.form.departure_date,r.departure_time=this.form.departure_time,o=!1):0>eN(r.departure_date).diff(eN(),"day")?(r.departure_date=this.form.departure_date,o=!1):r.departure_date=eN(r.departure_date).$d,this.origin.show_return_date_input&&r.return_date&&(o?r.return_date=new Date(r.return_date):r.return_date=eN(r.departure_date).add(this.origin.return_days_add,"day").$d),this.origin.show_return_time_input&&r.return_date&&!r.return_time&&(r.return_time=this.origin.return_time),this.form=Object.assign(this.form,r)}}this.roundStatus=this.round&&this.form.return_date?"round_trip":"one_way"}},{key:"changeTime",value:function(e){var t=t6(e,2),n=t[0],r=t[1];this.form.departure_time=n,this.form.return_time=r}},{key:"changeDate",value:function(e){var t=t6(e,2),n=t[0],r=t[1];this.form.departure_date=n,this.form.return_date=r}},{key:"closeDateTime",value:function(){this.showDepartureDateTime&&(this.showDepartureDateTime=!1),this.showReturnDateTime&&(this.showReturnDateTime=!1)}},{key:"openDate",value:function(){this.round&&"round_trip"===this.roundStatus&&(this.showDepartureDateTime=!1,this.showReturnDateTime=!0)}},{key:"initForm",value:function(){var e,t;this.resetValidator(),this.roundStatus="one_way",this.form={to:{name:this.origin.destination_position_name,ruid:this.origin.destination_position},from:{name:this.origin.origin_position_name,ruid:this.origin.origin_position},departure_date:new Date(this.origin.departure_date),departure_time:this.origin.departure_time,return_date:"",return_time:"",passengers:this.origin.passengers||this.initPassengers()||[],seat_class:this.origin.seat_class||(null===(t=null===(e=this.origin.seat_classes)||void 0===e?void 0:e[0])||void 0===t?void 0:t.value),filter_only:!!this.origin.filter_only},this.round&&this.origin.return_date&&(this.roundStatus="round_trip",this.form.return_date=new Date(this.origin.return_date),this.form.return_time=this.origin.return_time),this.message={from:{required:this.$t("global.select.palceholder"),custom:this.$t("global.select.palceholder")},to:{required:this.$t("global.select.palceholder"),custom:this.$t("global.select.palceholder")},departure_date:{required:this.$t("activity.booking.options.select.date")},departure_time:{required:this.$t("activity.booking.options.select.time")},return_date:{required:this.$t("5100-please-select-return-date"),custom:this.$t(this.origin.max_return_day?"23109-max_return_day":"23110-max_return_day",{numbers:this.origin.max_return_day+1})},return_time:{required:this.$t("activity.booking.options.select.time"),custom:this.$t("19662-return-date-before-departrue-date")},passengers:{required:this.$t("global.select.palceholder")},seat_class:{required:this.$t("global.select.palceholder")},filter_only:{required:this.$t("global.select.palceholder")}}}},{key:"switchStation",value:function(e){e&&e.preventDefault();var t=[this.form.to,this.form.from];this.form.from=t[0],this.form.to=t[1]}},{key:"init",value:function(){this.showStation=!1,this.showPassenger=!1,this.showSeat=!1,this.showDepartureDateTime=!1,this.showReturnDateTime=!1,this.resetValidator()}},{key:"openModal",value:function(e,t){t&&t.stopPropagation(),this.init(),this[e]=!0}},{key:"handleEnterClick",value:function(){var e=this.$refs.station;e.handleClickEnter&&e.handleClickEnter()}},{key:"openForm",value:function(e){this.stationType=e,this.nowRuid=this.form[e].ruid}},{key:"changeFrom",value:function(e,t){this.form[e].name!==t&&(this.form[e]={name:t,ruid:""}),this.stationType=e,this.showResult=!0,this.nowRuid=this.form[e].ruid;try{var n=this.$refs.station;n.initLocation(),n.search(t)}catch(e){}}},{key:"selectPassenger",value:function(e,t){this.form.passengers=this.origin.passenger_types&&this.origin.passenger_types.filter(function(t){return e[t.value]}).map(function(n){var r=[];return(null==n?void 0:n.show_range_info)&&(r=t[n.value].map(function(e){return e.value})),{count:e[n.value],passenger_type:n.value,name:n.name,ages:r}})||[]}},{key:"selectSeatClass",value:function(e){this.form.seat_class=e}},{key:"seatText",get:function(){var e=this,t=this.origin.seat_classes.findIndex(function(t){return t.value===e.form.seat_class});return t>-1?this.origin.seat_classes[t].display_name:""}},{key:"rules",get:function(){var e=this,t={from:{required:this.origin.show_origin_position_input,custom:function(t){return t?t.ruid:!e.origin.show_origin_position_input}},to:{required:this.origin.show_destination_position_input,custom:function(t){return t?t.ruid:!e.origin.show_destination_position_input}},departure_date:{required:this.origin.show_departure_date_input,custom:function(t){return t||!e.origin.show_departure_date_input}},departure_time:{required:this.origin.show_time_input,custom:function(t){return t||!e.origin.show_time_input}},return_date:{required:this.origin.show_return_date_input&&"round_trip"===this.roundStatus},return_time:{required:this.origin.show_return_time_input&&"round_trip"===this.roundStatus},passengers:{required:this.origin.show_passenger_type_input,custom:function(t){return t&&t.length||!e.origin.show_passenger_type_input}},seat_class:{required:this.origin.show_seat_input,custom:function(t){return t||!e.origin.show_seat_input}},filter_only:{required:!1}};return this.origin.show_return_time_input&&"round_trip"===this.roundStatus&&!eN(this.form.departure_date).isBefore(eN(this.form.return_date))&&(t.return_time.custom=function(){var t,n,r,o,i=+(null===(n=null===(t=e.form)||void 0===t?void 0:t.departure_time)||void 0===n?void 0:n.split(":")[0])||0;return(+(null===(o=null===(r=e.form)||void 0===r?void 0:r.return_time)||void 0===o?void 0:o.split(":")[0])||0)>=i}),this.origin.show_return_date_input&&"round_trip"===this.roundStatus&&this.origin.max_return_day>-1&&(t.return_date.custom=function(){return eN(e.form.return_date).diff(e.form.departure_date,"day")<=e.origin.max_return_day}),t}},{key:"check",value:function(e,t,n){var r;for(var o in n){if("required"===o&&n[o]&&(!t||"[object Array]"===Object.prototype.toString.call(t)&&(!t||!t.length)||"[object Object]"===Object.prototype.toString.call(t)&&(!t||"{}"===JSON.stringify(t))))return this.validatorData[e]="required",!1;if("custom"===o&&!(null===(r=n[o])||void 0===r?void 0:r.call(this,t)))return this.validatorData[e]=o,!1}return this.validatorData[e]=null,!0}},{key:"validator",value:function(){for(var e in this.form)this.check(e,this.form[e],this.rules[e])}},{key:"validatePassengerForm",value:function(){var e=this.$refs.passengerPicker;return!e||!e.validateForm||e.validateForm()}},{key:"submit",value:function(){var e=this;if(this.validator(),"desktop"===this.platform&&!this.validatePassengerForm()){setTimeout(function(){e.openModal("showPassenger")},0);return}if(!Object.keys(this.validatorData).some(function(t){return e.validatorData[t]})){var t={date_range_count:this.origin.date_range_count};this.origin.show_origin_position_input&&(t.origin_position_name=this.form.from.name,t.origin_position=this.form.from.ruid),this.origin.show_destination_position_input&&(t.destination_position_name=this.form.to.name,t.destination_position=this.form.to.ruid),this.origin.show_departure_date_input&&(t.departure_date=eN(this.form.departure_date).format("YYYY-MM-DD")),this.origin.show_time_input&&(t.departure_time=this.form.departure_time),this.origin.show_return_date_input&&"round_trip"===this.roundStatus&&(t.return_date=eN(this.form.return_date).format("YYYY-MM-DD")),this.origin.show_return_time_input&&"round_trip"===this.roundStatus&&(t.return_time=this.form.return_time),this.origin.show_passenger_type_input?t.passengers=JSON.stringify(this.form.passengers||[]):t.passengers=JSON.stringify([]),this.origin.show_filter_input&&(t.filter_only=this.form.filter_only),this.origin.show_seat_input&&(t.seat_class=this.form.seat_class,t.seat_type=this.origin.seat_type),this.addHistory(),this.addFullHistory();var n=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&"),r=this.$href("".concat({346:"/rails-32/1012-japan/search",342:"/rails-4/364891-europe/search",397:"/rails-24/1014-taiwan/search",636:"/buses-34/1010-south-korea/search",344:"/rails-35/1020-mainland-china/search"}[this.leafCategoryId],"?").concat(n,"&isExternal=1"));console.log("jolon href",r),"mobile"===this.platform?window.location.href=r:window.open(r,"_blank")}}}]),o}(_.Vue);I([(0,_.Prop)({type:String,default:"mobile"})],rf.prototype,"platform",void 0),I([(0,_.Prop)({type:Number,required:!0,default:36})],rf.prototype,"leafCategoryId",void 0),I([(0,_.Prop)({type:String,default:"DEST"})],rf.prototype,"currentPage",void 0),I([(0,_.Prop)({type:String,default:""})],rf.prototype,"departureCityDestId",void 0),I([(0,_.Prop)({type:String,default:""})],rf.prototype,"destinationCityDestId",void 0),I([(0,_.Watch)("leafCategoryId")],rf.prototype,"leafCategoryIdChange",null);var rh=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.emitTimer=null,e.innerValue=e.value,e.inputName="ptp-search-input",e}return T(o,[{key:"handlerInnerValue",value:function(){var e=this;this.emitTimer&&clearTimeout(this.emitTimer),this.emitTimer=setTimeout(function(){e.$emit("update:value",e.innerValue)},300)}},{key:"handlerValue",value:function(){this.innerValue=this.value}},{key:"getInputName",value:function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",n=6;n>0;--n)t+=e[Math.floor(Math.random()*e.length)];this.inputName="ptp-search-input-".concat(t,"-").concat(this.productType)}},{key:"clickIcon",value:function(e){e&&e.stopPropagation(),this.$emit("click-icon")}},{key:"focus",value:function(){this.getInputName(),this.input.focus(),!this.readonly&&this.input.select(),this.$emit("open",this.value)}},{key:"galileoClick1",get:function(){return{spm:"WebClick_781",autoTrackSpm:!0}}}]),o}(_.Vue);I([(0,_.Prop)({required:!1,type:String,default:""})],rh.prototype,"value",void 0),I([(0,_.Prop)({required:!0,type:String,default:"标题"})],rh.prototype,"name",void 0),I([(0,_.Prop)({required:!1,type:Boolean,default:!1})],rh.prototype,"disabled",void 0),I([(0,_.Prop)({required:!1,type:String,default:""})],rh.prototype,"message",void 0),I([(0,_.Prop)({required:!1,type:String,default:""})],rh.prototype,"placeholder",void 0),I([(0,_.Prop)({required:!1,type:Boolean,default:!1})],rh.prototype,"after",void 0),I([(0,_.Prop)({required:!1,type:Boolean,default:!1})],rh.prototype,"active",void 0),I([(0,_.Prop)({required:!1,type:String,default:""})],rh.prototype,"iconName",void 0),I([(0,_.Prop)({required:!1,type:Boolean,default:!1})],rh.prototype,"readonly",void 0),I([(0,_.Prop)({required:!1,type:Boolean,default:!0})],rh.prototype,"withspm",void 0),I([(0,_.Prop)({required:!1,type:Boolean,default:!1})],rh.prototype,"showIcon",void 0),I([(0,_.Prop)({type:String,default:""})],rh.prototype,"productType",void 0),I([(0,_.Ref)("input")],rh.prototype,"input",void 0),I([(0,_.Watch)("innerValue")],rh.prototype,"handlerInnerValue",null),I([(0,_.Watch)("value")],rh.prototype,"handlerValue",null);var rm=rh=I([_.Component],rh);let rv="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function ry(e){return(e,t)=>(function(e,t){let n=rv?t.media||"default":e,o=r_[n]||(r_[n]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),!o.element&&(o.element=document.createElement("style"),o.element.type="text/css",t.media&&o.element.setAttribute("media",t.media),void 0===r&&(r=document.head||document.getElementsByTagName("head")[0]),r.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(n),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{let e=o.ids.size-1,t=document.createTextNode(n),r=o.element.childNodes;r[e]&&o.element.removeChild(r[e]),r.length?o.element.insertBefore(t,r[e]):o.element.appendChild(t)}}})(e,t)}let r_={},rg=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("klk-poptip",{attrs:{placement:"bottom-start",value:!!e.message,trigger:"none",content:e.message,dark:""}},[n("div",{ref:"editInput",class:[e.$style.edit_input,e.after&&e.$style.after,e.$style.active]},[e.iconName&&e.showIcon?n("SvgIcon",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],class:e.$style.svg,attrs:{"data-spm-module":"Clean_ReturnDate?trg=manual","data-spm-virtual-item":"__virtual",width:"16",height:"16",name:e.iconName},nativeOn:{click:function(t){return e.clickIcon(t)}}}):e._e(),e._v(" "),n("div",{class:e.$style.title},[e._v(e._s(e.name))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.innerValue,expression:"innerValue"}],ref:"input",class:[e.$style.input,e.$style.active_input,e.active&&e.$style.active],attrs:{name:e.inputName,"auto-complete":"new-text",disabled:e.disabled,readonly:e.readonly,placeholder:e.placeholder},domProps:{value:e.innerValue},on:{focus:e.focus,input:function(t){if(!t.target.composing)e.innerValue=t.target.value}}})],1)])},staticRenderFns:[]},function(e){e&&(e("data-v-5430a06f_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{edit_input:"src-components-search-form-components-desktop-edit_input-2bCu",svg:"src-components-search-form-components-desktop-svg-2L4U",after:"src-components-search-form-components-desktop-after-22pb",input:"src-components-search-form-components-desktop-input-3FYd",title:"src-components-search-form-components-desktop-title-1tJZ",active:"src-components-search-form-components-desktop-active-3Y45",active_input:"src-components-search-form-components-desktop-active_input-23p-"}}))},rm,void 0,!1,void 0,!1,ry,void 0,void 0);var rk=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o)}(_.Vue);I([(0,_.Prop)({required:!1,type:String,default:""})],rk.prototype,"activeRuid",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rk.prototype,"ruid",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rk.prototype,"name",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rk.prototype,"cityName",void 0),I([(0,_.Prop)({required:!0,type:String,default:"city"})],rk.prototype,"type",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rk.prototype,"url",void 0);var rb=rk=I([(0,_.Component)({})],rk);let rw=A({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:[this.$style.bus_station,this.ruid===this.activeRuid&&this.$style.active]},[t("div",{class:this.$style.left},[t("img",{class:this.$style.icon,attrs:{src:this.url||"https://res.klook.com/image/upload/v1599204793/rail_ptp/station/destination.svg",width:"14",height:"14"}})]),this._v(" "),t("div",{class:this.$style.right},[this.name?t("div",{class:[this.$style.title,this.$style.title_overflow]},[this._v(this._s(this.name))]):this._e(),this._v(" "),this.cityName?t("div",{class:[this.$style.subTitle,this.$style.title_overflow]},[this._v(this._s(this.cityName))]):this._e()])])},staticRenderFns:[]},function(e){e&&(e("data-v-27949f86_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{bus_station:"src-components-search-form-components-desktop-bus_station-2Wf9",left:"src-components-search-form-components-desktop-left-1DSI",right:"src-components-search-form-components-desktop-right-iDUS",title:"src-components-search-form-components-desktop-title-3xjr",subTitle:"src-components-search-form-components-desktop-subTitle-1Ui8",title_overflow:"src-components-search-form-components-desktop-title_overflow-23SW"}}))},rb,void 0,!1,void 0,!1,ry,void 0,void 0);var rS=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.keyword="",e.searchResult=[],e.iconMap={},e.popular=[],e.popularPOIList=[],e.displayHeadTips="",e.inHouseObj={to:{popular:"SearchTo_PopularStations_LIST",history:"SearchTo_SearchHistory_LIST",search:"SearchTo_Suggest_LIST",idName:"ToStationId"},from:{popular:"SearchFrom_PopularStations_LIST",history:"SearchFrom_SearchHistory_LIST",search:"SearchFrom_Suggest_LIST",idName:"FromStationId"}},e.historyCount=-1,e.location_btn_status="loading",e.locationResult=null,e.showLocation=!0,e.initLocationSuccess=!1,e.historyHasMore=!0,e.loading=!1,e.relatedStationList=[],e.relatedStationListTitlle="",e.showRelatedStationList=!1,e.showHistoryCount=3,e}return T(o,[{key:"showFullHistory",get:function(){return this.historyCount>0&&this.fullHistory&&this.fullHistory.length>0&&!this.isVerticalLandingPage}},{key:"stationText",get:function(){return"from"===this.stationType?this.$t("92454"):this.$t("ptp_popular_destinations")}},{key:"location_btn_obj",get:function(){return{loading:{icon:"icon_travel_location_fill",color:"#212121",text:this.$t("17938-loading"),handler:function(){}},failed:{icon:"icon_feedback_warning_fill",text:this.$t("loading_failed"),handler:this.initLocation},empty:{icon:"icon_feedback_warning_fill",text:this.$t("19704-empty"),handler:this.initLocation}}}},{key:"showChange",value:function(){var e=this;this.show&&!this.locationResult&&this.initLocation(),this.show&&this.getRelatedStation(),this.show&&setTimeout(function(){return e.updateHistoryHasMore()},500)}},{key:"historyChange",value:function(){var e=this;this.historyHasMore=!1,this.show&&setTimeout(function(){return e.updateHistoryHasMore()},500)}},{key:"productTypeChange",value:function(){this.popularPOIList=[],this.getPopular(),this.fetchSearchConfig(),this.getPopularPoiList()}},{key:"stationTypeChange",value:function(){this.keyword="",this.searchResult=[],this.iconMap={},this.show&&this.getRelatedStation()}},{key:"keywordChange",value:function(e){var t=this;""===e&&this.show&&setTimeout(function(){return t.updateHistoryHasMore()},500)}},{key:"showHistoryMoreBtn",get:function(){return Array.isArray(this.fullHistory)&&this.fullHistory.length>=4&&3===this.showHistoryCount}},{key:"handleShowAllHistory",value:function(){this.showHistoryCount=this.fullHistory.length}},{key:"showAllHisory",value:function(){this.historyHasMore=!1;var e,t=this.$refs.historyContent;if(t){var n=((null===(e=null==t?void 0:t.className)||void 0===e?void 0:e.split(" "))||[]).filter(function(e){return!e.includes("history_content")});t.className=n.join(" ")}}},{key:"updateHistoryHasMore",value:function(){var e=this.$refs.historyContent,t=(null==e?void 0:e.scrollHeight)||0,n=(null==e?void 0:e.clientHeight)||0;this.historyHasMore=t>n}},{key:"openModal",value:function(e){var t,n=null===(t=this.$refs.busStation)||void 0===t?void 0:t.contains(e.target);this.$emit("update:show",n)}},{key:"selectFullStation",value:function(e){this.$emit("select-full",e),this.$emit("update:show",!1)}},{key:"selectStation",value:function(e){this.$emit("select",e),this.$emit("update:show",!1)}},{key:"selectLocation",value:function(e){this.$emit("select",{name:e.name,ruid:e.ruid}),this.$emit("update:show",!1)}},{key:"handleClickEnter",value:function(){if(this.keyword&&this.searchResult&&this.searchResult.length>0){var e={name:this.searchResult[0].name,ruid:this.searchResult[0].ruid};this.selectLocation(e)}}},{key:"search",value:function(e){var t=this;if(this.keyword!==e){if(this.keyword=e,!e){this.searchResult=[];return}this.loading=!0,this.getSearchApi(e).then(function(e){e.success&&(t.loading=!1,t.iconMap=e.result.icons,t.searchResult=(e.result.citys||[]).map(function(e){var t=(e.child||[]).map(function(e){return Object.assign(Object.assign({},e),{city:e.alias||"",name:e.name})});return{ruid:e.ruid,city:e.alias||"",name:e.name,type:e.type,children:t}}))})}}},{key:"getSearchApi",value:function(e){var t,n,r="from"===this.stationType?"destination":"origin",o="from"===this.stationType?null===(t=this.form)||void 0===t?void 0:t.to:null===(n=this.form)||void 0===n?void 0:n.from,i=(null==o?void 0:o.ruid)||"";return this.$axios.$get(rs(t7.ptpStationSearch,{productType:this.productType})+"?keyword=".concat(e,"&traffic_channel=").concat(this.trafficChannel,"&relation_ruid=").concat(i,"&relation_type=").concat(r),{regularUrl:"/v3/reappserv/ptp/{*}/location/search"})}},{key:"getInhouse",value:function(e){var t={};return t[this.inHouseObj[this.stationType].idName]=e,JSON.stringify(t)}},{key:"getPopularPoiList",value:function(){var e,t;return M(this,void 0,void 0,B.mark(function n(){var r,o,i;return B.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="/v1/reappserv/rail/".concat(this.productType,"/route/popularroutes?traffic_channel=").concat(this.trafficChannel),n.prev=1,n.next=4,this.$axios.$get(r,{regularUrl:"/v1/reappserv/rail/{*}/route/popularroutes",timeout:3e4});case 4:(o=n.sent)&&o.success&&o.result&&(i=null===(t=((null===(e=o.result)||void 0===e?void 0:e.routes)||[]).slice(0,4))||void 0===t?void 0:t.map(function(e){return{from:{name:e.display_from_station,ruid:e.from_ruid},to:{name:e.display_to_station,ruid:e.to_ruid}}}),this.popularPOIList=i),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),this.popularPOIList=[];case 11:case"end":return n.stop()}},n,this,[[1,8]])}))}},{key:"getPopular",value:function(){var e=this;this.popular=[],this.$axios.$get("/v1/reappserv/ptp/".concat(this.productType,"/hotposition?traffic_channel=").concat(this.trafficChannel),{regularUrl:"/v1/reappserv/ptp/{*}/hotposition",timeout:3e4}).then(function(t){t.success&&(e.popular=t.result.positions||[])})}},{key:"fetchSearchConfig",value:function(){var e=this;this.$axios.$get(rs(t7.ptpSearchForm,{productType:this.productType}),{params:{traffic_channel:this.trafficChannel},throwError:!0,regularUrl:"/v1/reappserv/ptp/{*}/search/form"}).then(function(t){var n;e.historyCount=null===(n=null==t?void 0:t.result)||void 0===n?void 0:n.history_count})}},{key:"getRelatedStation",value:function(){var e,t,n=this;this.displayHeadTips="";var r="from"===this.stationType?"destination":"origin",o="from"===this.stationType?null===(e=this.form)||void 0===e?void 0:e.to:null===(t=this.form)||void 0===t?void 0:t.from,i=(null==o?void 0:o.ruid)||"",a="/v1/reappserv/ptp/".concat(this.productType,"/allposition?relation_ruid=").concat(i,"&relation_type=").concat(r,"&traffic_channel=").concat(this.trafficChannel);this.$axios.$get(a,{regularUrl:"/v1/reappserv/ptp/{*}/allposition",timeout:3e4}).then(function(e){var t;e.success&&(n.showRelatedStationList=(null===(t=e.result)||void 0===t?void 0:t.list_mode)==="no_index",n.relatedStationList=e.result.positions,n.relatedStationListTitlle=e.result.title||"",n.displayHeadTips=e.result.display_head_tips||"")})}},{key:"selectPopular",value:function(e){this.$emit("select",e),this.$emit("update:show",!1)}},{key:"selectOptionalStation",value:function(e){this.$emit("select",e),this.$emit("update:show",!1)}},{key:"removeHistory",value:function(){this.$emit("remove")}},{key:"removeFullHistory",value:function(){this.$emit("remove-full-history")}},{key:"beforeDestroy",value:function(){window.removeEventListener("click",this.openModal)}},{key:"searchLocation",value:function(e,t){var n=this,r={traffic_channel:this.trafficChannel};e&&t&&(r.lat=e,r.lon=t),this.$axios.$get(rs(t7.ptpStationSearch,{productType:this.productType}),{params:r,regularUrl:"/v3/reappserv/ptp/{*}/location/search"}).then(function(e){var t;if(e.success){n.initLocationSuccess=!0;var r=(null==e?void 0:e.result).is_show_location_city;n.showLocation=void 0===r||r,n.locationResult=null===(t=null==e?void 0:e.result)||void 0===t?void 0:t.location_city,n.location_btn_status=n.locationResult?"success":"empty"}else n.location_btn_status="failed"})}},{key:"initLocation",value:function(){var e=this;if(this.location_btn_status="loading",!Reflect.has(navigator,"geolocation")){this.searchLocation();return}var t=!1;navigator.geolocation.getCurrentPosition(function(n){t=!0,e.searchLocation(n.coords.latitude,n.coords.longitude)},function(){t=!0,e.searchLocation()},{maximumAge:6e4,timeout:5e3,enableHighAccuracy:!1}),setTimeout(function(){!t&&e.searchLocation()},6e3)}},{key:"mounted",value:function(){window.addEventListener("click",this.openModal),this.getPopular(),this.fetchSearchConfig(),this.getPopularPoiList()}},{key:"galileoClick1",get:function(){return{spm:"WebClick_741",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_742",autoTrackSpm:!0}}},{key:"galileoClick3",get:function(){return{spm:"WebClick_743",autoTrackSpm:!0}}},{key:"galileoClick4",get:function(){return{spm:"WebClick_744",autoTrackSpm:!0}}},{key:"galileoClick5",get:function(){return{spm:"WebClick_745",autoTrackSpm:!0}}}]),o}(_.Vue);I([(0,_.Prop)({type:Boolean,default:!1})],rS.prototype,"show",void 0),I([(0,_.Prop)({type:Array,default:function(){return[]}})],rS.prototype,"history",void 0),I([(0,_.Prop)({type:String,default:"",required:!1})],rS.prototype,"nowRuid",void 0),I([(0,_.Prop)({type:String,default:""})],rS.prototype,"productType",void 0),I([(0,_.Prop)({type:String,default:""})],rS.prototype,"stationType",void 0),I([(0,_.Prop)({type:Array,default:function(){return[]}})],rS.prototype,"fullHistory",void 0),I([(0,_.Prop)({type:Object,default:function(){}})],rS.prototype,"form",void 0),I([(0,_.Prop)({type:Boolean,default:!1})],rS.prototype,"isVerticalLandingPage",void 0),I([(0,_.Prop)({type:String,default:"destination_page"})],rS.prototype,"trafficChannel",void 0),I([(0,_.Watch)("show")],rS.prototype,"showChange",null),I([(0,_.Watch)("history",{deep:!0,immediate:!0})],rS.prototype,"historyChange",null),I([(0,_.Watch)("productType")],rS.prototype,"productTypeChange",null),I([(0,_.Watch)("stationType")],rS.prototype,"stationTypeChange",null),I([(0,_.Watch)("keyword")],rS.prototype,"keywordChange",null);var r$=rS=I([(0,_.Component)({components:{StationItem:rw,IconChevronDown:tE}})],rS);let rx=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{ref:"busStation",class:e.$style.station},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.keyword,expression:"!keyword"}],class:e.$style.scroll},[e.displayHeadTips?n("div",{class:e.$style.topTips},[e._v(e._s(e.displayHeadTips))]):e._e(),e._v(" "),e.showLocation&&e.initLocationSuccess?n("div",{class:e.$style.section},[n("div",{class:e.$style.title},[e._v("\n        "+e._s(e.$t("fnb_current_city_title"))+"\n        "),"success"===e.location_btn_status?n("div",{class:e.$style.remove,on:{click:e.initLocation}},[n("SvgIcon",{class:e.$style.icon,attrs:{name:"mobile-ptp#icon-relocate",width:"16",height:"16"}}),e._v("\n          "+e._s(e.$t("17073-relocate"))+"\n        ")],1):e._e()]),e._v(" "),n("div",{class:e.$style.content,staticStyle:{margin:"0 24px 0"}},[e.location_btn_obj[e.location_btn_status]?n("div",{class:e.$style.item_location,on:{click:e.location_btn_obj[e.location_btn_status].handler}},[e.location_btn_obj[e.location_btn_status].icon?n("klk-icon",{class:e.$style.icon,attrs:{color:e.location_btn_obj[e.location_btn_status].color,type:e.location_btn_obj[e.location_btn_status].icon}}):e._e(),e._v("\n          "+e._s(e.location_btn_obj[e.location_btn_status].text)+"\n        ")],1):e._e(),e._v(" "),"success"===e.location_btn_status&&e.locationResult?n("div",{class:e.$style.location_nav},[n("div",{class:e.$style.location_left},[n("klk-icon",{class:e.$style.icon,attrs:{type:"icon_travel_location_fill"}})],1),e._v(" "),n("div",{class:e.$style.location_right},[n("div",{class:[e.$style.location_item,e.$style.location_item_name],on:{click:function(t){return t.stopPropagation(),e.selectLocation(e.locationResult)}}},[e._v(e._s(e.locationResult.name))])])]):e._e()])]):e._e(),e._v(" "),e.showFullHistory?n("div",{class:e.$style.section,staticStyle:{marginBottom:"4px"}},[n("div",{class:e.$style.title},[e._v("\n        "+e._s(e.$t("ptp_search_history"))+"\n        "),n("div",{class:e.$style.remove,on:{click:e.removeFullHistory}},[e._v(e._s(e.$t("15886")))])]),e._v(" "),e._l(e.fullHistory.slice(0,e.showHistoryCount),function(t,r){return n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],key:r,class:e.$style.full_history_item,attrs:{"data-spm-module":""+e.inHouseObj[e.stationType].history,"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.selectFullStation(t)}}},[n("div",{class:e.$style.full_history_item_name},[e._v("\n          "+e._s(t.from.name+" - "+t.to.name)+"\n        ")]),e._v(" "),r<e.fullHistory.length-1?n("div",{class:e.$style.item_border}):e._e()])}),e._v(" "),e.showHistoryMoreBtn?n("div",{class:e.$style.showMore,on:{click:e.handleShowAllHistory}},[n("div",[e._v(e._s(e.$t("48347-showMore")))]),e._v(" "),n("IconChevronDown",{class:e.$style.icon,attrs:{theme:"outline",size:"20",fill:"#2073F9"}})],1):e._e()],2):e._e(),e._v(" "),e.popularPOIList&&e.popularPOIList.length?n("div",{class:e.$style.popularSection},[n("div",{class:e.$style.title},[n("div",[e._v("\n          "+e._s(e.$t("25386"))+"\n        ")]),e._v(" "),n("img",{attrs:{src:"https://res.klook.com/image/upload/v1716966040/UED_new/Transport%20Tickets/%E9%A6%96%E9%A1%B5_2306%28Pre-sale%E4%BC%98%E5%8C%96%29/lab_hot.svg"}})]),e._v(" "),n("div",{class:[e.$style.content,e.$style.double]},e._l(e.popularPOIList,function(t,r){return n("div",{key:r,class:e.$style.full_history_item,attrs:{"data-spm-module":("from"===e.stationType?"SearchFrom":"SearchTo")+".POIPopularRoute_LIST?idx="+r+"&len="+(e.popularPOIList&&e.popularPOIList.length)+"&ext="+JSON.stringify({Origin:t.from.ruid,Destination:t.to.ruid,Type:"from"===e.stationType?"SearchFrom":"SearchTo"})}},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick2,expression:"galileoClick2"}],class:[e.$style.item,e.$style.cusor],attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.selectFullStation(t)}}},[n("div",{class:e.$style.full_history_item_name},[e._v("\n              "+e._s(t.from.name+" - "+t.to.name)+"\n            ")])])])}),0)]):e._e(),e._v(" "),e.showRelatedStationList?n("div",{class:e.$style.section},[n("div",{class:e.$style.title},[e._v(e._s(e.relatedStationListTitlle))]),e._v(" "),e._l(e.relatedStationList,function(t,r){return n("div",{key:r,class:e.$style.optional_station_item,on:{click:function(n){return n.stopPropagation(),e.selectOptionalStation(t)}}},[n("div",{class:e.$style.optional_station_item_content},[n("div",{class:e.$style.optional_station_item_name},[e._v(e._s(t.name))]),e._v(" "),1===t.hot_position?n("div",{class:e.$style.optional_station_item_icon},[e._v(e._s(e.$t("79465-hot")))]):e._e()]),e._v(" "),r<e.relatedStationList.length-1?n("div",{class:e.$style.item_border}):e._e()])})],2):e._e(),e._v(" "),e.popular&&e.popular.length?n("div",{class:e.$style.section},[n("div",{class:e.$style.title},[e._v(e._s(e.stationText))]),e._v(" "),n("div",{class:[e.$style.content,e.$style.double]},e._l(e.popular,function(t){return n("div",{key:t.ruid,attrs:{"data-spm-module":e.inHouseObj[e.stationType].popular+"?ext="+e.getInhouse(t.ruid)}},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick3,expression:"galileoClick3"}],class:[e.$style.item,e.$style.cusor],attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.selectPopular(t)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])])}),0)]):e._e()]),e._v(" "),e.keyword&&e.searchResult.length?n("div",{class:e.$style.scroll},[e.displayHeadTips?n("div",{class:e.$style.topTips},[e._v(e._s(e.displayHeadTips))]):e._e(),e._v(" "),e._l(e.searchResult,function(t){return n("div",{key:t.ruid,attrs:{"data-spm-module":e.inHouseObj[e.stationType].search+"?ext="+e.getInhouse(t.ruid)}},[n("station-item",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick4,expression:"galileoClick4"}],class:e.$style.cusor,attrs:{ruid:t.ruid,name:t.name,"city-name":t.city,type:t.type,"active-ruid":e.nowRuid,url:e.iconMap[t.type],"data-spm-item":"__default"},nativeOn:{click:function(n){return n.stopPropagation(),e.selectStation(t)}}}),e._v(" "),t.children&&t.children.length>0?n("div",{staticStyle:{paddingLeft:"24px"}},e._l(t.children,function(t,r){return n("div",{key:r},[n("station-item",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick5,expression:"galileoClick5"}],class:e.$style.cusor,attrs:{ruid:t.ruid,name:t.name,"city-name":t.city,type:t.type,"active-ruid":e.nowRuid,url:e.iconMap[t.type],"data-spm-item":"__default"},nativeOn:{click:function(n){return n.stopPropagation(),e.selectStation(t)}}})],1)}),0):e._e()],1)})],2):e._e(),e._v(" "),!e.keyword||e.loading||e.searchResult.length?e._e():n("div",{class:e.$style.noresult},[e._v("\n    "+e._s(e.$t("ptp_search_no_results",[e.keyword]))+"\n  ")])]):e._e()},staticRenderFns:[]},function(e){e&&(e("data-v-498a976c_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{cusor:"src-components-search-form-components-desktop-cusor-1fxA",station:"src-components-search-form-components-desktop-station-39GI",scroll:"src-components-search-form-components-desktop-scroll-13MT",history_content:"src-components-search-form-components-desktop-history_content-3Z7R",history_chevron_down_container:"src-components-search-form-components-desktop-history_chevron_down_container-36L8",topTips:"src-components-search-form-components-desktop-topTips-3Ye2",popularSection:"src-components-search-form-components-desktop-popularSection-2H_q",title:"src-components-search-form-components-desktop-title-gn5I",item_border:"src-components-search-form-components-desktop-item_border-3WQc",full_history_item:"src-components-search-form-components-desktop-full_history_item-3bmN",full_history_item_name:"src-components-search-form-components-desktop-full_history_item_name-2SVY",section:"src-components-search-form-components-desktop-section-HpRu",showMore:"src-components-search-form-components-desktop-showMore-XXPO",icon:"src-components-search-form-components-desktop-icon-1qTF",remove:"src-components-search-form-components-desktop-remove-2-YO",optional_station_item:"src-components-search-form-components-desktop-optional_station_item-1iOg",optional_station_item_content:"src-components-search-form-components-desktop-optional_station_item_content-1Xes",optional_station_item_name:"src-components-search-form-components-desktop-optional_station_item_name-2DPY",optional_station_item_icon:"src-components-search-form-components-desktop-optional_station_item_icon-28Bu",content:"src-components-search-form-components-desktop-content-1OYd",item:"src-components-search-form-components-desktop-item-24SW",item_location:"src-components-search-form-components-desktop-item_location-1gYg",double:"src-components-search-form-components-desktop-double-2Vkf",noresult:"src-components-search-form-components-desktop-noresult-1LuU",location_open:"src-components-search-form-components-desktop-location_open-3UE4",location_nav:"src-components-search-form-components-desktop-location_nav-17Y4",location_left:"src-components-search-form-components-desktop-location_left-2RDS",location_right:"src-components-search-form-components-desktop-location_right-3Yrt",location_item:"src-components-search-form-components-desktop-location_item-1IMB",location_item_name:"src-components-search-form-components-desktop-location_item_name-lsU2",distance:"src-components-search-form-components-desktop-distance-32D9"}}))},r$,void 0,!1,void 0,!1,ry,void 0,void 0);var rC=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.selectRangeInfo={},e.selectObj={},e}return T(o,[{key:"showRangeInfo",value:function(e,t){return(null==e?!!void 0:!!e.show_range_info)&&!!(t>0)||!1}},{key:"deleteRangeInfo",value:function(e){this.selectRangeInfo[e]&&this.selectRangeInfo[e].pop()}},{key:"submitToSearchCom",value:function(){this.$emit("input",this.selectObj,this.selectRangeInfo)}},{key:"addRangeInfo",value:function(e){var t=this.passengerTypes.find(function(t){return t.value===e});if(null==t?void 0:t.show_range_info){for(var n=t.range_info,r=[],o=n.age_max,i=n.age_min;o>=i;)r.unshift(o),o--;var a={leftLabel:"".concat(n.display_age_title).concat(this.selectObj[e]),rightLabel:n.select_name,selectMap:r,value:void 0};this.selectRangeInfo[e]?this.selectRangeInfo[e].push(a):this.selectRangeInfo[e]=[a]}}},{key:"initRangeInfo",value:function(){var e=this;this.selectObj={},this.selectRangeInfo={},this.passengers.forEach(function(t){e.$set(e.selectObj,t.passenger_type,t.count);var n=e.passengerTypes.find(function(e){return e.value===t.passenger_type});if((null==n?void 0:n.show_range_info)&&Array.isArray(t.ages)){var r=n.range_info;t.ages.forEach(function(n,o){for(var i="".concat(r.display_age_title).concat(o+1),a=r.select_name,s=[],c=r.age_max,l=r.age_min;c>=l;)s.unshift(c),c--;var u={leftLabel:i,rightLabel:a,selectMap:s,value:n,needVaild:!1};if(!s.includes(u.value)&&(u.value=void 0),e.selectRangeInfo[t.passenger_type]){var p=e.selectRangeInfo[t.passenger_type].findIndex(function(e){return e.leftLabel===i});-1===p?e.selectRangeInfo[t.passenger_type].push(u):e.selectRangeInfo[t.passenger_type][p]=u}else e.selectRangeInfo[t.passenger_type]=[u]})}})}}]),o}(_.Vue);I([(0,_.Prop)({type:Array,default:function(){return[]}})],rC.prototype,"passengers",void 0),I([(0,_.Prop)({type:Array,default:function(){return[]}})],rC.prototype,"passengerTypes",void 0),I([(0,_.Prop)({type:Number,default:0})],rC.prototype,"maxPassengerNum",void 0),I([(0,_.Prop)({required:!1,type:String,default:"MobilityPTP_SearchForm_Passenger"})],rC.prototype,"spmModulePassenger",void 0);var rT=rC=I([(0,_.Component)({})],rC),rP=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o,[{key:"passengerNum",get:function(){var e=0;for(var t in this.selectObj)e+=this.selectObj[t];return e}},{key:"handlerPassenger",value:function(){this.initRangeInfo()}},{key:"validateForm",value:function(){var e=this,t=!0,n=function(n){e.selectRangeInfo[n].forEach(function(r,o){(void 0===r.value||null===r.value||""===r.value)&&(e.selectRangeInfo[n][o].needVaild=!0,t=!1)})};for(var r in this.selectRangeInfo)n(r);return t}},{key:"openModal",value:function(e){var t=this.$refs.ptpPassenger.contains(e.target);t||this.$emit("update:show",t)}},{key:"handlePassengerRangeChange",value:function(e,t,n){var r=this.selectRangeInfo[n.value].findIndex(function(e){return e.leftLabel===t.leftLabel});this.selectRangeInfo[n.value][r].value=e,this.selectRangeInfo[n.value][r].needVaild=!1,this.submitToSearchCom()}},{key:"select",value:function(e,t){if("add"===t&&this.passengerNum<this.maxPassengerNum)this.selectObj[e]?this.$set(this.selectObj,e,++this.selectObj[e]):this.$set(this.selectObj,e,1),this.addRangeInfo(e);else{if("delete"!==t||!(this.selectObj[e]>0))return;this.$set(this.selectObj,e,--this.selectObj[e]),this.deleteRangeInfo(e)}this.submitToSearchCom()}},{key:"mounted",value:function(){this.handlerPassenger(),window.addEventListener("click",this.openModal)}},{key:"beforeDestroy",value:function(){window.removeEventListener("click",this.openModal)}},{key:"galileoClick1",get:function(){return{spm:"WebClick_771",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_772",autoTrackSpm:!0}}}]),o}(rT);I([(0,_.Prop)({type:Boolean,default:!1})],rP.prototype,"show",void 0),I([(0,_.Watch)("passengers")],rP.prototype,"handlerPassenger",null);var rD=rP=I([(0,_.Component)({})],rP);let rR=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"ptpPassenger",class:e.$style.ptp_proper},[n("div",{class:e.$style.proper_scroll},[n("div",{class:e.$style.passenger,attrs:{"data-spm-module":"SearchNumPassenger?trg=manual"}},[n("div",{class:e.$style.passenger_tips},[n("SvgIcon",{class:e.$style.svg,attrs:{name:"desktop-ptp#icon-warn-solid",width:"14",height:"14"}}),e._v("\n        "+e._s(e.$t("13988-selecte_max",{numbers:e.maxPassengerNum}))+"\n      ")],1),e._v(" "),e._l(e.passengerTypes,function(t,r){return n("div",{key:t.name},[n("div",{class:e.$style.passenger_item},[n("div",{class:e.$style.item_left,staticStyle:{position:"relative"}},[n("div",{class:e.$style.passenger_type},[e._v("\n              "+e._s(t.name)+"\n              "),t.range_info&&t.range_info.display_youth_desc?n("klk-poptip",{attrs:{content:t.range_info.display_youth_desc,placement:"top","append-to-body":"","z-index":"1000",dark:""}},[n("klk-icon",{staticStyle:{"vertical-align":"middle"},attrs:{type:"icon_tips_tips_xs",size:"16"}})],1):e._e()],1),e._v(" "),n("div",{class:e.$style.passenger_age},[e._v(e._s(t.age_range))]),e._v(" "),n("a",{attrs:{href:t.link_url,target:"_blank"}},[n("div",{class:e.$style.passenger_policy},[e._v(e._s(t.link_name))])])]),e._v(" "),n("div",{class:e.$style.item_right},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],class:[e.$style.passenger_action,e.$style.passenger_delete,0>=(e.selectObj[t.value]||0)&&e.$style.disabled],attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.select(t.value,"delete")}}}),e._v(" "),n("div",{class:e.$style.passenger_num},[e._v(e._s(e.selectObj[t.value]||0))]),e._v(" "),n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick2,expression:"galileoClick2"}],class:[e.$style.passenger_action,e.$style.passenger_add,e.passengerNum>=e.maxPassengerNum&&e.$style.disabled],attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.select(t.value,"add")}}})])]),e._v(" "),e.showRangeInfo(t,e.selectObj[t.value])?n("div",{class:e.$style.passenger_item_rangeInfo},[n("div",e._l(e.selectRangeInfo[t.value]||[],function(o,i){return n("div",{key:o.leftLabel,staticClass:"ptp_passenger_picker",class:[e.$style.passenger_item_rangeInfo_item]},[n("div",{class:e.$style.passenger_item_rangeInfo_item_left},[e._v("\n                "+e._s(o.leftLabel)+"\n              ")]),e._v(" "),n("klk-select",{class:[e.$style.passenger_item_rangeInfo_item_right,o.needVaild&&"ptp_passenger_picker_error"],attrs:{"style-type":"filled",placement:"top",placeholder:o.rightLabel,value:o.value,"max-height":70*(r+1)+60*(i+1)},on:{change:function(n){return e.handlePassengerRangeChange(n,o,t)}}},e._l(o.selectMap,function(e,t){return n("klk-option",{key:t,attrs:{value:e,label:e}})}),1)],1)}),0)]):e._e()])})],2)])])},staticRenderFns:[]},function(e){e&&(e("data-v-2f34c1ac_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{ptp_proper:"src-components-search-form-components-desktop-ptp_proper-HB5l",proper_scroll:"src-components-search-form-components-desktop-proper_scroll-3ln3",passenger:"src-components-search-form-components-desktop-passenger-Ekw2",passenger_tips:"src-components-search-form-components-desktop-passenger_tips-myYG",svg:"src-components-search-form-components-desktop-svg-8geD",passenger_item:"src-components-search-form-components-desktop-passenger_item-2fJU",passenger_item_rangeInfo:"src-components-search-form-components-desktop-passenger_item_rangeInfo-1Ov0",passenger_item_rangeInfo_item:"src-components-search-form-components-desktop-passenger_item_rangeInfo_item-3VOb",passenger_item_rangeInfo_item_error:"src-components-search-form-components-desktop-passenger_item_rangeInfo_item_error-MjUL","klk-select":"src-components-search-form-components-desktop-klk-select-poUZ","klk-select-reference":"src-components-search-form-components-desktop-klk-select-reference-2Uoy",passenger_item_rangeInfo_item_left:"src-components-search-form-components-desktop-passenger_item_rangeInfo_item_left-3FOE",passenger_item_rangeInfo_item_right:"src-components-search-form-components-desktop-passenger_item_rangeInfo_item_right-10pg",item_left:"src-components-search-form-components-desktop-item_left-1Kuw",passenger_type:"src-components-search-form-components-desktop-passenger_type-1_QI",passenger_age:"src-components-search-form-components-desktop-passenger_age-3EOp",passenger_policy:"src-components-search-form-components-desktop-passenger_policy-3JhP",item_right:"src-components-search-form-components-desktop-item_right-2aT1",passenger_action:"src-components-search-form-components-desktop-passenger_action-3h6S",disabled:"src-components-search-form-components-desktop-disabled-2189",passenger_add:"src-components-search-form-components-desktop-passenger_add-1IVg",passenger_delete:"src-components-search-form-components-desktop-passenger_delete-2SIA",passenger_num:"src-components-search-form-components-desktop-passenger_num-m0cG"}}),e("data-v-2f34c1ac_1",{source:"",map:void 0,media:void 0}))},rD,"data-v-2f34c1ac",!1,void 0,!1,ry,void 0,void 0);var rO=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o,[{key:"openModal",value:function(e){var t=this.$refs.ptpPassenger.contains(e.target);t||this.$emit("update:show",t)}},{key:"select",value:function(e){this.$emit("input",e),this.$emit("update:show",!1)}},{key:"mounted",value:function(){window.addEventListener("click",this.openModal)}},{key:"beforeDestroy",value:function(){window.removeEventListener("click",this.openModal)}}]),o}(_.Vue);I([(0,_.Prop)({type:Boolean,default:!1})],rO.prototype,"show",void 0),I([(0,_.Prop)({type:Array,default:function(){return[]}})],rO.prototype,"seatClasses",void 0),I([(0,_.Prop)({type:String,default:""})],rO.prototype,"value",void 0),I([(0,_.Prop)({type:String,default:""})],rO.prototype,"seatUrl",void 0);var rj=rO=I([_.Component],rO);let rI=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"ptpPassenger",staticClass:"ptp_seat_type",class:e.$style.ptp_proper},[n("div",{class:e.$style.proper_scroll},[n("div",{class:e.$style.passenger,attrs:{"data-spm-module":"SearchNumPassenger?trg=manual"}},e._l(e.seatClasses,function(t,r){return n("div",{key:r,class:[e.$style.passenger_item,t.value===e.value?e.$style.active:""],on:{click:function(n){return e.select(t.value)}}},[n("div",[e._v("\n            "+e._s(t.display_name)+"\n            "),t.seat_class_info?n("klk-poptip",{attrs:{content:t.seat_class_info,placement:"top","append-to-body":"","z-index":"1000",dark:""}},[n("klk-icon",{staticStyle:{"vertical-align":"middle"},attrs:{type:"icon_tips_tips_xs",size:"16"}})],1):e._e()],1),e._v(" "),n("SvgIcon",{directives:[{name:"show",rawName:"v-show",value:t.value===e.value,expression:"item.value === value"}],class:e.$style.icon,attrs:{name:"mobile-ptp#icon-selected",width:"24",height:"24"}})],1)}),0)])])])},staticRenderFns:[]},function(e){e&&(e("data-v-5c9d07e8_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{ptp_proper:"src-components-search-form-components-desktop-ptp_proper-2P_k",proper_scroll:"src-components-search-form-components-desktop-proper_scroll-WNH1",policy:"src-components-search-form-components-desktop-policy-1gaZ",svg:"src-components-search-form-components-desktop-svg-tv_p",passenger:"src-components-search-form-components-desktop-passenger-eeNI",passenger_item:"src-components-search-form-components-desktop-passenger_item-1l1j",active:"src-components-search-form-components-desktop-active-3HOb"}}))},rj,void 0,!1,void 0,!1,ry,void 0,void 0);var rM=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.tagTipsArr=[],e.timer=null,e.lastDate=null,e.showDate=!0,e}return T(o,[{key:"minDate",get:function(){return(this.dateNow?eN(this.dateNow):eN()).add(this.dateRangeCountMin,"day").$d}},{key:"MaxDate",get:function(){return(this.dateNow?eN(this.dateNow):eN()).add(this.DateRangeCount,"day").$d}},{key:"dateType",get:function(){return this.round?"date-range":"date"}},{key:"date",get:function(){return this.round?[this.dateDeparture,this.dateReturn]:this.dateDeparture}},{key:"timeList",get:function(){for(var e=[],t=0;t<=23;t++){if(t<10){e.push("0".concat(t,":00"));continue}e.push("".concat(t,":00"))}return e}},{key:"changeTime",value:function(e,t){var n=[this.timeDeparture,this.timeReturn];n[e]=t,this.$emit("change-time",n),(!this.round||this.dateDeparture&&this.dateReturn)&&this.$emit("close")}},{key:"disabledDates",value:function(e){if("departure"===this.type)return!1;var t=e.getTime()<this.dateDeparture.getTime();if(-1===this.MaxReturnDay)return t;var n=eN(this.dateDeparture).add(this.MaxReturnDay,"day").valueOf(),r=e.getTime()>n;return t||r}},{key:"getCurrentTipsName",value:function(e){var t=e.end_date,n=e.start_date,r=eN(t),o=eN(n);return o.isSame(r,"day")?"".concat(r.format("MM.DD")," ").concat(e.tag_name):"".concat(o.format("MM.DD")," - ").concat(r.format("MM.DD")," ").concat(e.tag_name)}},{key:"currentTag",value:function(e){var t=this.ptpTagResult.find(function(t){return eN(t.date).isSame(eN(e),"day")});return tL(t)?void 0:t}},{key:"sendDateTimeSpm",value:function(){var e=this.$refs.innerDatePicker,t={DepartureDateTime:eN(this.dateDeparture).format("YYYY-MM-DD")+(this.timeDeparture?" ".concat(this.timeDeparture):""),ReturnDateTime:(this.dateReturn?eN(this.dateReturn).format("YYYY-MM-DD"):"")+(this.timeReturn?" ".concat(this.timeReturn):"")};this.$inhouse.updateBinding(e,{ext:JSON.stringify(t)}),this.$inhouse.track("action",e)}},{key:"sendDate",value:function(e){var t=this;this.$emit("change-date",e);var n=!e.some(function(e){return!e});(!this.round||n)&&this.$nextTick(function(){t.sendDateTimeSpm()})}},{key:"selectDate",value:function(e){var t=this;if(this.timer=setTimeout(function(){t.$emit("close")},300),!this.round){this.sendDate([e]);return}if("departure"===this.type){this.lastDate=[this.dateDeparture,this.dateReturn],this.sendDate([e,""]),clearTimeout(this.timer),setTimeout(function(){t.$emit("open-date")},400);return}"return"===this.type&&this.sendDate([this.dateDeparture,e])}},{key:"openModal",value:function(e){if(!this.$refs.busDate.contains(e.target))this.$emit("close")}},{key:"roundChange",value:function(){var e=this;this.showDate=!1,setTimeout(function(){e.showDate=!0},10)}},{key:"tagResultChange",value:function(){var e=this;this.tagTipsArr=[],this.originPtpTagResult&&this.originPtpTagResult.length>0&&this.originPtpTagResult.forEach(function(t){e.tagTipsArr.length<3&&e.tagTipsArr.push(t)})}},{key:"showChange",value:function(){this.show?window.addEventListener("click",this.openModal):window.removeEventListener("click",this.openModal)}},{key:"beforeDestroy",value:function(){window.removeEventListener("click",this.openModal)}},{key:"galileoClick1",get:function(){return{spm:"WebClick_791",autoTrackSpm:!0}}}]),o}(_.Vue);I([(0,_.Prop)({type:Boolean,default:!1})],rM.prototype,"show",void 0),I([(0,_.Prop)({type:[String,Boolean],default:"departrue"})],rM.prototype,"type",void 0),I([(0,_.Prop)({type:Date,default:new Date})],rM.prototype,"dateDeparture",void 0),I([(0,_.Prop)({type:[Date,String],default:function(){return""}})],rM.prototype,"dateReturn",void 0),I([(0,_.Prop)({type:String,default:""})],rM.prototype,"timeDeparture",void 0),I([(0,_.Prop)({type:String,default:""})],rM.prototype,"timeReturn",void 0),I([(0,_.Prop)({type:Boolean,default:!0})],rM.prototype,"showDepartureDate",void 0),I([(0,_.Prop)({type:Boolean,default:!0})],rM.prototype,"showDepartureTime",void 0),I([(0,_.Prop)({type:Boolean,default:!1})],rM.prototype,"showReturnDate",void 0),I([(0,_.Prop)({type:Boolean,default:!1})],rM.prototype,"showReturnTime",void 0),I([(0,_.Prop)({type:Number,default:0})],rM.prototype,"DateRangeCount",void 0),I([(0,_.Prop)({type:Number,default:0})],rM.prototype,"dateRangeCountMin",void 0),I([(0,_.Prop)({type:String,default:""})],rM.prototype,"dateNow",void 0),I([(0,_.Prop)({type:Number,default:0})],rM.prototype,"returnDaysAdd",void 0),I([(0,_.Prop)({type:Boolean,default:!1})],rM.prototype,"round",void 0),I([(0,_.Prop)({type:Number,default:-1})],rM.prototype,"MaxReturnDay",void 0),I([(0,_.Prop)({default:[]})],rM.prototype,"ptpTagResult",void 0),I([(0,_.Prop)({default:[]})],rM.prototype,"originPtpTagResult",void 0),I([(0,_.Watch)("round")],rM.prototype,"roundChange",null),I([(0,_.Watch)("originPtpTagResult",{immediate:!0})],rM.prototype,"tagResultChange",null),I([(0,_.Watch)("show")],rM.prototype,"showChange",null);var rL=rM=I([(0,_.Component)({})],rM);let rN=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showDate?n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"busDate",staticClass:"ptp_date_time_picker",class:e.$style.station,attrs:{"data-spm-module":"SearchDateTime_Confirm "}},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],ref:"innerDatePicker",class:e.$style.inner,attrs:{"data-spm-item":"Confirm?trg=manual"}},[n("div",{class:e.$style.time_nav},[e.showDepartureTime?n("div",{class:e.$style.time_item},[n("klk-select",{attrs:{value:e.timeDeparture,"style-type":"filled",placeholder:""},on:{change:function(t){return e.changeTime(0,t)}}},[n("div",{attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.$t("19556-departure-time")))]),e._v(" "),e._l(e.timeList,function(e){return n("klk-option",{key:e,attrs:{value:e,label:e}})})],2)],1):e._e(),e._v(" "),e.showReturnTime&&e.round?n("div",{class:e.$style.time_item},[n("klk-select",{attrs:{value:e.timeReturn,"style-type":"filled",placeholder:""},on:{change:function(t){return e.changeTime(1,t)}}},[n("div",{attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.$t("19557-return-time")))]),e._v(" "),e._l(e.timeList,function(e){return n("klk-option",{key:e,attrs:{value:e,label:e}})})],2)],1):e._e()]),e._v(" "),n("klk-date-picker",{ref:"datepicker",class:e.$style.date_picker,attrs:{tip:e.$t("car_rental_home_all_local_time"),type:e.dateType,date:e.date,"min-date":e.minDate,"max-date":e.MaxDate,"double-panel":!0,"should-disable-date":e.disabledDates},on:{select:e.selectDate},nativeOn:{click:function(e){return e.stopPropagation()}},scopedSlots:e._u([{key:"date-append",fn:function(t){var r=t.date;return[e.currentTag(r)?n("img",{class:e.$style.tag_icon,attrs:{src:e.currentTag(r).icon}}):e._e()]}}],null,!1,0xf194cf35)},[e.tagTipsArr&&e.tagTipsArr.length>0?n("div",{attrs:{slot:"tip"},slot:"tip"},e._l(e.tagTipsArr,function(t,r){return n("div",{key:r,class:e.$style.tips},[n("img",{class:e.$style.tips_icon,attrs:{src:t.icon}}),e._v(" "),n("div",[e._v(e._s(e.getCurrentTipsName(t)))])])}),0):e._e()])],1)]):e._e()},staticRenderFns:[]},function(e){e&&(e("data-v-1f4a5973_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{station:"src-components-search-form-components-desktop-station-335e",inner:"src-components-search-form-components-desktop-inner-6fEg",tips:"src-components-search-form-components-desktop-tips-2WHV",tips_icon:"src-components-search-form-components-desktop-tips_icon-3veM",tag_icon:"src-components-search-form-components-desktop-tag_icon-3ObI",time_nav:"src-components-search-form-components-desktop-time_nav-2Nlo",time_item:"src-components-search-form-components-desktop-time_item-3TxV"}}))},rL,void 0,!1,void 0,!1,ry,void 0,void 0);var rE=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o,[{key:"created",value:function(){this.initSearchForm()}},{key:"mounted",value:function(){this.getHistory(),this.getFullHistory()}},{key:"galileoClick1",get:function(){return{spm:"WebClick_751",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_752",autoTrackSpm:!0}}},{key:"galileoClick3",get:function(){return{spm:"WebClick_753",autoTrackSpm:!0}}},{key:"galileoClick4",get:function(){return{spm:"WebClick_754",autoTrackSpm:!0}}},{key:"galileoClick5",get:function(){return{spm:"WebClick_755",autoTrackSpm:!0}}},{key:"galileoClick6",get:function(){return{spm:"WebClick_756",autoTrackSpm:!0}}},{key:"galileoClick7",get:function(){return{spm:"WebClick_757",autoTrackSpm:!0}}},{key:"galileoClick8",get:function(){return{spm:"WebClick_758",autoTrackSpm:!0}}},{key:"galileoClick9",get:function(){return{spm:"WebClick_759",autoTrackSpm:!0}}},{key:"galileoClick10",get:function(){return{spm:"WebClick_760",autoTrackSpm:!0}}}]),o}(rf),rA=rE=I([(0,_.Component)({components:{IconChevronDown:tE,IconSwitch:t0,EditInput:rg,Station:rx,PassengerPicker:rR,SeatPicker:rI,DateTimePicker:rN}})],rE);let rH=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.search_form},[e.round?n("div",[n("klk-dropdown",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker:click",value:{spm:"TripSwitch_Btn"},expression:"{\n        spm: 'TripSwitch_Btn',\n      }",arg:"click"}],attrs:{trigger:"click",placement:"bottom",visible:e.showTripModal}},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],ref:"tripTypeItem",class:[e.$style.round_trip],attrs:{"data-spm-module":"TripSwitch_Btn?trg=manual&ext="+encodeURIComponent(JSON.stringify({TripType:e.roundStatus})),"data-spm-virtual-item":"__virtual"},on:{click:function(t){e.showTripModal=!e.showTripModal}}},[n("p",[e._v(e._s(e.roundStatusText))]),e._v(" "),n("IconChevronDown",{attrs:{theme:"outline",size:"16",fill:"#212121"}})],1),e._v(" "),n("div",{class:e.$style.round_dropdown,attrs:{slot:"list"},slot:"list"},[n("div",{class:e.$style.round_dropdown_content},e._l(e.roundArr,function(t,r){return n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick2,expression:"galileoClick2"}],key:r,class:[e.$style.item,t.value===e.roundStatus?e.$style.active:""],attrs:{"data-spm-module":"TripSwitch_Btn?trg=manual&ext="+encodeURIComponent(JSON.stringify({TripType:e.roundStatus})),"data-spm-virtual-item":"__virtual"},on:{click:function(n){return e.roundStatusChange(t.value)}}},[e._v("\n              "+e._s(t.label)+"\n              "),n("img",{directives:[{name:"show",rawName:"v-show",value:t.value===e.roundStatus,expression:"item.value === roundStatus"}],class:e.$style.icon,attrs:{src:"https://res.klook.com/image/upload/e_replace_color:FF5B00,f_png,c_scale,w_50/v1701848639/UED_new/Transport%20Tickets/%E9%A6%96%E9%A1%B5_2306%28Pre-sale%E4%BC%98%E5%8C%96%29/icon_check_outlined.svg"}})])}),0)])])],1):e._e(),e._v(" "),e.loading?[n("klk-skeleton",{class:e.$style.input_container_loading,attrs:{animate:""}},[n("klk-skeleton-block",{class:e.$style.item,attrs:{height:58}}),e._v(" "),n("klk-skeleton-block",{class:e.$style.item,attrs:{height:58}}),e._v(" "),n("klk-skeleton-block",{attrs:{height:58,width:120}})],1)]:n("div",{class:e.$style.input_container},[n("div",{class:e.$style.section,on:{click:function(t){return t.stopPropagation(),e.openModal("showStation",t)}}},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick3,expression:"galileoClick3"}],class:e.$style.bus_change_box,attrs:{"data-spm-module":"SwitchOD_Btn?trg=manual","data-spm-virtual-item":"__virtual"},on:{click:function(t){return t.stopPropagation(),e.switchStation(t)}}},[n("IconSwitch",{class:e.$style.bus_change,attrs:{theme:"outline",size:"16",fill:"#212121"}})],1),e._v(" "),e.origin.show_origin_position_input?n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick4,expression:"galileoClick4"}],ref:"from",class:[e.$style.section_item,e.$style.left_radius],attrs:{placeholder:e.$t("12679-ptp_bus_placeholder"),message:e.message.from[e.validatorData.from],value:e.form.from.name,name:e.$t("ptp_from"),"product-type":e.productType,"data-spm-module":"SearchFrom?trg=manual","data-spm-virtual-item":"__virtual"},on:{open:function(t){return e.openForm("from")},"update:value":function(t){return e.changeFrom("from",t)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterClick(t)}}}):e._e(),e._v(" "),e.origin.show_destination_position_input?n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick5,expression:"galileoClick5"}],ref:"to",class:[e.$style.section_item,e.$style.right_radius],attrs:{placeholder:e.$t("12679-ptp_bus_placeholder"),message:e.message.to[e.validatorData.to],"product-type":e.productType,value:e.form.to.name,name:e.$t("ptp_to"),disabled:e.disabled,after:!0,"data-spm-module":"SearchTo?trg=manual","data-spm-virtual-item":"__virtual"},on:{open:function(t){return e.openForm("to")},"update:value":function(t){return e.changeFrom("to",t)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterClick(t)}}}):e._e(),e._v(" "),n("client-only",[n("station",{ref:"station",class:[e.$style.modal,"to"===e.stationType&&e.$style.modal_to],attrs:{"now-ruid":e.nowRuid,show:e.showStation,history:e.ptpHistory[e.stationType],"full-history":[],"product-type":e.productType,"station-type":e.stationType,"show-result":e.showResult,form:e.form},on:{"update:show":function(t){e.showStation=t},"update:showResult":function(t){e.showResult=t},"update:show-result":function(t){e.showResult=t},remove:function(){return e.removeHistory()},"remove-full-history":function(){return e.removeFullHistory()},select:function(t){return e.selectStation(t)},"select-full":function(t){return e.selectFullStation(t)}}})],1)],1),e._v(" "),n("div",{class:e.$style.section},[e.origin.show_departure_date_input?n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick6,expression:"galileoClick6"}],ref:"departureDateInput",class:[e.$style.section_item,e.$style.left_radius,e.origin.show_return_date_input?"":e.$style.allRadius],attrs:{"product-type":e.productType,message:e.message.departure_date[e.validatorData.departure_date]||e.message.departure_time[e.validatorData.departure_time],readonly:!0,value:e.getDate(e.form.departure_date,e.form.departure_time),name:e.$t("ptp_departure_date"),placeholder:e.$t("15731"),active:e.showDepartureDateTime,"data-spm-module":"SearchDepartureDate?trg=manual","data-spm-virtual-item":"__virtual?trg=manual"},nativeOn:{click:function(t){return e.openDateTime("showDepartureDateTime",t)}}}):e._e(),e._v(" "),e.origin.show_departure_date_input&&e.origin.show_return_date_input?n("div",{class:e.$style.divider}):e._e(),e._v(" "),e.origin.show_return_date_input?n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick7,expression:"galileoClick7"}],ref:"returnDateInput",class:[e.$style.section_item,e.$style.right_radius],attrs:{"product-type":e.productType,message:e.message.return_date[e.validatorData.return_date]||e.message.return_time[e.validatorData.return_time],readonly:!0,value:e.getDate(e.form.return_date,e.form.return_time),name:e.$t("4355-return-date"),placeholder:e.$t("19555-add-return"),active:e.showReturnDateTime,"data-spm-module":"SearchReturnDate?trg=manual","data-spm-virtual-item":"__virtual?trg=manual"},on:{"click-icon":e.clickReturnIcon},nativeOn:{click:function(t){return e.openDateTime("showReturnDateTime",t)}}}):e._e(),e._v(" "),n("client-only",[n("date-time-picker",{class:e.$style.modal,attrs:{"ptp-tag-result":e.ptpTagResult,"origin-ptp-tag-result":e.originPtpTagResult,show:e.showDepartureDateTime||e.showReturnDateTime,"date-range-count":e.origin.date_range_count,"date-range-count-min":e.origin.date_range_count_min,"date-departure":e.form.departure_date,"date-now":e.origin.date_now,"date-return":e.form.return_date,"time-departure":e.form.departure_time,"time-return":e.form.return_time,"show-return-date":e.origin.show_return_date_input,"show-return-time":e.origin.show_return_time_input,"show-departure-date":e.origin.show_departure_date_input,"show-departure-time":e.origin.show_time_input,type:(e.showDepartureDateTime?"departure":"")||(e.showReturnDateTime?"return":"")||"",round:"round_trip"===e.roundStatus,"return-days-add":e.origin.return_days_add,"max-return-day":e.origin.max_return_day},on:{"change-time":function(t){return e.changeTime(t)},"change-date":function(t){return e.changeDate(t)},close:function(){return e.closeDateTime(e.$event)},"open-date":function(){return e.openDate()}}})],1)],1),e._v(" "),e.origin.show_passenger_type_input?n("div",{class:[e.$style.section,e.$style.section_single]},[e.origin.show_passenger_type_input?n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick8,expression:"galileoClick8"}],class:e.$style.section_item,staticStyle:{cursor:"pointer"},attrs:{message:e.message.passengers[e.validatorData.passengers],readonly:!0,value:e.PassengerText,placeholder:e.$t("13053"),special:!0,name:e.$t("4138"),active:e.showPassenger,"data-spm-module":"SearchNumPassenger?trg=manual","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(t){return e.openModal("showPassenger",t)}}}):e._e(),e._v(" "),n("client-only",[n("passenger-picker",{ref:"passengerPicker",class:e.$style.modal,staticStyle:{width:"auto"},attrs:{show:e.showPassenger,"passenger-types":e.origin&&e.origin.passenger_types||[],"max-passenger-num":e.origin.max_passenger_num,passengers:e.form.passengers},on:{"update:show":function(t){e.showPassenger=t},input:function(t,n){return e.selectPassenger(t,n)}}})],1)],1):e._e(),e._v(" "),e.origin.show_seat_input?n("div",{class:[e.$style.section,e.$style.section_single]},[e.origin.show_seat_input?n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick9,expression:"galileoClick9"}],staticClass:"ptp_passenger_picker",class:e.$style.section_item,staticStyle:{cursor:"pointer"},attrs:{message:e.message.seat_class[e.validatorData.seat_class],readonly:!0,value:e.seatText,placeholder:e.$t("13053-please_select_passenger"),special:!0,name:e.$t("117082"),active:e.showSeat,disabled:e.disabled,"data-spm-module":"SearchNumPassenger?trg=manual","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(t){return e.openModal("showSeat",t)}}}):e._e(),e._v(" "),n("client-only",[n("seat-picker",{class:e.$style.modal,staticStyle:{width:"auto"},attrs:{show:e.showSeat,"seat-classes":e.origin.seat_classes,value:e.form.seat_class,"seat-url":e.origin&&e.origin.ticket_policy},on:{"update:show":function(t){e.showSeat=t},input:function(t){return e.selectSeatClass(t)}}})],1)],1):e._e(),e._v(" "),n("klk-button",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick10,expression:"galileoClick10"}],class:e.$style.search_btn,attrs:{type:"primary",disabled:e.disabled,"data-spm-module":e.searchButtonSpm,"data-spm-virtual-item":"__virtual?typ=entry"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("\n        "+e._s(e.$t("ptp_search"))+"\n      ")])],1)],2)},staticRenderFns:[]},function(e){e&&(e("data-v-89c4074c_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{search_form:"src-components-search-form-index-module-city-page-search-search_form-1MzE",round_trip:"src-components-search-form-index-module-city-page-search-round_trip-3feJ",round_dropdown:"src-components-search-form-index-module-city-page-search-round_dropdown-1S6T",item:"src-components-search-form-index-module-city-page-search-item-1Cvd",icon:"src-components-search-form-index-module-city-page-search-icon-2eev",active:"src-components-search-form-index-module-city-page-search-active-3o6i",input_container:"src-components-search-form-index-module-city-page-search-input_container-_5Xd",input_container_loading:"src-components-search-form-index-module-city-page-search-input_container_loading-3ucp",section:"src-components-search-form-index-module-city-page-search-section-3qNV",bus_change_box:"src-components-search-form-index-module-city-page-search-bus_change_box-Gv5d",section_single:"src-components-search-form-index-module-city-page-search-section_single-22sP",divider:"src-components-search-form-index-module-city-page-search-divider-1uez",section_item:"src-components-search-form-index-module-city-page-search-section_item-ws7R",right_radius:"src-components-search-form-index-module-city-page-search-right_radius-1qhE",allRadius:"src-components-search-form-index-module-city-page-search-allRadius-oEsR",left_radius:"src-components-search-form-index-module-city-page-search-left_radius-SonD",modal:"src-components-search-form-index-module-city-page-search-modal-2o0s",modal_to:"src-components-search-form-index-module-city-page-search-modal_to-JqLy",search_btn:"src-components-search-form-index-module-city-page-search-search_btn-1yM1"}}))},rA,void 0,!1,void 0,!1,ry,void 0,void 0);var rB=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o)}(tZ.Vue);I([(0,tZ.Prop)({required:!1,default:""})],rB.prototype,"value",void 0),I([(0,tZ.Prop)({required:!0,default:""})],rB.prototype,"name",void 0),I([(0,tZ.Prop)({required:!1,default:!1})],rB.prototype,"showIcon",void 0),I([(0,tZ.Prop)({required:!1,default:""})],rB.prototype,"placeholder",void 0);var rF=rB=I([tZ.Component],rB);let rW=A({render:function(){var e,t=this.$createElement,n=this._self._c||t;return n("div",{class:this.$style.ptp_edit},[n("div",{class:this.$style.edit_action},[n("div",{class:this.$style.edit_action_tips},[this._v(this._s(this.name))]),this._v(" "),n("div",{class:((e={})[this.$style.edit_action_input]=!0,e[this.$style.placeholder]=!this.value,e)},[this._v("\n      "+this._s(this.value||this.placeholder||this.$t("15731"))+"\n    ")])]),this._v(" "),this.showIcon?n("div",{class:this.$style.edit_icon},[n("SvgIcon",{class:this.$style.svg,attrs:{name:"mobile-ptp#icon-expandmore",width:"24",height:"24"}})],1):this._e()])},staticRenderFns:[]},function(e){e&&(e("data-v-3c516b45_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{ptp_edit:"src-components-search-form-components-mobile-ptp_edit-yJpV",edit_icon:"src-components-search-form-components-mobile-edit_icon-3ghC",edit_action:"src-components-search-form-components-mobile-edit_action-1cuG",edit_action_tips:"src-components-search-form-components-mobile-edit_action_tips-3DI4",edit_action_input:"src-components-search-form-components-mobile-edit_action_input-2dtW",placeholder:"src-components-search-form-components-mobile-placeholder-2-pe"}}))},rF,void 0,!1,void 0,!1,ry,void 0,void 0);var rz=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o)}(_.Vue);I([(0,_.Prop)({required:!1,type:String,default:""})],rz.prototype,"activeRuid",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rz.prototype,"ruid",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rz.prototype,"name",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rz.prototype,"cityName",void 0),I([(0,_.Prop)({required:!0,type:String,default:"city"})],rz.prototype,"type",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],rz.prototype,"url",void 0);var rU=rz=I([(0,_.Component)({})],rz);let rY=A({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:[this.$style.bus_station,this.ruid===this.activeRuid&&this.$style.active]},[t("div",{class:this.$style.left},[t("img",{class:this.$style.icon,attrs:{src:this.url||"https://res.klook.com/image/upload/v1599204793/rail_ptp/station/destination.svg",width:"14",height:"14"}})]),this._v(" "),t("div",{class:this.$style.right},[this.name?t("div",{class:[this.$style.title,this.$style.title_overflow]},[this._v(this._s(this.name))]):this._e(),this._v(" "),this.cityName?t("div",{class:[this.$style.subTitle,this.$style.title_overflow]},[this._v(this._s(this.cityName))]):this._e()])])},staticRenderFns:[]},function(e){e&&(e("data-v-9991949e_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{bus_station:"src-components-search-form-components-mobile-bus_station-1bux",left:"src-components-search-form-components-mobile-left-32pA",right:"src-components-search-form-components-mobile-right-1l-i",title:"src-components-search-form-components-mobile-title-1R4N",subTitle:"src-components-search-form-components-mobile-subTitle-fr-l",title_overflow:"src-components-search-form-components-mobile-title_overflow-3IRb"}}))},rU,void 0,!1,void 0,!1,ry,void 0,void 0);var rV=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.popular=[],e.stations=[],e.result=[],e.innerKeyWord="",e.statusType="",e.stationList=[],e.popularPOIList=[],e.stationListTitlle="",e.showRelatedStationList=!1,e.historyCount=-1,e.displayHeadTips="",e.showHistoryCount=3,e.location_btn_status="loading",e.locationResult=null,e.showLocation=!0,e.iconMap={},e}return T(o,[{key:"showHistoryMoreBtn",get:function(){return Array.isArray(this.fullHistory)&&this.fullHistory.length>=4&&3===this.showHistoryCount}},{key:"stationText",get:function(){return"from"===this.stationType?this.$t("92454"):this.$t("ptp_popular_destinations")}},{key:"showFullHistory",get:function(){return this.historyCount>0&&this.fullHistory&&this.fullHistory.length>0&&!this.isVerticalLandingPage}},{key:"location_btn_obj",get:function(){return{loading:{icon:"icon_travel_location_fill",text:this.$t("17938-loading"),color:"#212121",handler:function(){}},failed:{icon:"icon_feedback_warning_fill",text:this.$t("loading_failed"),handler:this.initLocation},empty:{icon:"icon_feedback_warning_fill",text:this.$t("19704-empty"),handler:this.initLocation}}}},{key:"closeModal",value:function(){this.$emit("update:show",!1)}},{key:"handleShowAllHistory",value:function(){this.showHistoryCount=this.fullHistory.length}},{key:"getPopular",value:function(){var e=this;this.popular=[],this.$axios.$get("/v1/reappserv/ptp/".concat(this.productType,"/hotposition?traffic_channel=").concat(this.trafficChannel),{regularUrl:"/v1/reappserv/ptp/{*}/hotposition",timeout:3e4}).then(function(t){t.success&&(e.popular=t.result.positions||[])})}},{key:"fetchSearchConfig",value:function(){var e=this;this.$axios.$get(rs(t7.ptpSearchForm,{productType:this.productType}),{params:{traffic_channel:this.trafficChannel},throwError:!0,regularUrl:"/v1/reappserv/ptp/{*}/search/form"}).then(function(t){var n;e.historyCount=null===(n=null==t?void 0:t.result)||void 0===n?void 0:n.history_count})}},{key:"getStation",value:function(){var e,t,n=this,r="from"===this.stationType?"destination":"origin",o="from"===this.stationType?null===(e=this.form)||void 0===e?void 0:e.to:null===(t=this.form)||void 0===t?void 0:t.from,i=(null==o?void 0:o.ruid)||"",a="/v1/reappserv/ptp/".concat(this.productType,"/allposition?relation_ruid=").concat(i,"&relation_type=").concat(r,"&traffic_channel=").concat(this.trafficChannel);this.displayHeadTips="",this.$axios.$get(a,{regularUrl:"/v1/reappserv/ptp/{*}/allposition",timeout:3e4}).then(function(e){var t,r;e.success&&(n.showRelatedStationList=(null===(t=e.result)||void 0===t?void 0:t.list_mode)==="no_index",n.stationList=e.result.positions,n.stationListTitlle=e.result.title||"",n.displayHeadTips=(null===(r=e.result)||void 0===r?void 0:r.display_head_tips)||"")})}},{key:"showChange",value:function(){if(!!this.show)this.show&&!this.locationResult&&this.initLocation(),this.innerKeyWord="",this.result=[],this.show&&this.getStation()}},{key:"productTypeChange",value:function(){this.popularPOIList=[],this.getPopular(),this.fetchSearchConfig(),this.getPopularPoiList()}},{key:"search",value:function(e,t){if(!e){this.result=[];return}if(e!==t)clearTimeout(this.timer),this.statusType="loading",this.timer=setTimeout(this.searchStation,1e3)}},{key:"selectFullStation",value:function(e){this.$emit("select-full",e),this.$emit("update:show",!1)}},{key:"selectOptionalStation",value:function(e){this.$emit("select",e),this.$emit("update:show",!1)}},{key:"searchStation",value:function(){var e,t,n=this;this.result=[],this.statusType="loading";var r="from"===this.stationType?"destination":"origin",o="from"===this.stationType?null===(e=this.form)||void 0===e?void 0:e.to:null===(t=this.form)||void 0===t?void 0:t.from,i=(null==o?void 0:o.ruid)||"";this.$axios.$get(rs(t7.ptpStationSearch,{productType:this.productType})+"?keyword=".concat(this.innerKeyWord,"&traffic_channel=").concat(this.trafficChannel,"&relation_ruid=").concat(i,"&relation_type=").concat(r),{regularUrl:"/v3/reappserv/ptp/{*}/location/search"}).then(function(e){if(e.success){if(!e.result||!e.result.citys||!e.result.citys.length){n.statusType="empty";return}n.statusType="",n.iconMap=e.result.icons,n.result=(e.result.citys||[]).map(function(e){var t=(e.child||[]).map(function(e){return Object.assign(Object.assign({},e),{city:e.alias||"",name:e.name})});return{ruid:e.ruid,city:e.alias||"",name:e.name,type:e.type,children:t}})}else n.statusType="failed"}).catch(function(){n.statusType="failed"})}},{key:"selectStation",value:function(e){this.$emit("select",e),this.close()}},{key:"selectLocation",value:function(e){this.$emit("select",{name:e.name,ruid:e.ruid}),this.close()}},{key:"close",value:function(){this.$emit("update:show",!1)}},{key:"clearHistory",value:function(){this.$emit("remove")}},{key:"removeFullHistory",value:function(){this.$emit("remove-full-history")}},{key:"getPopularPoiList",value:function(){var e,t;return M(this,void 0,void 0,B.mark(function n(){var r,o,i;return B.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="/v1/reappserv/rail/".concat(this.productType,"/route/popularroutes?traffic_channel=").concat(this.trafficChannel),n.prev=1,n.next=4,this.$axios.$get(r,{regularUrl:"/v1/reappserv/rail/{*}/route/popularroutes",timeout:3e4});case 4:(o=n.sent)&&o.success&&o.result&&(i=null===(t=((null===(e=o.result)||void 0===e?void 0:e.routes)||[]).slice(0,4))||void 0===t?void 0:t.map(function(e){return{from:{name:e.display_from_station,ruid:e.from_ruid},to:{name:e.display_to_station,ruid:e.to_ruid}}}),this.popularPOIList=i),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),this.popularPOIList=[];case 11:case"end":return n.stop()}},n,this,[[1,8]])}))}},{key:"searchLocation",value:function(e,t){var n=this,r={traffic_channel:this.trafficChannel};e&&t&&(r.lat=e,r.lon=t),this.$axios.$get(rs(t7.ptpStationSearch,{productType:this.productType}),{params:r,regularUrl:"/v3/reappserv/ptp/{*}/location/search"}).then(function(e){var t;if(e.success){var r=(null==e?void 0:e.result).is_show_location_city;n.showLocation=void 0===r||r,n.locationResult=null===(t=null==e?void 0:e.result)||void 0===t?void 0:t.location_city,n.location_btn_status=n.locationResult?"success":"empty"}else n.location_btn_status="failed"})}},{key:"initLocation",value:function(){var e=this;if(this.location_btn_status="loading",!Reflect.has(navigator,"geolocation")){this.searchLocation();return}var t=!1;navigator.geolocation.getCurrentPosition(function(n){t=!0,e.searchLocation(n.coords.latitude,n.coords.longitude)},function(){t=!0,e.searchLocation()},{maximumAge:6e4,timeout:5e3,enableHighAccuracy:!1}),setTimeout(function(){!t&&e.searchLocation()},6e3)}},{key:"mounted",value:function(){this.getPopular(),this.fetchSearchConfig(),this.getPopularPoiList()}},{key:"galileoClick1",get:function(){return{spm:"WebClick_691",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_692",autoTrackSpm:!0}}},{key:"galileoClick3",get:function(){return{spm:"WebClick_693",autoTrackSpm:!0}}},{key:"galileoClick4",get:function(){return{spm:"WebClick_694",autoTrackSpm:!0}}}]),o}(_.Vue);I([(0,_.Prop)({type:Boolean,default:!1})],rV.prototype,"show",void 0),I([(0,_.Prop)({type:String,default:"destination_page"})],rV.prototype,"trafficChannel",void 0),I([(0,_.Prop)({type:Array,default:function(){return[]}})],rV.prototype,"history",void 0),I([(0,_.Prop)({type:String,default:""})],rV.prototype,"searchTitle",void 0),I([(0,_.Prop)({type:String,default:""})],rV.prototype,"productType",void 0),I([(0,_.Prop)({type:String,default:""})],rV.prototype,"stationType",void 0),I([(0,_.Prop)({type:Array,default:function(){return[]}})],rV.prototype,"fullHistory",void 0),I([(0,_.Prop)({type:Object,default:function(){}})],rV.prototype,"form",void 0),I([(0,_.Prop)({type:String,default:""})],rV.prototype,"beCategory",void 0),I([(0,_.Prop)({type:String,default:"",required:!1})],rV.prototype,"nowRuid",void 0),I([(0,_.Prop)({type:Boolean,default:!1})],rV.prototype,"isVerticalLandingPage",void 0),I([(0,_.Watch)("show")],rV.prototype,"showChange",null),I([(0,_.Watch)("productType")],rV.prototype,"productTypeChange",null),I([(0,_.Watch)("innerKeyWord")],rV.prototype,"search",null);var rK=rV=I([(0,_.Component)({components:{StationItem:rY,IconChevronDown:tE}})],rV);let rG=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("klk-modal",{attrs:{"modal-class":"ptp_station_modal",transition:"slide-bottom",fullscreen:"",open:e.show,"show-default-footer":!1,"delay-time":0},on:{close:e.closeModal}},[n("div",{class:e.$style.ptp_search_header,attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"border_bottom",class:e.$style.action},[n("SvgIcon",{class:[e.isAlipayPartner?e.$style.icon_alipay_wl:e.$style.icon],attrs:{name:"mobile-ptp#icon-close",width:"24",height:"24"},nativeOn:{click:function(t){return e.close(t)}}}),e._v(" "),n("span",{class:e.$style.text},[e._v(e._s(e.searchTitle))])],1),e._v(" "),n("div",{class:e.$style.search_input},[n("klk-icon",{class:e.$style.icon,attrs:{type:"icon_edit_search_s"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.innerKeyWord,expression:"innerKeyWord"}],class:e.$style.input,attrs:{name:"ptp-search-station-input",placeholder:e.$t("12679-ptp_bus_placeholder")},domProps:{value:e.innerKeyWord},on:{input:function(t){if(!t.target.composing)e.innerKeyWord=t.target.value}}}),e._v(" "),n("klk-icon",{directives:[{name:"show",rawName:"v-show",value:e.innerKeyWord,expression:"innerKeyWord"}],class:e.$style.icon,attrs:{type:"icon_feedback_failure"},nativeOn:{click:function(t){e.innerKeyWord=""}}})],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.innerKeyWord,expression:"!innerKeyWord"}],class:e.$style.nav},[e.displayHeadTips?n("div",{class:e.$style.headTips},[e._v(e._s(e.displayHeadTips))]):e._e(),e._v(" "),e.showLocation?n("div",{class:e.$style.section},[n("div",{class:e.$style.title},[e._v("\n        "+e._s(e.$t("fnb_current_city_title"))+"\n        "),"success"===e.location_btn_status?n("div",{class:e.$style.locate,on:{click:e.initLocation}},[n("SvgIcon",{class:e.$style.icon,attrs:{name:"mobile-ptp#icon-relocate",width:"16",height:"16"}}),e._v("\n          "+e._s(e.$t("17073-relocate"))+"\n        ")],1):e._e()]),e._v(" "),n("div",{class:e.$style.content,staticStyle:{margin:"0"}},[e.location_btn_obj[e.location_btn_status]?n("klk-button",{class:e.$style.location_btn,attrs:{size:"small",type:"outlined"},on:{click:e.location_btn_obj[e.location_btn_status].handler}},[e.location_btn_obj[e.location_btn_status].icon?n("klk-icon",{class:e.$style.icon,attrs:{color:e.location_btn_obj[e.location_btn_status].color,type:e.location_btn_obj[e.location_btn_status].icon}}):e._e(),e._v("\n          "+e._s(e.location_btn_obj[e.location_btn_status].text)+"\n        ")],1):e._e(),e._v(" "),"success"===e.location_btn_status&&e.locationResult?n("div",{class:e.$style.location_nav},[n("div",{class:e.$style.location_left},[n("klk-icon",{class:e.$style.icon,attrs:{type:"icon_travel_location_fill"}})],1),e._v(" "),n("div",{class:e.$style.location_right},[n("div",{class:[e.$style.location_item,e.$style.location_item_name],on:{click:function(t){return t.stopPropagation(),e.selectLocation(e.locationResult)}}},[e._v(e._s(e.locationResult.name))])])]):e._e()],1)]):e._e(),e._v(" "),e.showFullHistory?n("div",{class:e.$style.section,staticStyle:{marginBottom:"0px"}},[n("div",{class:e.$style.title},[e._v("\n        "+e._s(e.$t("ptp_search_history"))+"\n        "),n("div",{class:e.$style.remove,on:{click:e.removeFullHistory}},[e._v(e._s(e.$t("15886")))])]),e._v(" "),e._l(e.fullHistory.slice(0,e.showHistoryCount),function(t,r){return n("div",{key:r,class:e.$style.full_history_item,on:{click:function(n){return n.stopPropagation(),e.selectFullStation(t)}}},[n("div",{class:e.$style.full_history_item_name},[e._v("\n          "+e._s(t.from.name+" - "+t.to.name)+"\n        ")]),e._v(" "),r<e.fullHistory.length-1?n("div",{class:e.$style.item_border}):e._e()])}),e._v(" "),e.showHistoryMoreBtn?n("div",{class:e.$style.showMore,on:{click:e.handleShowAllHistory}},[n("div",[e._v(e._s(e.$t("48347-showMore")))]),e._v(" "),n("IconChevronDown",{class:e.$style.icon,attrs:{theme:"outline",size:"20",fill:"#2073F9"}})],1):e._e()],2):e._e(),e._v(" "),e.popularPOIList&&e.popularPOIList.length?n("div",{class:e.$style.popularSection},[n("div",{class:e.$style.title},[n("div",[e._v("\n          "+e._s(e.$t("25386"))+"\n        ")]),e._v(" "),n("img",{attrs:{src:e.isAlipayPartner?"https://res.klook.com/image/upload/v1757491116/UED_new/Transport%20Tickets/%E9%A6%96%E9%A1%B5_2306%28Pre-sale%E4%BC%98%E5%8C%96%29/%E6%94%AF%E4%BB%98%E5%AE%9D%E5%90%88%E4%BD%9C%E9%A1%B9%E7%9B%AE/img_icon_hot_ali_2.png":"https://res.klook.com/image/upload/v1716966040/UED_new/Transport%20Tickets/%E9%A6%96%E9%A1%B5_2306%28Pre-sale%E4%BC%98%E5%8C%96%29/lab_hot.svg"}})]),e._v(" "),n("div",{class:[e.$style.content,e.$style.double]},e._l(e.popularPOIList,function(t,r){return n("div",{key:r,class:e.$style.full_history_item,attrs:{"data-spm-module":("from"===e.stationType?"SearchFrom":"SearchTo")+".POIPopularRoute_LIST?idx="+r+"&len="+(e.popularPOIList&&e.popularPOIList.length)+"&ext="+JSON.stringify({Origin:t.from.ruid,Destination:t.to.ruid,Type:"from"===e.stationType?"SearchFrom":"SearchTo"})}},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],class:[e.$style.item,e.$style.cusor],attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.selectFullStation(t)}}},[n("div",{class:e.$style.full_history_item_name},[e._v("\n              "+e._s(t.from.name+" - "+t.to.name)+"\n            ")]),e._v(" "),r<e.popularPOIList.length-1?n("div",{class:e.$style.item_border}):e._e()])])}),0)]):e._e(),e._v(" "),e.stationList&&e.stationList.length&&e.showRelatedStationList?n("div",{class:e.$style.section},[n("div",{class:e.$style.title},[e._v(e._s(e.stationListTitlle))]),e._v(" "),e._l(e.stationList,function(t,r){return n("div",{key:r,class:e.$style.optional_station_item,on:{click:function(n){return n.stopPropagation(),e.selectOptionalStation(t)}}},[n("div",{class:e.$style.optional_station_item_content},[n("div",{class:e.$style.optional_station_item_name},[e._v(e._s(t.name))]),e._v(" "),1===t.hot_position?n("div",{class:e.$style.optional_station_item_icon},[e._v(e._s(e.$t("79465-hot")))]):e._e()]),e._v(" "),r<e.stationList.length-1?n("div",{class:e.$style.item_border}):e._e()])})],2):e._e(),e._v(" "),e.popular&&e.popular.length?n("div",{class:e.$style.section},[n("div",{class:e.$style.title},[e._v(e._s(e.stationText))]),e._v(" "),n("div",{class:e.$style.content},e._l(e.popular,function(t,r){var o;return n("div",{key:t.ruid,attrs:{"data-spm-module":"PopularStations_LIST?idx="+r+"&len="+e.popular.length+"&ext="+JSON.stringify(((o={})["to"===e.stationType?"ToStationId":"FromStationId"]=t.ruid,o))}},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick2,expression:"galileoClick2"}],class:e.$style.item,attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.selectStation(t)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])])}),0)]):e._e(),e._v(" "),e.stationList&&e.stationList.length&&!e.showRelatedStationList?n("div",{class:e.$style.section},[n("div",{class:e.$style.title},[e._v(e._s(e.stationListTitlle))]),e._v(" "),n("div",{class:e.$style.line_content},e._l(e.stationList,function(t){return n("div",{key:t.ruid,class:e.$style.ptp_border,on:{click:function(n){return n.stopPropagation(),e.selectStation(t)}}},[n("div",{class:[e.$style.line_item]},[e._v("\n            "+e._s(t.name)+"\n          ")])])}),0)]):e._e()]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.innerKeyWord&&e.statusType,expression:"innerKeyWord && statusType"}],class:e.$style.loading},[n("klk-loading",{directives:[{name:"show",rawName:"v-show",value:"loading"===e.statusType,expression:"statusType === 'loading'"}]}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"failed"===e.statusType,expression:"statusType === 'failed'"}],class:e.$style.failed},[n("div",{class:e.$style.text},[e._v(e._s(e.$t("47985-failed")))]),e._v(" "),n("div",{class:e.$style.text_desc},[e._v(e._s(e.$t("47986-failed_desc")))]),e._v(" "),n("div",{class:e.$style.btn,on:{click:e.searchStation}},[e._v(e._s(e.$t("47987-refresh")))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"empty"===e.statusType,expression:"statusType === 'empty'"}],class:e.$style.empty},[e._v(e._s(e.$t("ptp_search_no_results",[e.innerKeyWord])))])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.innerKeyWord&&e.result&&e.result.length,expression:"innerKeyWord && result && result.length"}],class:e.$style.result},[e.displayHeadTips?n("div",{class:e.$style.headTips},[e._v(e._s(e.displayHeadTips))]):e._e(),e._v(" "),e._l(e.result,function(t,r){var o;return n("div",{key:t.ruid,class:e.$style.item,attrs:{"data-spm-module":"Suggest_LIST?idx="+r+"&len="+e.result.length+"&ext="+JSON.stringify(((o={})["to"===e.stationType?"ToStationId":"FromStationId"]=t.ruid,o))}},[n("station-item",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick3,expression:"galileoClick3"}],class:e.$style.cusor,attrs:{ruid:t.ruid,name:t.name,"city-name":t.city,type:t.type,"active-ruid":e.nowRuid,url:e.iconMap[t.type],"data-spm-item":"__default"},nativeOn:{click:function(n){return n.stopPropagation(),e.selectStation(t)}}}),e._v(" "),t.children&&t.children.length>0?n("div",{staticStyle:{paddingLeft:"24px"}},e._l(t.children,function(t,r){return n("div",{key:r},[n("station-item",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick4,expression:"galileoClick4"}],class:e.$style.cusor,attrs:{ruid:t.ruid,name:t.name,"city-name":t.city,type:t.type,"active-ruid":e.nowRuid,url:e.iconMap[t.type],"data-spm-item":"__default"},nativeOn:{click:function(n){return n.stopPropagation(),e.selectStation(t)}}})],1)}),0):e._e()],1)})],2)])},staticRenderFns:[]},function(e){e&&(e("data-v-d0d4b5c0_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{ptp_search_header:"src-components-search-form-components-mobile-ptp_search_header-8eWV",action:"src-components-search-form-components-mobile-action-2Qj6",icon:"src-components-search-form-components-mobile-icon-1vzC",icon_alipay_wl:"src-components-search-form-components-mobile-icon_alipay_wl-38nj",text:"src-components-search-form-components-mobile-text-304C",search_input:"src-components-search-form-components-mobile-search_input-2fmw",input:"src-components-search-form-components-mobile-input-1ZeY",ptp_border:"src-components-search-form-components-mobile-ptp_border-1-2W",headTips:"src-components-search-form-components-mobile-headTips-3-nt",nav:"src-components-search-form-components-mobile-nav-1qor",popularSection:"src-components-search-form-components-mobile-popularSection-3MO_",title:"src-components-search-form-components-mobile-title-3vHC",item_border:"src-components-search-form-components-mobile-item_border-2nlk",full_history_item:"src-components-search-form-components-mobile-full_history_item-psUg",full_history_item_name:"src-components-search-form-components-mobile-full_history_item_name-2baJ",section:"src-components-search-form-components-mobile-section-1CYT",showMore:"src-components-search-form-components-mobile-showMore-2Vd9",locate:"src-components-search-form-components-mobile-locate-1VEO",optional_station_item:"src-components-search-form-components-mobile-optional_station_item-271N",optional_station_item_content:"src-components-search-form-components-mobile-optional_station_item_content-1CoW",optional_station_item_name:"src-components-search-form-components-mobile-optional_station_item_name-3GLi",optional_station_item_icon:"src-components-search-form-components-mobile-optional_station_item_icon-1Tm7",content:"src-components-search-form-components-mobile-content-1Jy6",item:"src-components-search-form-components-mobile-item-1Z2d",line_content:"src-components-search-form-components-mobile-line_content-1Svg",line_item:"src-components-search-form-components-mobile-line_item-1Y5W",loading:"src-components-search-form-components-mobile-loading-2oS1",failed:"src-components-search-form-components-mobile-failed-2L1f",text_desc:"src-components-search-form-components-mobile-text_desc-17p9",btn:"src-components-search-form-components-mobile-btn-v41d",empty:"src-components-search-form-components-mobile-empty-3fI9",result:"src-components-search-form-components-mobile-result-1ZfR",result_item:"src-components-search-form-components-mobile-result_item-27Jg",logo:"src-components-search-form-components-mobile-logo-2rUE",name:"src-components-search-form-components-mobile-name-1J1P",name_up:"src-components-search-form-components-mobile-name_up-1rtc",name_down:"src-components-search-form-components-mobile-name_down-1ipC",location_btn:"src-components-search-form-components-mobile-location_btn-2_fE",location_nav:"src-components-search-form-components-mobile-location_nav-2_ts",location_left:"src-components-search-form-components-mobile-location_left-1g_2",location_right:"src-components-search-form-components-mobile-location_right-3oxr",location_item:"src-components-search-form-components-mobile-location_item-T3_s",location_item_name:"src-components-search-form-components-mobile-location_item_name-1DCF",distance:"src-components-search-form-components-mobile-distance-3tlx"}}))},rK,void 0,!1,void 0,!1,ry,void 0,void 0);var rq=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.show=!1,e.showTicketDescModal=!1,e}return T(o,[{key:"select",value:function(e){this.show=!1,this.$emit("update:value",e)}}]),o}(_.Vue);I([(0,_.Prop)({type:Array,default:function(){return[]}})],rq.prototype,"seatClass",void 0),I([(0,_.Prop)({type:String,default:""})],rq.prototype,"value",void 0),I([(0,_.Prop)({type:String,default:""})],rq.prototype,"seatUrl",void 0);var rJ=rq=I([_.Component],rq);let rZ=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("klk-bottom-sheet",{attrs:{visible:e.show,title:e.$t("117082"),"data-spm-module":"SearchNumPassenger_Confirm?trg=manual"},on:{"update:visible":function(t){e.show=t}}},[n("div",{class:e.$style.border}),e._v(" "),n("SvgIcon",{attrs:{slot:"header-left",name:"mobile-ptp#icon-close",width:"24",height:"24"},nativeOn:{click:function(t){e.show=!1}},slot:"header-left"}),e._v(" "),n("div",{ref:"passengerSeatPicker",class:e.$style.passenger,attrs:{"data-spm-module":"SearchNumPassenger?trg=manual"}},e._l(e.seatClass,function(t,r){return n("div",{key:r,class:[t.value===e.value?e.$style.active:"",e.$style.passenger_item],on:{click:function(n){return e.select(t.value)}}},[n("div",[e._v("\n        "+e._s(t.display_name)+"\n        "),t.seat_class_info?n("klk-icon",{staticStyle:{"vertical-align":"middle"},attrs:{type:"icon_tips_tips_xs",size:"16"},on:{click:function(n){n.stopPropagation(),e.$toast({message:t.seat_class_info,duration:3e3},e.$refs.passengerSeatPicker)}}}):e._e()],1),e._v(" "),n("SvgIcon",{directives:[{name:"show",rawName:"v-show",value:t.value===e.value,expression:"item.value === value"}],class:e.$style.icon,attrs:{name:"mobile-ptp#icon-selected",width:"24",height:"24"}})],1)}),0)],1)},staticRenderFns:[]},function(e){e&&(e("data-v-46a5cd34_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{border:"src-components-search-form-components-mobile-border-2kfY",passenger:"src-components-search-form-components-mobile-passenger-1mMa",passenger_item:"src-components-search-form-components-mobile-passenger_item-2KAe",active:"src-components-search-form-components-mobile-active-3sJB",icon:"src-components-search-form-components-mobile-icon-NY95"}}))},rJ,void 0,!1,void 0,!1,ry,void 0,void 0);var rX=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.someRangeInfoNoSelected=!1,e.show=!1,e}return T(o,[{key:"passengerNum",get:function(){var e=0;for(var t in this.selectObj)e+=this.selectObj[t];return e}},{key:"rangeInfoVaild",value:function(){var e=!1;for(var t in this.selectRangeInfo)this.selectRangeInfo[t].forEach(function(t){(void 0===t.value||null===t.value||""===t.value)&&(e=!0)});return e}},{key:"handlerP",value:function(){this.handlerPassenger()}},{key:"handlerShow",value:function(){this.handlerPassenger()}},{key:"handlerPassenger",value:function(){this.initRangeInfo(),this.someRangeInfoNoSelected=this.rangeInfoVaild()}},{key:"select",value:function(e,t){"add"===t&&this.passengerNum<this.maxPassengerNum?(this.selectObj[e]?this.$set(this.selectObj,e,++this.selectObj[e]):this.$set(this.selectObj,e,1),this.addRangeInfo(e)):"delete"===t&&this.selectObj[e]>0&&(this.$set(this.selectObj,e,--this.selectObj[e]),this.deleteRangeInfo(e)),this.someRangeInfoNoSelected=this.rangeInfoVaild()}},{key:"handlePassengerRangeChange",value:function(e,t,n){var r=this.selectRangeInfo[n.value].findIndex(function(e){return e.leftLabel===t.leftLabel});this.selectRangeInfo[n.value][r].value=e,this.selectRangeInfo[n.value][r].needVaild=!1,this.someRangeInfoNoSelected=this.rangeInfoVaild()}},{key:"emit",value:function(){if(!!this.passengerNum&&!this.someRangeInfoNoSelected)this.show=!1,this.submitToSearchCom()}},{key:"mounted",value:function(){this.handlerPassenger()}},{key:"galileoClick1",get:function(){return{spm:"WebClick_711",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_712",autoTrackSpm:!0}}},{key:"galileoClick3",get:function(){return{spm:"WebClick_713",autoTrackSpm:!0}}}]),o}(rT);I([(0,_.Watch)("passengers")],rX.prototype,"handlerP",null),I([(0,_.Watch)("show")],rX.prototype,"handlerShow",null);var rQ=rX=I([(0,_.Component)({})],rX);let r0=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("klk-bottom-sheet",{attrs:{"modal-class":"ptp_passenger_modal",visible:e.show,title:e.$t("13053"),galileo_event_data:{spm:e.spmModulePassenger},"data-spm-module":"SearchNumPassenger_Confirm?trg=manual",transfer:""},on:{"update:visible":function(t){e.show=t}}},[n("span",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],class:[e.$style.confirm,e.passengerNum&&!e.someRangeInfoNoSelected&&e.$style.active],attrs:{slot:"header-right","data-spm-item":"__default"},on:{click:function(t){return t.stopPropagation(),e.emit(t)}},slot:"header-right"},[e._v(e._s(e.$t("global.tips.okTxt")))]),e._v(" "),n("SvgIcon",{attrs:{slot:"header-left",name:"mobile-ptp#icon-close",width:"24",height:"24"},nativeOn:{click:function(t){e.show=!1}},slot:"header-left"}),e._v(" "),n("div",{ref:"passengerPicker",class:e.$style.passenger,attrs:{"data-spm-module":"SearchNumPassenger?trg=manual"}},[n("div",{class:e.$style.passenger_tips},[n("SvgIcon",{class:e.$style.svg,attrs:{name:"desktop-ptp#icon-warn-solid",width:"14",height:"14"}}),e._v("\n      "+e._s(e.$t("13988-selecte_max",{numbers:e.maxPassengerNum}))+"\n    ")],1),e._v(" "),e._l(e.passengerTypes,function(t){return n("div",{key:t.name},[n("div",{class:e.$style.passenger_item},[n("div",{class:e.$style.item_left},[n("div",{class:e.$style.passenger_type},[e._v("\n            "+e._s(t.name)+"\n            "),t.range_info&&t.range_info.display_youth_desc?n("klk-icon",{staticStyle:{"vertical-align":"middle"},attrs:{type:"icon_tips_tips_xs",size:"16"},on:{click:function(n){return e.$toast({message:t.range_info.display_youth_desc,duration:3e3},e.$refs.passengerPicker)}}}):e._e()],1),e._v(" "),n("div",{class:e.$style.passenger_age},[e._v(e._s(t.age_range))]),e._v(" "),n("a",{attrs:{href:t.link_url,target:"_blank"}},[n("div",{class:e.$style.passenger_policy},[e._v(e._s(t.link_name))])])]),e._v(" "),n("div",{class:e.$style.item_right},[n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick2,expression:"galileoClick2"}],class:[e.$style.passenger_action,e.$style.passenger_delete,0>=(e.selectObj[t.value]||0)&&e.$style.disabled],attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.select(t.value,"delete")}}}),e._v(" "),n("div",{class:e.$style.passenger_num},[e._v(e._s(e.selectObj[t.value]||0))]),e._v(" "),n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick3,expression:"galileoClick3"}],class:[e.$style.passenger_action,e.$style.passenger_add,e.passengerNum>=e.maxPassengerNum&&e.$style.disabled],attrs:{"data-spm-item":"__default"},on:{click:function(n){return n.stopPropagation(),e.select(t.value,"add")}}})])]),e._v(" "),e.showRangeInfo(t,e.selectObj[t.value])?n("div",{class:e.$style.passenger_item_rangeInfo},[n("div",e._l(e.selectRangeInfo[t.value]||[],function(r){return n("div",{key:r.leftLabel,staticClass:"ptp_passenger_picker",class:[e.$style.passenger_item_rangeInfo_item]},[n("div",{class:e.$style.passenger_item_rangeInfo_item_left},[e._v("\n              "+e._s(r.leftLabel)+"\n            ")]),e._v(" "),n("klk-select",{class:[e.$style.passenger_item_rangeInfo_item_right],attrs:{"style-type":"filled",placeholder:r.rightLabel,value:r.value,"bottom-sheet":"","bottom-sheet-title":r.rightLabel},on:{change:function(n){return e.handlePassengerRangeChange(n,r,t)}}},e._l(r.selectMap,function(e,t){return n("klk-option",{key:t,attrs:{value:e,label:e}})}),1)],1)}),0)]):e._e()])})],2)],1)},staticRenderFns:[]},function(e){e&&(e("data-v-40bf72ce_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{passenger:"src-components-search-form-components-mobile-passenger-1FyH",passenger_tips:"src-components-search-form-components-mobile-passenger_tips-wCXG",svg:"src-components-search-form-components-mobile-svg-5yLe",passenger_item:"src-components-search-form-components-mobile-passenger_item-3JNH",passenger_item_rangeInfo:"src-components-search-form-components-mobile-passenger_item_rangeInfo-3rMV",passenger_item_rangeInfo_item:"src-components-search-form-components-mobile-passenger_item_rangeInfo_item-2PoL",passenger_item_rangeInfo_item_error:"src-components-search-form-components-mobile-passenger_item_rangeInfo_item_error-2QVd","klk-select":"src-components-search-form-components-mobile-klk-select-1I2i","klk-select-reference":"src-components-search-form-components-mobile-klk-select-reference-2dkM",passenger_item_rangeInfo_item_left:"src-components-search-form-components-mobile-passenger_item_rangeInfo_item_left-2Z1M",passenger_item_rangeInfo_item_right:"src-components-search-form-components-mobile-passenger_item_rangeInfo_item_right-17CN",item_left:"src-components-search-form-components-mobile-item_left-3eWL",passenger_type:"src-components-search-form-components-mobile-passenger_type-14Dj",passenger_age:"src-components-search-form-components-mobile-passenger_age-3VO_",passenger_policy:"src-components-search-form-components-mobile-passenger_policy-3LZo",item_right:"src-components-search-form-components-mobile-item_right-1F1Z",passenger_action:"src-components-search-form-components-mobile-passenger_action-1xaK",disabled:"src-components-search-form-components-mobile-disabled-UPNy",passenger_add:"src-components-search-form-components-mobile-passenger_add-1bYZ",passenger_delete:"src-components-search-form-components-mobile-passenger_delete-3-eG",passenger_num:"src-components-search-form-components-mobile-passenger_num-1_26",confirm:"src-components-search-form-components-mobile-confirm-2cxE",active:"src-components-search-form-components-mobile-active-1mYx"}}),e("data-v-40bf72ce_1",{source:"",map:void 0,media:void 0}))},rQ,"data-v-40bf72ce",!1,void 0,!1,ry,void 0,void 0);var r1=w(function(e){e.exports=function(e){if(Array.isArray(e))return t3(e)},e.exports.__esModule=!0,e.exports.default=e.exports});b(r1);var r2=w(function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports});b(r2);var r3=w(function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports});b(r3);var r4=b(w(function(e){e.exports=function(e){return r1(e)||r2(e)||t4(e)||r3()},e.exports.__esModule=!0,e.exports.default=e.exports}));tX.ZP.use(tQ.Z);var r5=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.value_=e.getNormalizedValue(),e.isOpen=!1,e.focusIndex=-1,e.selectedIndexes=[0,0],e}return T(o,[{key:"labelLocales",get:function(){return[this.$t("19556-departure-time"),this.$t("19557-return-time")]}},{key:"computedValue",get:function(){return this.getNormalizedValue()}},{key:"timeList",get:function(){for(var e=[],t=0;t<=23;t++){if(t<10){e.push("0".concat(t,":00"));continue}e.push("".concat(t,":00"))}return e}},{key:"pickerData",get:function(){return[this.timeList]}},{key:"watchIsOpen",value:function(e){e?(this.value_=this.getNormalizedValue(),this.init()):(this.focusIndex=-1,this.hide()),this.$emit("open-change",e)}},{key:"getNormalizedValue",value:function(){return Array.isArray(this.value)?r4(this.value):[this.value]}},{key:"init",value:function(){var e=this;this.$nextTick(function(){e.resolveIndex(),e.showModal()})}},{key:"resolveIndex",value:function(){var e=this,t=this.timeList.findIndex(function(t){return t===e.value_[e.focusIndex]});this.selectedIndexes[this.focusIndex]=t}},{key:"hide",value:function(){for(var e=0;e<this.pickerData.length;e++)this.wheels[e].disable()}},{key:"showModal",value:function(){var e=this;if(this.wheels)for(var t=0;t<this.pickerData.length;t++)this.wheels[t].enable(),this.wheels[t].wheelTo(this.selectedIndexes[this.focusIndex]);else this.$nextTick(function(){e.wheels=[];for(var t=e.$refs.wheelWrapper,n=0;n<e.pickerData.length;n++)e._createWheel(t,n)})}},{key:"_createWheel",value:function(e,t){var n=this,r=this;return this.wheels[t]?this.wheels[t].refresh():(this.wheels[t]=new tX.ZP(e.children[t],{wheel:{selectedIndex:this.selectedIndexes[this.focusIndex],wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item"},probeType:3}),this.wheels[t].on("scrollEnd",function(){r.value_[r.focusIndex]=r.getWheelValue(),n.$forceUpdate()})),this.wheels[t]}},{key:"getWheelValue",value:function(){var e=this.wheels.map(function(e){return e.getSelectedIndex()});return this.pickerData.map(function(t,n){return t[e[n]]}).join("-")}},{key:"emit",value:function(e){Array.isArray(this.$props.value)?this.$emit("input",this.value_,e):this.$emit("input",this.value_[0],e)}},{key:"clickConfirm",value:function(){this.emit(this.$refs.confirm.$el),this.isOpen=!1}},{key:"clickCancel",value:function(){this.isOpen=!1}},{key:"clickInputBox",value:function(e,t,n){this.focusIndex=t,"inner"===n?this.init():this.isOpen=!0}},{key:"galileoClick1",get:function(){return{spm:"WebClick_681",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_682",autoTrackSpm:!0}}},{key:"galileoClick3",get:function(){return{spm:"WebClick_683",autoTrackSpm:!0}}}]),o}(_.Vue);I([(0,_.Prop)({type:[String,Array],default:"00:00"})],r5.prototype,"value",void 0),I([(0,_.Prop)({type:Object,default:void 0})],r5.prototype,"trackData",void 0),I([(0,_.Watch)("isOpen")],r5.prototype,"watchIsOpen",null);var r6=r5=I([_.Component],r5);let r7=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time-select__wrapper time-select-bar",class:{isOpen:e.isOpen}},[e._l(e.computedValue,function(t,r){var o;return n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],key:r,staticClass:"time-select",class:((o={})["is-inline"]=e.computedValue.length>1,o),attrs:{"data-spm-item":["DepartureTime","ReturnTime"][r]+"?ext="+e.trackData.commonInnerSpmExtra},on:{click:function(n){return n.stopPropagation(),e.clickInputBox(t,r,"outer")}}},[n("div",{staticClass:"time-select__left"},[n("span",{staticClass:"time-select__label"},[e._v(e._s(e.labelLocales[r]))]),e._v(" "),n("span",{staticClass:"time-select__value"},[e._v(e._s(t))])]),e._v(" "),n("span",{staticClass:"time-select__right"},[n("klk-icon",{attrs:{size:"16",type:"icon_navigation_chevron_"+(e.focusIndex===r?"up":"down")}})],1)])}),e._v(" "),n("klk-bottom-sheet",{class:e.$style["bottom-sheet"],attrs:{visible:e.isOpen,"can-pull-close":!1,transfer:""},on:{"update:visible":function(t){e.isOpen=t}}},[n("div",{staticClass:"time-select-bar time-select-bar--inner"},e._l(e.value_,function(t,r){var o;return n("div",{key:r,staticClass:"time-select",class:((o={})["is-inline"]=e.value_.length>1,o["is-focus"]=e.focusIndex===r,o),on:{click:function(n){return n.stopPropagation(),e.clickInputBox(t,r,"inner")}}},[n("div",{staticClass:"time-select__left"},[n("span",{staticClass:"time-select__label"},[e._v(e._s(e.labelLocales[r]))]),e._v(" "),n("span",{staticClass:"time-select__value"},[e._v(e._s(t))])]),e._v(" "),n("span",{staticClass:"time-select__right"},[n("klk-icon",{attrs:{size:"16",type:"icon_navigation_chevron_"+(e.focusIndex===r?"up":"down")}})],1)])}),0),e._v(" "),n("div",{staticClass:"picker-panel",attrs:{"data-spm-module":"SearchTime_Confirm"},on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"picker-content"},[n("div",{staticClass:"mask-top border_bottom_1px"}),e._v(" "),n("div",{staticClass:"mask-bottom border_top_1px"}),e._v(" "),n("div",{ref:"wheelWrapper",staticClass:"wheel-wrapper"},e._l(e.pickerData,function(t,r){return n("div",{key:r,staticClass:"wheel"},[n("ul",{staticClass:"wheel-scroll"},e._l(t,function(t){return n("li",{key:t,staticClass:"wheel-item"},[e._v("\n                "+e._s(t)+"\n              ")])}),0)])}),0)]),e._v(" "),n("div",{staticClass:"picker-footer"})]),e._v(" "),n("div",{staticClass:"time-select__footer"},[n("klk-button",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick2,expression:"galileoClick2"}],attrs:{type:"outlined","data-spm-item":"Cancel_btn"},on:{click:e.clickCancel}},[e._v("\n        "+e._s(e.$t("cancel"))+"\n      ")]),e._v(" "),n("klk-button",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick3,expression:"galileoClick3"}],ref:"confirm",attrs:{"data-spm-item":"Confirm_Btn?trg=manual&ext="+e.trackData.commonInnerSpmExtra},on:{click:e.clickConfirm}},[e._v("\n        "+e._s(e.$t("confirm"))+"\n      ")])],1)])],2)},staticRenderFns:[]},function(e){e&&(e("data-v-9c45067e_0",{source:"",map:void 0,media:void 0}),e("data-v-9c45067e_1",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{"bottom-sheet":"src-components-search-form-components-mobile-bottom-sheet-PTgj"}}),e("data-v-9c45067e_2",{source:"",map:void 0,media:void 0}))},r6,"data-v-9c45067e",!1,void 0,!1,ry,void 0,void 0);var r8=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.date_=null,e.time_="",e.dateRangeSelectComplete=!0,e.dateRangeStart=null,e.dateRangeEnd=null,e.selectOnceDate=null,e.tagTipsArr=[],e.pickerLazyLoad={pickerVisible:!1,timer:null},e}return T(o,[{key:"tagResultChange",value:function(){var e=this;this.originPtpTagResult&&this.originPtpTagResult.length>0?this.originPtpTagResult.forEach(function(t){e.tagTipsArr.length<3&&e.tagTipsArr.push(t)}):this.tagTipsArr=[]}},{key:"created",value:function(){this.date_=this.isRange?[this.dateDeparture,this.dateReturn]:this.dateDeparture,this.time_=this.isRange?[this.timeDeparture,this.timeReturn]:this.timeDeparture,this.isRange&&this.maxReturnDay&&(this.selectOnceDate=eN(this.dateDeparture).add(this.dateRangeCountMin,"day").$d)}},{key:"normalizedDepartureDateTime",value:function(e){var t="inner"===e?this.isRange?this.dateRangeStart||this.date_[0]:this.date_:this.dateDeparture,n="inner"===e?this.isRange?this.time_[0]:this.time_:this.timeDeparture;return{DepartureDateTime:[eN(t).format("YYYY-MM-DD"),n].join(" ").trim()}}},{key:"normalizedReturnDateTime",value:function(e){var t="inner"===e?this.isRange?this.dateRangeEnd||this.date_[1]:void 0:this.dateReturn,n="inner"===e?this.isRange?this.time_[1]:void 0:this.timeReturn;return{ReturnDateTime:t?[eN(t).format("YYYY-MM-DD"),n].join(" ").trim():void 0}}},{key:"commonSpmExtra",get:function(){return encodeURIComponent(JSON.stringify(Object.assign(Object.assign({},this.normalizedDepartureDateTime()),this.normalizedReturnDateTime())))}},{key:"commonInnerSpmExtra",get:function(){return encodeURIComponent(JSON.stringify(Object.assign(Object.assign({},this.normalizedDepartureDateTime("inner")),this.normalizedReturnDateTime("inner"))))}},{key:"isRange",get:function(){return this.type.includes("range")}},{key:"computedDatePickerPropType",get:function(){return this.isRange?"date-range":"date"}},{key:"needConfirm",get:function(){return"date"!==this.type}},{key:"minDate",get:function(){return(this.dateNow?eN(this.dateNow):eN()).add(this.dateRangeCountMin,"day").$d}},{key:"MaxDate",get:function(){var e=this.dateNow?eN(this.dateNow):eN();if(this.maxReturnDay<0)return e.add(this.DateRangeCount,"day").$d;var t=e.add(this.DateRangeCount,"day").$d,n=eN(this.selectOnceDate).add(this.maxReturnDay,"day").$d;return this.dateRangeStart?eN(n).isSame(eN(t))||eN(n).isBefore(eN(t))?n:t:t}},{key:"showDate",get:function(){var e=this.dateReturn;return!e&&(e=eN(this.dateDeparture).add(this.returnDaysAdd,"day").$d),this.isRange?[new Date(this.dateDeparture),new Date(e)]:new Date(this.dateDeparture)}},{key:"canConfirm",get:function(){var e=this.time_;return this.type.includes("time")?this.isRange?this.dateRangeSelectComplete&&e.every(function(e){return e}):!!e:this.dateRangeSelectComplete}},{key:"isSameDay",value:function(e){var t=e.map(function(e){return eN(e).format("YYYY-MM-DD")});return t[0]===t[1]}},{key:"onSelect",value:function(e){var t=this;if(eN(this.dateDeparture||"").isSame(eN(e))&&!this.isRange){this.onDateChange(e);return}!this.dateRangeStart||this.dateRangeStart>e?(this.dateRangeStart=e,this.selectOnceDate=this.maxReturnDay?e:null,this.dateRangeSelectComplete=!1):(this.dateRangeEnd=e,this.selectOnceDate=this.maxReturnDay?eN(this.dateDeparture).add(this.dateRangeCountMin,"day").$d:null,setTimeout(function(){t.dateRangeStart=null},0),this.dateRangeSelectComplete=!0)}},{key:"checkFormValidation",value:function(){var e=this.time_;return!(Array.isArray(e)&&this.isSameDay(this.date_))||r4(e).sort()[0]===e[0]}},{key:"getCurrentTipsName",value:function(e){var t=e.end_date,n=e.start_date,r=eN(t),o=eN(n);return o.isSame(r,"day")?"".concat(r.format("MM.DD")," ").concat(e.tag_name):"".concat(o.format("MM.DD")," - ").concat(r.format("MM.DD")," ").concat(e.tag_name)}},{key:"currentTag",value:function(e){var t=this.ptpTagResult.find(function(t){return eN(t.date).isSame(eN(e),"day")});return tL(t)?void 0:t}},{key:"clickConfirm",value:function(e){return this.checkFormValidation()?Array.isArray(this.date_)&&this.maxReturnDay>-1&&eN(this.date_[0]).add(this.maxReturnDay,"day").isBefore(this.date_[1],"day")?this.$toast(this.$t(this.maxReturnDay?"23109-max_return_day":"23110-max_return_day",{numbers:this.maxReturnDay+1})):void this.emit():this.$toast(this.$t("19662"))}},{key:"emit",value:function(){this.$emit("confirm",this.date_,this.time_)}},{key:"onDateChange",value:function(e){if(this.date_=e,!this.needConfirm)this.emit()}},{key:"onTimeChange",value:function(e){this.time_=e}},{key:"mounted",value:function(){var e=this;this.pickerLazyLoad.timer&&clearTimeout(this.pickerLazyLoad.timer),this.pickerLazyLoad.timer=setTimeout(function(){e.pickerLazyLoad.pickerVisible=!0},0)}},{key:"beforeDestroy",value:function(){this.pickerLazyLoad.timer&&clearTimeout(this.pickerLazyLoad.timer)}},{key:"galileoClick1",get:function(){return{spm:"WebClick_731",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_732",autoTrackSpm:!0}}}]),o}(_.Vue);I([(0,_.Prop)({type:String,default:"date"})],r8.prototype,"type",void 0),I([(0,_.Prop)({type:[Date,String],default:function(){return new Date}})],r8.prototype,"dateDeparture",void 0),I([(0,_.Prop)({type:[Date,String],default:function(){return""}})],r8.prototype,"dateReturn",void 0),I([(0,_.Prop)({type:String,default:function(){return new Date}})],r8.prototype,"timeDeparture",void 0),I([(0,_.Prop)({type:String,default:""})],r8.prototype,"timeReturn",void 0),I([(0,_.Prop)({type:Number,default:0})],r8.prototype,"dateRangeCountMin",void 0),I([(0,_.Prop)({type:Number,default:0})],r8.prototype,"DateRangeCount",void 0),I([(0,_.Prop)({type:Number,default:1})],r8.prototype,"returnDaysAdd",void 0),I([(0,_.Prop)({type:Number,default:-1})],r8.prototype,"maxReturnDay",void 0),I([(0,_.Prop)({required:!0,type:String,default:""})],r8.prototype,"pageModule",void 0),I([(0,_.Prop)({default:function(){return[]}})],r8.prototype,"ptpTagResult",void 0),I([(0,_.Prop)({default:function(){return[]}})],r8.prototype,"originPtpTagResult",void 0),I([(0,_.Prop)({type:String,default:""})],r8.prototype,"dateNow",void 0),I([(0,_.Watch)("originPtpTagResult",{immediate:!0})],r8.prototype,"tagResultChange",null);var r9=r8=I([(0,_.Component)({components:{TimeSelect:r7}})],r8);let oe=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"date-time-picker",attrs:{"data-spm-module":"SearchDateTime_Confirm?ext="+e.commonSpmExtra}},[e.pickerLazyLoad.pickerVisible?n("klk-date-picker",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],staticClass:"date-time-inner data_picker",attrs:{"min-date":e.minDate,tip:e.needConfirm?void 0:e.$t("car_rental_home_all_local_time"),"max-date":e.MaxDate,date:e.showDate,type:e.computedDatePickerPropType,"vertical-scroll":!0,"min-range-gap":0,"data-spm-item":(e.isRange&&e.dateRangeSelectComplete?"ReturnDate":"DepartureDate")+"?trg=manual&ext="+e.commonInnerSpmExtra},on:{change:e.onDateChange,select:e.onSelect},scopedSlots:e._u([{key:"date-append",fn:function(t){var r=t.date;return[e.currentTag(r)?n("img",{staticClass:"tag_icon",attrs:{src:e.currentTag(r).icon}}):e._e()]}}],null,!1,0x66f01430)},[e.tagTipsArr&&e.tagTipsArr.length>0?n("div",{attrs:{slot:"tip"},slot:"tip"},e._l(e.tagTipsArr,function(t,r){return n("div",{key:r,staticClass:"tips"},[n("img",{staticClass:"tips_icon",attrs:{src:t.icon}}),e._v(" "),n("div",[e._v(e._s(e.getCurrentTipsName(t)))])])}),0):e._e()]):n("div",{staticClass:"date-time-loading"},[n("klk-loading")],1),e._v(" "),e.needConfirm?n("div",{staticClass:"top-border-shadow",staticStyle:{padding:"20px 16px"}},[e.type.indexOf("time")>-1?n("time-select",{attrs:{value:e.time_,"track-data":{commonInnerSpmExtra:e.commonInnerSpmExtra}},on:{input:function(t){return e.onTimeChange(t)},"open-change":e.$listeners["time-select-open-change"]}}):e._e(),e._v(" "),n("klk-button",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick2,expression:"galileoClick2"}],staticStyle:{width:"100%"},attrs:{"data-spm-class":"confirm-button","data-spm-item":"Confirm?trg=manual&ext="+e.commonInnerSpmExtra,disabled:!e.canConfirm},nativeOn:{click:function(t){return e.clickConfirm(t)}}},[e._v("\n      "+e._s(e.$t("confirm"))+"\n    ")])],1):e._e()],1)},staticRenderFns:[]},void 0,r9,"data-v-2803c4d8",!1,void 0,!1,void 0,void 0,void 0);var ot=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){var e;return S(this,o),e=r.apply(this,arguments),e.isClickedRangeSelectEntry=!1,e.showDateTimePicker=!1,e.dateTimePickerPullClosable=!0,e}return T(o,[{key:"created",value:function(){this.initSearchForm()}},{key:"mounted",value:function(){this.getHistory(),this.getFullHistory()}},{key:"departureDateInputSpm",get:function(){return"SearchDepartureDateTime?trg=manual&ext="+encodeURIComponent(JSON.stringify({DepartureDateTime:[eN(this.form.departure_date).format("YYYY-MM-DD"),this.form.departure_time].join(" ").trim()}))}},{key:"PassengerText",get:function(){var e="";return this.form.passengers&&this.form.passengers.forEach(function(t,n){e+="".concat(n?", ":"").concat(t.count," * ").concat(t.name)}),e}},{key:"dateTimePickerType",get:function(){return this.origin.show_time_input?this.isClickedRangeSelectEntry?"date-time-range":"date-time":this.isClickedRangeSelectEntry?"date-range":"date"}},{key:"computedDisplayReturnDateTime",get:function(){return this.form.return_date?"round_trip"===this.roundStatus?this.getDate(this.form.return_date,this.form.return_time):"":""}},{key:"clickDateTimeInput",value:function(e){this.isClickedRangeSelectEntry="round_trip"===this.roundStatus||"return"===e,this.showDateTimePicker=!0}},{key:"switchStation",value:function(){var e=[this.form.to,this.form.from];this.form.from=e[0],this.form.to=e[1]}},{key:"handleShowPassenger",value:function(){var e=this.$refs.passengerPicker;e&&(e.show=!0)}},{key:"onDateTimePickerConfirm",value:function(e,t){var n=this;setTimeout(function(){n.isClickedRangeSelectEntry&&(n.isClickedRangeSelectEntry=!1,n.roundStatus="round_trip"),Array.isArray(e)?(n.form.departure_date=e[0],n.form.return_date=e[1]):(n.form.departure_date=e,n.form.return_date=n.calcReturnDateByConfig(e)),t&&Array.isArray(t)?(n.form.departure_time=t[0],n.form.return_time=t[1]):t&&(n.form.departure_time=t),n.showDateTimePicker=!1},0)}},{key:"calcReturnDateByConfig",value:function(e,t){t=t||eN(e).add((this.origin.return_days_add+1||2)-1,"day").$d;var n=eN().add((this.origin.date_range_count+1||2)-1,"day").$d;return n>new Date(t)?t:n}},{key:"galileoClick1",get:function(){return{spm:"WebClick_701",autoTrackSpm:!0}}},{key:"galileoClick2",get:function(){return{spm:"WebClick_702",autoTrackSpm:!0}}},{key:"galileoClick3",get:function(){return{spm:"WebClick_703",autoTrackSpm:!0}}},{key:"galileoClick4",get:function(){return{spm:"WebClick_704",autoTrackSpm:!0}}},{key:"galileoClick5",get:function(){return{spm:"WebClick_705",autoTrackSpm:!0}}},{key:"galileoClick6",get:function(){return{spm:"WebClick_706",autoTrackSpm:!0}}},{key:"galileoClick7",get:function(){return{spm:"WebClick_707",autoTrackSpm:!0}}}]),o}(rf),on=ot=I([(0,_.Component)({components:{EditInput:rW,station:rG,seatPicker:rZ,PassengerPicker:r0,DateTimePicker:oe,IconSwitch:t0}})],ot);let or=A({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?n("div",[n("klk-skeleton",{attrs:{animate:""}},[n("klk-skeleton-block",{attrs:{height:55}}),e._v(" "),n("klk-skeleton-block",{attrs:{height:55}}),e._v(" "),n("klk-skeleton-block",{attrs:{height:55}}),e._v(" "),n("klk-skeleton-block",{attrs:{height:44}})],1)],1):n("div",{class:[e.$style.rail_options]},[e.origin.show_return_date_input?n("div",{class:e.$style.round},e._l(e.roundArr,function(t,r){var o;return n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick1,expression:"galileoClick1"}],key:r,class:((o={})[e.$style.round_item]=!0,o[e.$style.passive]=e.roundStatus!==t.value,o[e.$style.active]=e.roundStatus===t.value,o),attrs:{"data-type":r,"data-spm-module":"TripSwitch_Btn?trg=manual&ext="+encodeURIComponent(JSON.stringify({roundStatus:t.value})),"data-spm-virtual-item":"__virtual"},on:{click:function(n){e.roundStatus=t.value}}},[e._v("\n        "+e._s(t.label)+"\n      ")])}),0):e._e(),e._v(" "),e.origin.show_origin_position_input?n("div",{class:e.$style.jrpass_single},[n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:{spm:"SearchFrom"},expression:"{\n          spm: `SearchFrom`\n        }"}],class:e.validatorData.from&&e.$style.error,attrs:{name:e.$t("ptp_from"),value:e.form.from&&e.form.from.name,"data-spm-module":"SearchFrom","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(t){return e.openStation("from")}}})],1):e._e(),e._v(" "),e.origin.show_destination_position_input?n("div",{class:[e.$style.jrpass_single,e.$style.jrpass_switch]},[n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:{spm:"SearchTo"},expression:"{\n          spm: `SearchTo`\n        }"}],class:e.validatorData.to&&e.$style.error,attrs:{name:e.$t("ptp_to"),value:e.form.to.name,"data-spm-module":"SearchTo","data-spm-virtual-item":"__virtual"},nativeOn:{click:function(t){return e.openStation("to")}}}),e._v(" "),n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:{spm:"SwitchOD_Btn"},expression:"{\n          spm: `SwitchOD_Btn`\n        }"}],class:e.$style.svg_box,attrs:{"data-spm-module":"SwitchOD_Btn?trg=manual","data-spm-virtual-item":"__virtual"},on:{click:e.switchStation}},[n("IconSwitch",{class:e.$style.bus_change,attrs:{theme:"outline",size:"20",fill:"#212121"}})],1)],1):e._e(),e._v(" "),n("div",{class:[e.$style.jrpass_single,e.$style.jrpass_date]},[e.origin.show_departure_date_input?n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:{spm:"SearchDepartureDateTime"},expression:"{\n          spm: `SearchDepartureDateTime`\n        }"}],class:[e.validatorData.date&&e.$style.error,e.$style.jrpass_dete_single],attrs:{"data-spm-module":e.departureDateInputSpm,"data-spm-virtual-item":"__virtual"}},[n("edit-input",{attrs:{name:e.$t("ptp_departure_date"),placeholder:e.$t("15731"),value:e.getDate(e.form.departure_date,e.form.departure_time)},nativeOn:{click:function(t){return e.clickDateTimeInput("departure")}}})],1):e._e(),e._v(" "),e.origin.show_return_date_input?n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:{spm:"SearchReturnDateTime"},expression:"{\n          spm: `SearchReturnDateTime`\n        }"}],class:[e.validatorData.date&&e.$style.error,e.$style.jrpass_dete_single],attrs:{"data-spm-module":e.returnDateInputSpm,"data-spm-virtual-item":"__virtual"}},[n("edit-input",{attrs:{name:e.$t("4355-ptp-return-date-title"),placeholder:e.$t("19555-return-date-placeholder"),value:e.computedDisplayReturnDateTime},nativeOn:{click:function(t){return e.clickDateTimeInput("return")}}})],1):e._e()]),e._v(" "),e.origin.show_passenger_type_input?n("div",{class:e.$style.jrpass_single},[n("edit-input",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:{spm:"EditPassenger"},expression:"{\n          spm: `EditPassenger`\n        }"}],class:e.validatorData.passengers&&e.$style.error,attrs:{name:e.$t("4138"),value:e.PassengerText,placeholder:e.$t("13053-please_select_passenger"),"show-icon":!0},nativeOn:{click:function(t){return e.handleShowPassenger(t)}}})],1):e._e(),e._v(" "),e.origin.show_seat_input?n("div",{class:e.$style.jrpass_single},[n("edit-input",{class:e.validatorData.seat_class&&e.$style.error,attrs:{name:e.$t("117082"),value:e.seatText,placeholder:e.$t("global.select.palceholder"),"show-icon":!0},nativeOn:{click:function(t){e.$refs.seatPicker.show=!0}}})],1):e._e(),e._v(" "),n("div",{staticStyle:{"margin-top":"16px"},attrs:{"data-spm-module":"SearchBtn?trg=manual&ext="+JSON.stringify({FromStationId:e.form.from.ruid,ToStationId:e.form.to.ruid}),href:"javascript:void(0)"}},[n("klk-button",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker.stop",value:e.galileoClick5,expression:"galileoClick5",modifiers:{stop:!0}}],attrs:{type:"primary",block:"","data-spm-item":"__default?typ=entry"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("\n        "+e._s(e.$t("ptp_search"))+"\n      ")])],1)]),e._v(" "),n("client-only",[n("station",{ref:"search",attrs:{show:e.showStation,"product-type":e.productType,history:e.ptpHistory[e.stationType],"station-type":e.stationType,"search-title":"from"===e.stationType?e.$t("ptp_from"):e.$t("ptp_to"),form:e.form,"data-spm-module":"SearchFrom?trg=manual","data-spm-virtual-item":"__virtual?trg=manual","full-history":[]},on:{"update:show":function(t){e.showStation=t},remove:function(){return e.removeHistory()},"remove-full-history":function(){return e.removeFullHistory()},select:function(t){return e.selectStation(t)},"select-full":function(t){return e.selectFullStation(t)}}}),e._v(" "),n("passenger-picker",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:e.galileoClick7,expression:"galileoClick7"}],ref:"passengerPicker",staticClass:"ptp_passenger_modal",attrs:{"passenger-types":e.origin&&e.origin.passenger_types||[],"max-passenger-num":e.origin.max_passenger_num,passengers:e.form.passengers,"spm-module-passenger":"MobilityPTP_SearchForm_Passenger","data-spm-module":"SearchNumPassenger_Confirm?trg=manual","data-spm-virtual-item":"__virtual"},on:{input:function(t,n){return e.selectPassenger(t,n)}}}),e._v(" "),n("seat-picker",{ref:"seatPicker",attrs:{"seat-class":e.origin&&e.origin.seat_classes||[],value:e.form.seat_class},on:{"update:value":function(t){return e.$set(e.form,"seat_class",t)}}}),e._v(" "),n("klk-bottom-sheet",{class:e.$style["bottom-sheet"],attrs:{title:e.$t("12280-select-date"),"show-close":"","can-pull-close":e.dateTimePickerPullClosable,visible:e.showDateTimePicker,transfer:""},on:{"update:visible":function(t){e.showDateTimePicker=t}}},[e.showDateTimePicker?n("date-time-picker",{attrs:{"ptp-tag-result":e.ptpTagResult,"origin-ptp-tag-result":e.originPtpTagResult,type:e.dateTimePickerType,"date-range-count-min":e.origin.date_range_count_min||0,"date-range-count":(e.origin.date_range_count+1||2)-1,"date-departure":e.form.departure_date,"date-now":e.origin.date_now,"date-return":e.form.return_date,"time-departure":e.form.departure_time,"time-return":e.form.return_time,"return-days-add":(e.origin.return_days_add+1||2)-1,"max-return-day":e.origin.max_return_day},on:{"time-select-open-change":function(t){e.dateTimePickerPullClosable=!t},confirm:function(t,n){return e.onDateTimePickerConfirm(t,n)}}}):e._e()],1)],1)],1)},staticRenderFns:[]},function(e){e&&(e("data-v-5225c054_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{rail_options:"src-components-search-form-index-module-city-page-search-rail_options-Dh-X",jrpass_switch:"src-components-search-form-index-module-city-page-search-jrpass_switch-2oUU",svg_box:"src-components-search-form-index-module-city-page-search-svg_box-33Ay",svg_box_disabled:"src-components-search-form-index-module-city-page-search-svg_box_disabled-2XT6",svg:"src-components-search-form-index-module-city-page-search-svg-Q_CG",alipay_svg:"src-components-search-form-index-module-city-page-search-alipay_svg-3hjz",disabled_svg:"src-components-search-form-index-module-city-page-search-disabled_svg-CBWs",round:"src-components-search-form-index-module-city-page-search-round-AbxX",round_item:"src-components-search-form-index-module-city-page-search-round_item-3FHt",passive:"src-components-search-form-index-module-city-page-search-passive-35QX",active:"src-components-search-form-index-module-city-page-search-active-1oVs",jrpass_single:"src-components-search-form-index-module-city-page-search-jrpass_single-nri3",jrpass_date:"src-components-search-form-index-module-city-page-search-jrpass_date-23HS",jrpass_dete_single:"src-components-search-form-index-module-city-page-search-jrpass_dete_single-18UW",error:"src-components-search-form-index-module-city-page-search-error-2Nev","bottom-sheet":"src-components-search-form-index-module-city-page-search-bottom-sheet-N0pE"}}))},on,void 0,!1,void 0,!1,ry,void 0,void 0);var oo=function(e){D(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=j(t);return e=n?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),O(this,e)});function o(){return S(this,o),r.apply(this,arguments)}return T(o,[{key:"currentForm",get:function(){var e;return null===(e=({DEST:{desktop:rH,mobile:or}})[this.currentPage])||void 0===e?void 0:e[this.platform]}}]),o}(_.Vue);I([(0,_.Prop)({type:String,default:"desktop"})],oo.prototype,"platform",void 0),I([(0,_.Prop)({type:Number,required:!0,default:346})],oo.prototype,"leafCategoryId",void 0),I([(0,_.Prop)({type:String,default:"DEST"})],oo.prototype,"currentPage",void 0),I([(0,_.Prop)({type:String,default:""})],oo.prototype,"departureCityDestId",void 0),I([(0,_.Prop)({type:String,default:""})],oo.prototype,"destinationCityDestId",void 0);var oi=oo=I([(0,_.Component)({components:{CityDesktopSearch:rH,CityMobileSearch:or}})],oo);let oa=A({render:function(){var e=this.$createElement;return(this._self._c||e)(this.currentForm,this._b({tag:"com"},"com",this.$props,!1))},staticRenderFns:[]},void 0,oi,"data-v-90c92920",!1,void 0,!1,void 0,void 0,void 0)},78323:function(){}}]);
//# sourceMappingURL=45622.c04a670b.js.map