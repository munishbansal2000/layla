"use strict";(()=>{function U(t=window){let n=[],e=t;for(;e;){n.unshift({window:e,frame:null});try{let r=e.parent,o=Array.from(r.document.getElementsByTagName("iframe"));for(let i of o)if(i.contentWindow===e){n[0].frame=i;break}if(r===e)break;e=r}catch{break}}return n}function j(){let t=U()[0].window,n=t.document,e=0;return typeof t.pageYOffset=="number"?e=t.pageYOffset:n.documentElement?.scrollTop?e=n.documentElement.scrollTop:n.body?.scrollTop&&(e=n.body.scrollTop),e}function L(){let t=U()[0].window,n=t.document,e=n.body,r=n.documentElement||n.body;return{viewport:t.innerHeight||r.clientHeight,window:Math.max(e.scrollHeight,e.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)}}function p(t){try{window.console.log(`Dable DEBUG: ${t}`)}catch{}}var O=class{constructor(n){this.executor=n}execute(n){let e=Array.prototype.shift.apply(n);this.executor[e]?this.executor[e].apply(this.executor,n):p(`\uC874\uC7AC\uD558\uC9C0 \uC54A\uB294 \uBA85\uB839\uC785\uB2C8\uB2E4: ${e}`)}push(n){if(Array.isArray(n[0])){for(let e=0;e<n.length;e++){let r=n[e];this.push(r)}return}return this.execute(n)}};function z(){return location?.protocol==="http:"?"http:":"https:"}function Q(t){return`${t||z()}//${window.TEST_API_SERVER_DOMAIN||"api.dable.io"}`}function K(t){return`${t||z()}//${window.TEST_AD_LOGGING_SERVER_DOMAIN||"ad-log.dable.io"}`}function m(t){let e=new RegExp(`\\b${t}=(.*?)(?:[,;]|$)`).exec(document.cookie);return e&&e[1]&&e[1]!=="null"?e[1]:""}function y(t,n,e=60){let r=new Date(Date.now()+e*1e3),o=location.hostname.split("."),i=Math.max(0,o.length-2)+1;for(;--i>=0;){let a=o.slice(i).join("."),s=`${t}=${n}; path=/; domain=${a}; expires=${r.toUTCString()};`;if(document.cookie=s,m(t))return}}function Y(t){if(!t||typeof t!="object")return!1;let n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}var se=function(){let t=0;return()=>++t}();function ce(t){let n=document.createElement("script"),e=!1;n.src=t,n.async=!0,n.onload=()=>{e||(e=!0,n.onload=null,n?.parentNode?.removeChild(n))},document.head.appendChild(n)}function q(t,n=""){let e={};return Array.isArray(t)?t.forEach((r,o)=>Object.assign(e,q(r,`${n}[${o}]`))):Y(t)?Object.entries(t).forEach(([r,o])=>Object.assign(e,q(o,`${n}${n?`[${r}]`:r}`))):n&&(e[n]=t===void 0?"":String(t)),e}function T(t,n={},e){let r=new URLSearchParams(q(n)),o=`_dbljson${se()}`;return typeof window=="object"&&(window[o]=i=>{e?.(i)}),r.set("callback",o),r.set("_",String(Date.now())),ce(`${t}?${r.toString()}`),o}var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";function de(t,n){if(t==null)return"";let e={dict:{},dictToCreate:{},wc:"",w:"",dataVal:0,dataPosition:0,enlargeIn:2,dictSize:3,numBits:2},r=[],o;for(let i=0;i<t.length;i+=1){let a=t.charAt(i);if(Object.prototype.hasOwnProperty.call(e.dict,a)||(e.dict[a]=e.dictSize++,e.dictToCreate[a]=!0),e.wc=e.w+a,Object.prototype.hasOwnProperty.call(e.dict,e.wc)){e.w=e.wc;continue}if(Object.prototype.hasOwnProperty.call(e.dictToCreate,e.w)){let s=e.w.charCodeAt(0);if(s<256){for(let c=0;c<e.numBits;c++)e.dataVal=e.dataVal<<1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++;o=s;for(let c=0;c<8;c++)e.dataVal=e.dataVal<<1|o&1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++,o=o>>1}else{o=1;for(let c=0;c<e.numBits;c++,o=0)e.dataVal=e.dataVal<<1|o,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++;o=e.w.charCodeAt(0);for(let c=0;c<16;c++,o=o>>1)e.dataVal=e.dataVal<<1|o&1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++}--e.enlargeIn===0&&(e.enlargeIn=Math.pow(2,e.numBits++)),delete e.dictToCreate[e.w]}else{o=e.dict[e.w];for(let s=0;s<e.numBits;s++,o=o>>1)e.dataVal=e.dataVal<<1|o&1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++}--e.enlargeIn===0&&(e.enlargeIn=Math.pow(2,e.numBits++)),e.dict[e.wc]=e.dictSize++,e.w=a}if(e.w!==""){if(Object.prototype.hasOwnProperty.call(e.dictToCreate,e.w)){let i=e.w.charCodeAt(0);if(i<256){for(let a=0;a<e.numBits;a++)e.dataVal=e.dataVal<<1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++;o=i;for(let a=0;a<8;a++,o=o>>1)e.dataVal=e.dataVal<<1|o&1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++}else{o=1;for(let a=0;a<e.numBits;a++,o=0)e.dataVal=e.dataVal<<1|o,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++;o=i;for(let a=0;a<16;a++,o=o>>1)e.dataVal=e.dataVal<<1|o&1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++}--e.enlargeIn===0&&(e.enlargeIn=Math.pow(2,e.numBits++)),delete e.dictToCreate[e.w]}else{o=e.dict[e.w];for(let i=0;i<e.numBits;i++,o=o>>1)e.dataVal=e.dataVal<<1|o&1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++}--e.enlargeIn===0&&(e.enlargeIn=Math.pow(2,e.numBits++))}o=2;for(let i=0;i<e.numBits;i++,o=o>>1)e.dataVal=e.dataVal<<1|o&1,e.dataPosition===n-1?(e.dataPosition=0,r.push(l.charAt(e.dataVal)),e.dataVal=0):e.dataPosition++;do{if(e.dataVal=e.dataVal<<1,e.dataPosition===n-1){r.push(l.charAt(e.dataVal));break}e.dataPosition++}while(!0);return r.join("")}function C(t){return de(t,6)}function D(t,n){return t=t%1?Math.round(t):t,Math.min(t,Math.floor(n))}function le(t={}){let{min:n,max:e}=t;t.digits&&(n=Math.pow(10,t.digits-1),e=Math.pow(10,t.digits)-1),(n===void 0||e===void 0)&&(n=0,e=1);let r=n+Math.random()*(e-n);return t.digits?D(r,e):r}function Z(t){let n=le(t);return D(n,t?.max||Math.ceil(n))}function ue(t={}){let{min:n,max:e}=t;return t.digits&&(n=Math.pow(10,t.digits-1),e=Math.pow(10,t.digits)-1),(n===void 0||e===void 0)&&(n=0,e=1),{min:n,max:e}}function fe({min:t,max:n,scalingFactor:e}){return t+e*(n-t)}function pe(){let t=window.crypto||window.msCrypto;if(!(t&&t.getRandomValues))return Math.random();let n=4294967295,e=new Uint32Array(1);return t.getRandomValues(e),e[0]/n}function N(t={}){let n=pe(),{min:e,max:r}=ue(t),o=fe({min:e,max:r,scalingFactor:n});return t.digits?D(o,r):o}function me(t){let{platform:n,platformVersion:e,wow64:r,mobile:o,model:i}=t,a=e.replace(/\./g,"_");if(n==="Android"&&o)return`Linux; Android ${a}; ${i}`;if(n==="macOS")return`Macintosh; Intel Mac OS X ${a}`;if(n==="Windows"){let s=e.split("."),c=parseInt(s[0]),u=r?"WOW64":"Win64; x64";return c>0?`Windows NT 10.0; ${u}`:`Windows NT 6.${s[1]}; ${u}`}return n==="Chrome OS"?`X11; CrOS x86_64 ${e}`:n==="Linux"?"X11; Linux x86_64":`${n} ${e}`}function M(){let t=navigator.userAgentData,n=Promise.resolve("");if(!t||!t.getHighEntropyValues)return n;let e=Number(t.brands.find(r=>r.brand==="Chromium")?.version);return!e||e<101?n:t.getHighEntropyValues(["mobile","platformVersion","platform","fullVersionList","model","wow64"]).then(r=>{let o=r.fullVersionList.find(s=>s.brand==="Chromium")?.version,i=me(r),a=navigator.userAgent.replace(/\bChrome\/[\d.]+/,`Chrome/${o}`).replace(/^(Mozilla\/5\.0) \(.+?\)/,`$1 (${i})`);return navigator.userAgent!==a?a:""})}var he=["architecture","audio","colorDepth","colorGamut","contrast","cookiesEnabled","deviceMemory","domBlockers","fontPreferences","fonts","forcedColors","hardwareConcurrency","hdr","languages","math","monochrome","pdfViewerEnabled","plugins","reducedMotion","screenFrame","screenResolution","timezone","touchSupport","videoCard","invertedColors","osCpu"];async function ge(){let t=/(?:Mozilla|AppleWebKit|Mobile Safari|Chrome|Safari Line)\/\S*|\((?:iPhone|Linux);.+?\)|\(KHTML,.+?\)/g;return(await M()).replace(t,"").trim()}async function we([t,n]){let e=Object.entries(n.components).reduce((i,[a,s])=>(he.includes(a)&&(i[a]=s),i),{}),r=FingerprintJS?.hashComponents(e),o={fingerprintjs:{version:n.version,content:{visitorId:n.visitorId,components:e}},custom:{version:"0.0.0",content:{customId:r}}};return{addFingerprintParam:i=>{let a=new URL(i.startsWith("//")?`${location.protocol}${i}`:i);return a.searchParams.get("f")?i:(a.searchParams.set("f",C(JSON.stringify({fingerprints:o,extraUA:t}))),a.toString())},fingerprints:o,extraUA:t}}async function ee(){return typeof FingerprintJS>"u"||!FingerprintJS.promise?Promise.resolve({addFingerprintParam:t=>t,fingerprints:null,extraUA:null}):FingerprintJS.promise}async function te(){typeof FingerprintJS>"u"||FingerprintJS.promise||(FingerprintJS.promise=Promise.all([ge(),FingerprintJS.load().then(t=>t.get())]).then(we))}function ye(){if(window.fbq)return;let t=window.fbq=(...e)=>{t.callMethod?t.callMethod.apply(t,e):t.queue?.push(e)};window._fbq||(window._fbq=t),t.push=t,t.loaded=1,t.version="2.0",t.queue=[];let n=document.createElement("script");n.async=!0,n.src="https://connect.facebook.net/en_US/fbevents.js",document.getElementsByTagName("script")[0]?.insertAdjacentElement("beforebegin",n)}function ne(t,n){ye(),window.fbq?.("init",`${t}`),window.fbq?.("track",n)}var re=/[\?\&]dablena=([^\|]+)\|([^\|]+)\|([^\|]+)\|([^\|]+)\|([^\|\#\&]+)\|([^\|\#\&]+)(?:\|([^\|\#\&]+))(?:\|([^\|\#\&]+))(?:\|(\d+))?(?:\|(\d+))?(?:\|([^\|\#\&]+))?(?:\|(\d+))?(?:\|(\d+))?/,be=String(Math.round(N()*1e8)),ve=1e3*10,W=1e3*60*30,xe=1e3*60*60*24*30,V=!1,v=null,P=null,ie=!0,B=null,E=t=>{let n=null;try{n=decodeURIComponent(t)}catch{n=unescape(t)}return n};function x(t,n){let e,{client_name_or_account_id:r,event_type:o,data:i={},uid:a,cid:s,is_new_cid:c,cached_click:u,cached_conversion:h,client_id:g,items:$,fingerprints:F}=t;i===null&&(i={});let R=E(window?.location?.href||"");if(R.indexOf("dablena=NATEST")>-1)return;let d=window?.location?.href?.match(/[\?\&]utm_[a-z]+=[^\#\&]+/g);u||h?(e=(u||h).split("|"),e.unshift("")):e=R.match(re);let w=document?.referrer||"";w.indexOf("api.dable.io/widgets")>-1?(a=E(w.split("/")[7]?.split("?")[0]||"")||a,i.widget_id=w.split("/")[5],i.service_name=e?.[3]||E(w.match(/[\?\&]site=([^\#\&]+)/)?.[1]||""),i.campaign_id=e?.[4]||"",i.content_id=e?.[5]||"",i.method=e?.[6]||"",i.channel=e?.[7]||"",i.request_id=e?.[8]||"",i.click_timestamp=e?.[9]||"",i.request_timestamp=e?.[10]||"",i.inventory_id=e?.[11]||"",i.page=e?.[12]||"",i.slot=e?.[13]||""):e&&(a=e?.[1]||a,i.widget_id=e?.[2],i.service_name=e?.[3],i.campaign_id=e?.[4]||"",i.content_id=e?.[5]||"",i.method=e?.[6]||"",i.channel=e?.[7]||"",i.request_id=e?.[8]||"",i.click_timestamp=e?.[9]||"",i.request_timestamp=e?.[10]||"",i.inventory_id=e?.[11]||"",i.page=e?.[12]||"",i.slot=e?.[13]||""),i.url=window?.location?.href||"",i.ref=w,i.cid=s,c&&["visit","content","cart","checkout","purchase"].includes(o)&&(i.is_new_cid=c),g&&(i.client_id=g),$&&(i.items=$),F&&(i.f=F),(o.indexOf("adview+")===0||o.indexOf("inlinkview+")===0||V&&i.session_id)&&(i.duration=t.duration||0,i.scroll_y=t.scroll_y,i.page_height=t.page_height,i.window_height=t.window_height);let S=`${K("https:")}/logs`;if(S+=`/clients/${encodeURIComponent(r)}`,S+=`/users/${encodeURIComponent(a)}/${o}`,d)for(let f=0;f<d.length;f++){let _=d[f]?.substring(1).split("=");i[_[0]]=E(_[1])}i.z=String(Math.round(Math.random()*1e6));let b=setTimeout(function(){n?.()},2e3);M().then(f=>{f&&(i.user_agent=f),T(S,i,function(_){_!=="OK"&&p(_),clearTimeout(b),n?.()})})}var Ae=t=>{let n=0;B=new Date().getTime();let e=setInterval(function(){let r=new Date().getTime();r-B>ve&&clearInterval(e),B=r,n=n+1,t.duration=n;try{let o=L();t.scroll_y=j(),t.page_height=o.window,t.window_height=o.viewport}catch{t.scroll_y=-1,t.page_height=-1,t.window_height=-1}x(t),y(v,P,W)},1e3)},oe=(t,n,e)=>{setTimeout(function(){t.event_type=`adview+${n}`,t.duration=n;try{let r=L();t.scroll_y=j(),t.page_height=r.window,t.window_height=r.viewport}catch{t.scroll_y=-1,t.page_height=-1,t.window_height=-1}e?e(t):x(t)},n*1e3)},Se=(t,n)=>{let{count:e}=n;n.duration=e,x(n),(e===5||e===30)&&(t.event_type=`inlinkview+${e}`,t.duration=e,x(t))};function ae(t,n){let{client_name_or_account_id:e,uid:r,cid:o,is_new_cid:i,cached_click:a,cached_conversion:s,client_id:c,items:u,data:h,fingerprints:g}=t,$=window?.location?.href?.match(/[\?\&]utm_[a-z]+=[^\#\&]+/g),R=E(window?.location?.href||"").match(re),d="visit";v=`__dbl__se_${c}`;let w=`__dbl__re_${c}`;V=!1;let k=!!m(v),S=!!m(w);(R||a)&&(h?.is_native?d="inlinkview":d="adview",k?P=m(v):(P=o.slice(0,3)+String(Math.round(N()*1e8)),y(w,1,xe)),V=!0,y(v,P,W)),d==="visit"&&(k||S)&&(k?P=m(v):S&&(P=o.slice(0,3)+String(Math.round(N()*1e8))),V=!0,y(v,P,W));let b={event_type:d,client_name_or_account_id:e,uid:r,cid:o,is_new_cid:i,cached_click:a,cached_conversion:s,client_id:c,items:u,fingerprints:g},f={event_type:d,client_name_or_account_id:e,uid:r,cid:o,is_new_cid:i,cached_click:a,cached_conversion:s,client_id:c,items:u,data:{session_id:P,user_page_id:be},fingerprints:g};if(d==="inlinkview"){let{scroll_y:_,page_height:H,window_height:G,count:J}=h;Object.assign(b,{scroll_y:_},{page_height:H},{window_height:G},{count:J}),Object.assign(f,{scroll_y:_},{page_height:H},{window_height:G},{count:J}),Se(b,f)}ie&&(d==="adview"&&(oe(b,5),oe(b,30)),V&&d!=="inlinkview"&&Ae(f),d==="visit"&&(!V||$)?x(b,n):n&&n(),h?.is_native&&(ie=!1))}var Ve=t=>/\d\d\d-\d\d\d-\d\d\d/.test(t)?Number(t.split("-").join("").substring(3)):null,Oe={Visit:{type:"visit"},PageView:{type:"visit"},ViewContent:{type:"content"},Search:{type:"search"},AddToCart:{type:"cart"},AddToWishlist:{type:"wishlist"},InitialCheckout:{type:"checkout"},InitiateCheckout:{type:"checkout"},AddPaymentInfo:{type:"payment"},Purchase:{type:"purchase",validateData(t){if(!t?.value||!t?.currency)throw new Error("Missing value or currency data")}},Lead:{type:"lead"},CompleteRegistration:{type:"registration"},event1:{type:"event1"},event2:{type:"event2"},event3:{type:"event3"}};function A(){return window.FingerprintJS?Promise.resolve():(A.loadingPromise||(A.loadingPromise=new Promise((t,n)=>{let e=document.createElement("script");e.src="https://static.dable.io/dist/fp.min.js",e.async=!0,e.onload=()=>{A.loadingPromise=null,t()},e.onerror=()=>{A.loadingPromise=null,n(new Error("FingerprintJS script load error"))},document.head.appendChild(e)})),A.loadingPromise)}var I=class{cacheCookieName=void 0;cacheExpire=void 0;fingerprintInitialized=!1;fingerprintPromise=null;constructor(){this.cacheCookieName="dable_uid",this.cacheExpire=3*365*24*60*60*1e3}init(n){this.clientNameOrAccountId=n}track(n,e,r){if(typeof e=="function"&&(r=e,e=null),r||(r=function(){}),!this.clientNameOrAccountId){p("init should executed before executing track method"),r();return}if(location.href.indexOf("gtm-msr.appspot")>-1){r();return}let o=Oe[n];try{if(o)o.validateData&&o.validateData(e);else throw new Error(`Invalid event code: ${n}`)}catch(i){p(String(i));return}this.fetchPrefs(i=>{if(i.sp_client===null){p(`Invalid ID: ${this.clientNameOrAccountId}`),r();return}let a=Promise.resolve();i.sp_client?.is_fp&&!this.fingerprintPromise?(this.fingerprintPromise=A().then(()=>te()).catch(s=>{p("fingerprint error:",s)}),a=this.fingerprintPromise):this.fingerprintPromise&&(a=this.fingerprintPromise),a.then(()=>{this.fetchUID(s=>{i.sp_client?.facebook?.enabled&&i.sp_client?.facebook?.pixel_id&&ne(i.sp_client.facebook.pixel_id,n);let c=n==="PageView"?ae:x;ee().then(({fingerprints:u,extraUA:h})=>{let g=null;u&&(g=C(JSON.stringify({fingerprints:u,extraUA:h}))),c({client_name_or_account_id:this.clientNameOrAccountId,event_type:o.type,data:e,uid:s,cid:i.cid,is_new_cid:i.is_new_cid,cached_click:i.sp_client?.cached_click,cached_conversion:i.sp_client?.cached_conversion,client_id:i.sp_client?.client_id,fingerprints:g},r)})})})})}fetchPrefs(n){if(!this.clientNameOrAccountId){p("init should executed before executing fetchPrefs method");return}if(this.prefs){let a=this.clientNameOrAccountId===this.prefs.sp_client?.client_name,s=Ve(this.clientNameOrAccountId)===this.prefs.sp_client?.client_id;if(a||s){n(this.prefs);return}}if(this.fetchPrefsQueue){this.fetchPrefsQueue.push(n);return}this.fetchPrefsQueue=[n];let e=m(this.cacheCookieName),r=window?.location?.href?.match(/[\?\&]ecid=([^\#\&]+)/)?.[1],o=window?.location?.href?.match(/[?&]request_id=([^#&]+)/)?.[1],i={paramUid:"",cached_uid:"",requestId:""};r&&(i.paramUid=r),o&&(i.requestId=o),e&&e!=="undefined"&&(i.cached_uid=e),T(`${Q("https:")}/plugin/services/${encodeURIComponent(this.clientNameOrAccountId)}/prefs2`,i,a=>{this.prefs=a&&a.result||null;for(let s=0;s<this.fetchPrefsQueue.length;s++){let c=this.fetchPrefsQueue[s];c(this.prefs)}this.fetchPrefsQueue=null,y(this.cacheCookieName,this.prefs.cid,this.cacheExpire)})}fetchUID(n){this.fetchPrefs(e=>{n(e.cid||`${Z({min:1e7,max:99999999})}.${Date.now()}`)})}};(t=>{let n=t.q||[];if(Array.isArray(n)){t.q=new O(new I);for(let e=0;e<n.length;e++){let r=n[e];t.q.push(r)}}})(window.dablena);})();
