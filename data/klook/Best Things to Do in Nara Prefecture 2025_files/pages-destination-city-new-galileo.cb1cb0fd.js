!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="b1f9440d-aea2-4b21-958f-56850da14c51",t._sentryDebugIdIdentifier="sentry-dbid-b1f9440d-aea2-4b21-958f-56850da14c51")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"web_ssr-platform_20251225_022df67f"};"use strict";(self.webpackChunkklook_ssr_platform=self.webpackChunkklook_ssr_platform||[]).push([["72267"],{16524:function(t,e,a){a.r(e),a.d(e,{default:()=>k});var i=a("61292"),o=a("28395"),s=a("79999"),n=a("18551"),r=a("12973"),d=a("34478"),l=a("16870"),p=a("10778"),c=a("98438"),u=a("43669"),m=a("39058"),g=a("84422");a("48759");let{WrapperList:h}=(0,p.ZP)({componentConf:l.Z}),_={1:"ttd",3:"hotel",4:"transport"};class y extends s.Vue{head(){var t,e,a,i,o,s;let{language:n,host:d}=this.klook,{title:l,keywords:p,description:c}=null===(t=this.pageData)||void 0===t?void 0:t.head,{share_info:u={},image_url_host:m}=(null===(e=this.pageData)||void 0===e?void 0:e.common_data)||{},g=this.$route.params.destinationId||"",h=(null===(i=this.pageData)||void 0===i?void 0:null===(a=i.common_data)||void 0===a?void 0:a.city_id)||"",_=(0,r.k7)({title:(null==u?void 0:u.title)||l,description:(null==u?void 0:u.description)||c,image:(null==u?void 0:u.image)||m?this.$transformImageUrl((null==u?void 0:u.image)||m,{...r.Zq}):"",url:`https://${d}${this.$route.path}`,locale:n,type:"product.group",twitterCard:"summary_large_image"},this.$t.bind(this));return{bodyAttrs:{"data-spm-page":`City?oid=city_${h}&ext=${encodeURIComponent(JSON.stringify({DestinationID:g,VerticalName:(null===(s=this.pageData)||void 0===s?void 0:null===(o=s.common_data)||void 0===o?void 0:o.parent_vertical_name)||""}))}`},title:l,meta:[this.$keywords(p),this.$description(c),..._],link:[...this.$canonical({indexable:!0})]}}get sectionsData(){var t;return(null===(t=this.pageData)||void 0===t?void 0:t.page.body.sections)||[]}get isApp(){return this.klook.isKlookApp}get realPlatform(){return"mobile"===this.klook.screenPlatform?"mobile":"desktop"}get isHotelPage(){return"3"===this.categoryId}get isSubvertical(){return parseInt(this.categoryId,10)>4}get pageVerticalType(){return _[this.categoryId]||"ttd"}mounted(){var t;let{city_id:e}=this.pageData.common_data,a=this.$route.params.destinationId||"";(0,m.G)(e),this.$trackGalileoPageLoad({page_data:n.iI.fromObject({destination_id:Number(a),destination_type:"city",city_id:Number(e),category_name:(null===(t=this.pageData.common_data)||void 0===t?void 0:t.parent_vertical_name)||""})})}handleShare(t,e){e({description:this.$t("220892",{City_Name:this.pageData.common_data.dest_name||""})})}constructor(...t){super(...t),this.pageData=null,this.parentPageType="",this.isEnterFromRouter=!1,this.categoryId="",this.destinationId=""}}(0,o.gn)([s.State],y.prototype,"klook",void 0);let f=y=(0,o.gn)([(0,s.Component)({components:{WrapperList:h,KlkShare:d.K},async asyncData(t){let{app:e,route:a,store:i,redirect:o,error:s}=t;try{let{destinationId:n,categoryId:r,destinationPath:d,categoryPath:l}=a.params;i.dispatch("traveller/poi/setPoiLoading",!0);let{...p}=a.query,m={destination_id:Number(n),page_type:r?Number(r):"",admin_preview_mode:a.query.admin_preview_mode||"",...p},h=["ios","android"].includes(t.store.state.klook.platform)?"mobile":t.store.state.klook.platform,{success:_,error:y,result:f}=await (0,c.B)(e.$axios.$get(u.Z.destinationCity,{params:m,headers:{"X-Platform":h}}));if(!_)return i.dispatch("traveller/poi/setPoiLoading",!1),s({statusCode:y.code,message:y.message,success:!1});if(i.dispatch("traveller/poi/setPoiLoading",!1),null==f?void 0:f.redirect_link){o(301,null==f?void 0:f.redirect_link);return}let v=f.common_data.parent_page_type;f.common_data.url_seo,f.common_data.vertical_seo_name;let k=f.common_data.publish_language_list.map(g.PK),b=i.state.klook.language;if(!k||!k.includes(b))return s({statusCode:404,success:!1});await i.dispatch("syncSupportLanguages",k);return{pageData:f,parentPageType:v,isEnterFromRouter:!0,categoryId:r,destinationId:n,success:_}}catch(t){return s({statusCode:t.code,message:t.message,success:!1})}},layout:"responsive"})],y),v=(0,a("77427").Z)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"destination-new-template",class:{harmony:this.klook.isOpenHarmony,"is-in-app":this.isApp,"is-bg-gray":this.isHotelPage}},[e("WrapperList",{attrs:{"list-data":this.sectionsData,"extra-data":{parentPageType:this.parentPageType,cityId:this.pageData.common_data.city_id||"",destinationId:this.destinationId||"",categoryId:this.categoryId,isSubvertical:this.isSubvertical,pageVerticalType:this.pageVerticalType,preFrontendId:this.pageData.common_data.pre_frontend_id||"",isEnterFromRouter:this.isEnterFromRouter,pageTitle:this.pageData.head.title||"",pageDesc:this.pageData.head.description||"",tabStyle:this.pageData.common_data.tab_style||""}}}),e("klk-share",{attrs:{"entrance-config":{position:"fixed"},platform:this.realPlatform},on:{share:this.handleShare}})],1)},[],!1,null,"55309a9a",null).exports,k=(0,i.xh)(v,{spm:"City"})},39058:function(t,e,a){a.d(e,{G:function(){return n},j:function(){return s}});var i=a(32222);let o="klk_recently_viewed_city";function s(){let t=(0,i.ZP)(),e=null==t?void 0:t.getItem(o);return e?{history_city_id:e}:{}}function n(t){let e=(0,i.ZP)();null==e||e.setItem(o,t,31536e6)}}}]);
//# sourceMappingURL=pages-destination-city-new-galileo.cb1cb0fd.js.map