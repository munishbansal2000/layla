"use strict";(("undefined"!=typeof window?window:this).webpackChunkorion_web_react=("undefined"!=typeof window?window:this).webpackChunkorion_web_react||[]).push([[5465],{33533:(e,t,n)=>{n.r(t),n.d(t,{UnstyledViatorLogo:()=>p}),n(962953);var o=n(296540),a=n(706442),i=n(673471),r=n(243228),s=n(587235),l=n(577807);const c=(0,r.R)(()=>n.e(42347).then(n.bind(n,249451)));c.displayName="ViatorPrideLogo";const u=(0,r.R)(()=>n.e(94116).then(n.bind(n,802802)));u.displayName="DefaultViatorLogo";const d={[s.h9.VIATOR]:u,[s.h9.VIATOR_PRIDE]:c},m=s.h9.VIATOR,p=e=>{var t,n;let{className:r}=e;const s=(0,a.A)(),c=(0,i._)(),u=null!==(t=null==c||null===(n=c.headerCustomisation)||void 0===n?void 0:n.viatorLogoVariation)&&void 0!==t?t:m,p=u&&d[u]||d[m];return o.createElement(p,{className:r,"aria-label":s.formatMessage(l.P.logoAriaLabel),role:"img"})}},48865:(e,t,n)=>{n.r(t),n.d(t,{PROMO_CODE_DETAILS_MODAL:()=>y,PromoCodeDetailsModal:()=>S});var o=n(296540),a=n(246942),i=n.n(a),r=n(849149),s=n(458895),l=n(31056),c=n(588168),u=n(160340),d=n(407686),m=n(263512),p=n(877005),v=n(969965),g=n(464225),h=n(764489),f=n(625435),C=n(833483),E=n(201536);const A=[{discountAmount:15,minimumAmount:100},{discountAmount:40,minimumAmount:200},{discountAmount:75,minimumAmount:300}],S=e=>{const{promoCode:t,isUSUser:n,onRequestClose:a,track:S}=e,{extendContext:y}=(0,g.z)(S),{isDesktop:_}=(0,v.kW)(),b=o.createElement("span",{className:E.A.title},o.createElement(r.h,{variant:r.I.title2,as:"h2"},o.createElement(h.w,{...n?C.P.usModalTitle:C.P.nonUsModalTitle,values:n?{amount:o.createElement(m.v,{currencyCode:"USD",amount:75,minimumFractionDigits:0,maximumFractionDigits:0})}:{percentage:10}}))),w=o.createElement(d.L,{value:"2025-12-31"}),k=o.createElement(p.N,{href:(0,f.G)(u.wA.HOMEPAGE)},o.createElement("span",{className:E.A.link},"viator.com")),T=o.createElement("div",{className:i()(E.A.promoCodeBanner,{[E.A.extraMargin]:!n})},o.createElement("span",{className:E.A.usePromoCodeText},o.createElement(h.w,{...C.P.usePromoCodeText})),o.createElement("span",{className:E.A.promoCode},t)),P=o.createElement("div",{className:E.A.content},T,n&&o.createElement("div",{className:E.A.section},o.createElement("span",{className:E.A.title},o.createElement(h.w,{...C.P.usSavingsSubtitle})),o.createElement("div",{className:i()(E.A.tiers,E.A.content)},A.map((e,t)=>o.createElement(o.Fragment,{key:e.minimumAmount},o.createElement(h.w,{...C.P.usSavingsTier,values:{discountAmount:o.createElement(m.v,{currencyCode:"USD",amount:e.discountAmount,minimumFractionDigits:0,maximumFractionDigits:0}),minimumAmount:o.createElement(m.v,{currencyCode:"USD",amount:e.minimumAmount,minimumFractionDigits:0,maximumFractionDigits:0})}}),t<A.length-1&&o.createElement("br",null)))),o.createElement("span",{className:E.A.content},o.createElement(h.w,{...C.P.usSavingsPromoCodeEligibleDiscount}))),o.createElement("div",{className:E.A.section},o.createElement("span",{className:E.A.title},o.createElement(h.w,{...n?C.P.usEligibilitySubtitle:C.P.nonUsEligibilitySubtitle})),o.createElement("br",null),o.createElement("span",{className:E.A.content},o.createElement(h.w,{...n?C.P.usEligibilityText:C.P.nonUsEligibilityText,values:{expiryDate:w}}))),o.createElement("div",{className:i()(E.A.termsAndConditions,{[E.A.section]:_})},o.createElement("span",{className:E.A.title},o.createElement(h.w,{...C.P.termsSubtitle})),o.createElement("br",null),o.createElement("span",{className:E.A.content},o.createElement(h.w,{...C.P.termsText,values:{expiryDate:w,link:k}})))),N={...e,automation:"promotion-code-modal",track:S};return _?o.createElement(s.a,{...N,displaySize:"md",header:b},P,o.createElement(c.$n,{onClick:a,track:y({elementId:"keep_exploring_button"})},o.createElement(h.w,{...C.P.buttonText}))):o.createElement(l.J,{...N,header:b,footer:o.createElement(c.$n,{onClick:a,width:"fill",track:y({elementId:"keep_exploring_button"})},o.createElement(h.w,{...C.P.buttonText}))},P)},y="PROMO_CODE_DETAILS_MODAL"},77220:(e,t,n)=>{n.d(t,{e:()=>l}),n(944114),n(533110),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(962953);var o=n(7361),a=n(804015);const i=new Set;let r=[];const s=(0,a.s)(()=>{r.length>0&&((0,o.a)("Image loading errors: ".concat(JSON.stringify(r))),r=[])},3e3),l=(e,t,n)=>{const o=e.target.currentSrc;i.size>=20||i.has(o)||(i.add(o),r.push({imageSrc:o,component:t,...n}),s())}},147958:(e,t,n)=>{n.d(t,{S:()=>h,n:()=>v}),n(898992),n(354520),n(962953);var o=n(296540),a=n(706442),i=n(307776),r=n(730882),s=n(840826),l=n(850678),c=n(842709),u=n(654291),d=n(609673);const m=36e5,p=(e,t)=>"".concat(r.Z.CRUISE_SEARCH_SAILINGS_DATA,"--").concat(e,"--").concat(t),[v,g]=(0,l.q)(),h=e=>{let{children:t,selectedCruiseId:n,selectedLineName:l,selectedShipName:v,enabled:h=!1}=e;const f=(0,a.A)(),[C,E]=(0,o.useState)(),[A,S]=(0,o.useState)(),[y,_]=(0,o.useState)(n),[b,w]=(0,o.useState)(!!n),[k,T]=(0,o.useState)(null),[P,N]=(0,d.U5s)();(0,o.useEffect)(()=>{const e=(0,s.D)().getData(r.Z.CRUISE_SEARCH_DATA);e&&"object"==typeof e&&"cruiseLines"in e?T(e):h&&P()},[h,P]),(0,o.useEffect)(()=>{N.data&&(0,s.D)().setItem(r.Z.CRUISE_SEARCH_DATA,N.data,m)},[N.data]);const M=null!=k?k:N.data,[L,R]=(0,o.useState)(""),[I,D]=(0,o.useState)(""),[O,x]=(0,o.useState)(""),[U,F]=(0,d.rus)();(0,o.useEffect)(()=>{var e,t;if(F.data&&null!==(e=F.variables)&&void 0!==e&&e.cruiseLine&&null!==(t=F.variables)&&void 0!==t&&t.ship){const e=p(F.variables.cruiseLine,F.variables.ship);(0,s.D)().setItem(e,F.data,m)}},[F.data]);const{allCruiseLines:B,allCruiseShips:G}=(0,o.useMemo)(()=>{const e=new Map,t=new Map;if(!M||!M.cruiseLines)return{allCruiseLines:e,allCruiseShips:t};let n=1,o=1;for(let a=0;a<M.cruiseLines.length;a+=1){const i=M.cruiseLines[a],r={id:n,name:i.name};e.set(n,r);for(let e=0;e<i.shipNames.length;e+=1){const a=i.shipNames[e],r={id:o,name:a,cruiseLineId:n};t.set(o,r),l===i.name&&v===a&&(E(n),S(o)),o+=1}n+=1}return{allCruiseLines:e,allCruiseShips:t}},[M,l,v]);(0,o.useEffect)(()=>{var e,t;if(!C||!A)return;const n=null===(e=B.get(C))||void 0===e?void 0:e.name,o=null===(t=G.get(A))||void 0===t?void 0:t.name;if(!n||!o)return;const a=p(n,o);(0,s.D)().getData(a)||U({variables:{cruiseLine:n,ship:o}})},[C,A,U,B,G]);const W=(0,o.useMemo)(()=>{var e,t;const n=new Map;if(!C||!A)return n;const o=null===(e=B.get(C))||void 0===e?void 0:e.name,a=null===(t=G.get(A))||void 0===t?void 0:t.name;if(!o||!a)return n;const r=p(o,a),l=(0,s.D)().getData(r),c=null!=l?l:F.data;if(!c||!c.sailingsByShip)return n;for(let e=0;e<c.sailingsByShip.length;e+=1){const t=c.sailingsByShip[e],o=(0,i.Xv)(f,t.startDate,t.durationInDays),a={...t,name:o,cruiseLineId:C,cruiseShipId:A};n.set(a.id,a),y===a.id&&x(o)}return w(!1),n},[f,C,A,y,F.data,B,G]),V=(0,o.useCallback)(e=>{R(e.target.value)},[]),H=(0,o.useCallback)(e=>{D(e.target.value)},[]),z=(0,o.useCallback)(e=>{x(e.target.value)},[]),K=(0,o.useMemo)(()=>[...B.values()].sort((e,t)=>e.name.localeCompare(t.name)),[B]),q=(0,o.useMemo)(()=>[...G.values()].sort((e,t)=>e.name.localeCompare(t.name)),[G]),Y=(0,o.useMemo)(()=>[...W.values()],[W]),Z=(0,o.useMemo)(()=>{const e=L.toLocaleLowerCase();return K.filter(t=>t.name.toLocaleLowerCase().includes(e))},[K,L]),$=(0,o.useMemo)(()=>{const e=I.toLocaleLowerCase();return q.filter(t=>t.name.toLocaleLowerCase().includes(e)&&((0,c.z)(C)||C===t.cruiseLineId))},[q,I,C]),j=(0,o.useMemo)(()=>(0,u.f)(C)&&(0,u.f)(A)?Y:[],[Y,C,A]),J=(0,o.useCallback)(e=>{E(e.id),S(void 0),_(void 0)},[]),Q=(0,o.useCallback)(e=>{E(e.cruiseLineId),S(e.id),_(void 0)},[]),X=(0,o.useCallback)(e=>{E(e.cruiseLineId),S(e.cruiseShipId),_(e.id)},[]);(0,o.useEffect)(()=>{var e,t;(0,u.f)(C)?R(null!==(e=null===(t=B.get(C))||void 0===t?void 0:t.name)&&void 0!==e?e:""):R("")},[C,B]),(0,o.useEffect)(()=>{var e,t;(0,u.f)(A)?D(null!==(e=null===(t=G.get(A))||void 0===t?void 0:t.name)&&void 0!==e?e:""):D("")},[A,G]),(0,o.useEffect)(()=>{var e,t;(0,u.f)(y)?x(null!==(e=null===(t=W.get(y))||void 0===t?void 0:t.name)&&void 0!==e?e:""):x("")},[y,W]);const ee=(0,o.useCallback)(()=>{E(void 0),S(void 0),_(void 0)},[]),te=(0,o.useCallback)(()=>{S(void 0),_(void 0)},[]),ne=(0,o.useCallback)(()=>{_(void 0)},[]),oe=(0,o.useMemo)(()=>{if((0,u.f)(C))return B.get(C)},[C,B]),ae=(0,o.useMemo)(()=>{if((0,u.f)(A))return G.get(A)},[A,G]),ie=(0,o.useMemo)(()=>{if((0,u.f)(y))return W.get(y)},[y,W]);return o.createElement(g.Provider,{value:{isInitialLoading:b,isLoadingLines:N.loading,isLoadingShips:N.loading,isLoadingSailings:F.loading,cruiseLineValue:L,cruiseShipValue:I,cruiseSailingValue:O,selectedLineId:C,selectedShipId:A,selectedSailingId:y,onChangeLineValue:V,onChangeShipValue:H,onChangeSailingValue:z,availableLines:Z,availableShips:$,availableSailings:j,onSelectLine:J,onSelectShip:Q,onSelectSailing:X,onClearLine:ee,onClearShip:te,onClearSailing:ne,selectedLine:oe,selectedShip:ae,selectedSailing:ie}},t)}},178199:(e,t,n)=>{n.d(t,{l:()=>h,x:()=>y});var o=n(58168),a=(n(898992),n(354520),n(962953),n(803296),n(527208),n(548408),n(814603),n(147566),n(198721),n(296540)),i=n(257536),r=n(160340),s=n(845955),l=n(646269),c=n(719315),u=n(180636),d=n(914794),m=n(840826),p=n(730882),v=n(850678),g=n(842709);const[h,f]=(0,v.q)({});let C,E;const A=(e,t,n,a)=>{const s=(0,m.D)(),l=s.getData(p.Z.TRACKING_CONSENT);(null===l||e!==n.analyticsAndCustomisationConsentGiven||l.advertisingConsentGiven!==n.advertisingConsentGiven||l.analyticsAndCustomisationConsentGiven!==n.analyticsAndCustomisationConsentGiven||l.functionalConsentGiven!==n.functionalConsentGiven)&&(s.setItem(p.Z.TRACKING_CONSENT,n),((e,t,n)=>{const a={consentId:null!=n?n:void 0,regulationTypeId:e,advertisingConsentGiven:t.advertisingConsentGiven,analyticsAndCustomisationConsentGiven:t.analyticsAndCustomisationConsentGiven,functionalConsentGiven:t.functionalConsentGiven};i.A.post((0,o.A)(new URL(window.location.href),{pathname:r.y2.TRACKING_CONSENT}).href,a).catch(e=>{console.error("Failed to ".concat(t.analyticsAndCustomisationConsentGiven?"enable":"disable"," personalization tracking: ").concat(e.message))})})(t,n,a))},S=()=>{if(window.Optanon){const e=window.Optanon.GetDomainData().ConsentModel.Name;if("opt-in"===e)return 2;if("opt-out"===e){const{country:e,state:t}=window.Optanon.getGeolocationData();return"us"===e.toLowerCase()&&"ca"===t.toLowerCase()?1:0}}return 0},y=e=>{const{children:t,oneTrustConfiguration:n,hasPersonalisedTracking:o}=e,{giveConsent:i}=(0,c.W)(),{giveConsent:r}=(0,l.t)(),m=(0,a.useRef)(null);(0,g.z)(E)&&(E=d.B?new Promise(e=>{C=e}):Promise.resolve(null));const p=n;(0,a.useEffect)(()=>{if(null!=p&&p.isEnabled&&!m.current){const e=e=>{var t;t=Object.keys(e).filter(t=>e[t]),i&&i(t),r&&r(t);const n={advertisingConsentGiven:e[u.J.ADVERTISING]||e[u.J.ALL]||!1,analyticsAndCustomisationConsentGiven:e[u.J.ANALYTICS_AND_CUSTOMISATION]||e[u.J.ALL]||!1,functionalConsentGiven:e[u.J.FUNCTIONAL]||e[u.J.ALL]||!1};E.then(e=>{A(o,S(),n,e?e.consentId():"")})},t=new s.x(null==p?void 0:p.isTestMode,null==p?void 0:p.domainId,e);m.current=t,t.load(),t.getNoticeApi().then(e=>{if(!e.isGDPR()&&(0,g.z)(t.consentId())){const e={advertisingConsentGiven:!0,analyticsAndCustomisationConsentGiven:!0,functionalConsentGiven:!0};A(o,S(),e,t.consentId())}}),C(t)}else C(null)},[]);const v=()=>E.then(e=>null!==e?e.consentModel():void 0),h=()=>E.then(e=>{e&&e.showOptions()}),y=()=>E.then(e=>null!==e?e.getNoticeApi():Promise.reject()),_=(0,a.useMemo)(()=>({showConsentOptions:h,getNoticeApi:y,getConsentModel:v}),[]);return a.createElement(f.Provider,{value:_},t)}},201536:(e,t,n)=>{n.d(t,{A:()=>o});const o={section:"section__bP0A",tiers:"tiers__nEYZ",link:"link__S5fC",promoCodeBanner:"promoCodeBanner__pidZ",extraMargin:"extraMargin__cus5",usePromoCodeText:"usePromoCodeText__PfN2",promoCode:"promoCode__V4eD",termsAndConditions:"termsAndConditions__o3U2",title:"title__xfRW",content:"content__T2DJ"}},227766:(e,t,n)=>{n.d(t,{P:()=>o});const o=(0,n(408604).YK)({spotsLeft:{id:"orion.checkout.resume.toast.spotsLeft",defaultMessage:"Only {count, plural, one {# spot} other {# spots}} left!"},resumeBooking:{id:"orion.checkout.resume.toast.resumeBooking",defaultMessage:"Resume your booking"},productImageAlt:{id:"orion.checkout.resume.toast.productImageAlt",defaultMessage:"Product image"}})},246132:(e,t,n)=>{n.d(t,{k:()=>i});var o=n(991907),a=n(747344);const i=e=>(0,a.C)(()=>{e({action:o.A.active,data:{pageProperties:{time:"30s"}}})},3e4)},252745:(e,t,n)=>{n.d(t,{R:()=>A,i:()=>y}),n(730237),n(647072),n(898992),n(354520),n(430670),n(581454),n(908872),n(962953);var o=n(296540),a=n(770111),i=n(585207),r=n(123105),s=(n(57019),n(537179)),l=n(172423),c=n(213980),u=n(850678),d=n(826185),m=n(728101),p=n(729817),v=n(108868),g=n(985940),h=n(654291),f=n(842709),C=n(668561),E=n(609673);const[A,S]=(0,u.q)({}),y=e=>{let{children:t}=e;const n=(0,a.m)(),{behaviours:{wishlistBehaviours:{shouldSkipWishlistQuery:u}}}=(0,s.w)(),[A,y]=(0,o.useState)(null),_=(0,C.g)(),b=u&&_;b&&n.writeQuery({query:E.m80,data:{wishlists:[],wishlistMetadata:{__typename:"WishlistMetadataResult",wishlistLimits:{__typename:"WishlistLimits",wishlistLimit:1},wishlistUser:{__typename:"WishlistUser",userType:E.VDT.Visitor}}}});const[w]=(0,i.E)(E.m80,b?r.h:{}),k=(0,g.Y)(E.m80,{skip:!b});(0,o.useEffect)(()=>{u||(0,c.L)()},[u]);const T=(0,o.useMemo)(()=>{var e,t,n,o,a;const i=null!==(e=null==A?void 0:A.wishlists.filter((0,p.v)("WishlistResult")).map(e=>e.wishlist))&&void 0!==e?e:[],r=(0,v.G)(null==A?void 0:A.wishlistMetadata,"WishlistMetadataResult"),s=null!==(t=null==r?void 0:r.wishlistUser.userType)&&void 0!==t?t:E.VDT.Visitor,l=new Map(i.map(e=>[e.wishlistRef,e])),c=Map.groupBy(null!==(n=null==i?void 0:i.flatMap(e=>{let{wishlistRef:t,items:n}=e;return n.filter(e=>{let{product:t}=e;return(0,h.f)(t)}).map(e=>{let{wishlistItemRef:n,product:o}=e;return{wishlistRef:t,wishlistItemRef:n,productCode:o.productCode}})}))&&void 0!==n?n:[],e=>{let{productCode:t}=e;return t}),u=i.map(e=>e.itemCount).reduce((e,t)=>e+t,0),d=i.length,m=null!==(o=null==r?void 0:r.wishlistLimits.wishlistLimit)&&void 0!==o?o:1;return{wishlistUserType:s,wishlistsMap:l,wishlistItemCount:u,wishlistCount:d,hasMaximumWishlists:d>=m,multipleWishlistsPermitted:m>1,defaultWishlist:null!==(a=i[0])&&void 0!==a?a:null,isProductWishlisted:e=>{var t,n;return null!=A&&A.wishlists?(null!==(t=null===(n=c.get(e))||void 0===n?void 0:n.length)&&void 0!==t?t:0)>0:null},isLoading:(0,f.z)(A)}},[A]);return o.createElement(S.Provider,{value:T},o.createElement(o.Suspense,null,(0,h.f)(w)&&o.createElement(m.n,{onQueryComplete:e=>{y(e)},queryRef:w}),(0,h.f)(k.current)&&o.createElement(d.J,{onQueryComplete:e=>{y(e)},observable:k.current})),o.createElement(l.pO,{wishlistUserType:T.wishlistUserType},t))}},263512:(e,t,n)=>{n.d(t,{P:()=>o,v:()=>u});var o,a=n(296540),i=n(706442),r=n(246942),s=n.n(r),l=n(203669),c=n(400897);!function(e){e.price="price",e.inherit="inherit"}(o||(o={}));const u=e=>{let{currencyCode:t,amount:n,minimumFractionDigits:r=2,maximumFractionDigits:u=2,strikethrough:d,automation:m,discounted:p,colorVariant:v=o.price}=e;const g=(0,i.A)(),h=s()(c.A.moneyView,{[c.A.strikethrough]:d,[c.A.discounted]:p,[c.A.defaultColor]:v===o.price}),f=g.formatNumber(n,{style:"currency",currency:t,minimumFractionDigits:r,maximumFractionDigits:u});return a.createElement("span",{className:h,...(0,l.P)(m),suppressHydrationWarning:!0},f)}},309415:(e,t,n)=>{n.d(t,{I:()=>o,y:()=>f}),n(962953);var o,a=n(296540),i=n(246942),r=n.n(i),s=n(834826),l=n(523083),c=n(809306),u=n(203669),d=n(878360),m=n(991907),p=n(464225),v=n(548372),g=n(971942),h=n(720930);!function(e){e.dark="dark",e.light="light"}(o||(o={}));const f=e=>{let{action:t,children:n,dismissOnAction:i=!0,icon:f,onActionClick:C,onDismiss:E,showDismissButton:A=!1,autoDismiss:S=!0,autoDismissDelay:y=5e3,colorVariant:_=o.dark,track:b,automation:w,pii:k}=e;const{removeToast:T}=(0,s._)(),P=(0,l.jw)(),[N,M]=(0,a.useState)(null),[L,R]=(0,a.useState)(y),I=()=>{(0,v.T)(T)&&T(),null==E||E()},D=()=>{S&&"entered"===P&&M({timeoutId:window.setTimeout(I,L),duration:L,startTime:(new Date).getTime()})},O=()=>{if(!N)return;const e=(new Date).getTime()-N.startTime;R(Math.max(N.duration-e,1e3)),M(null)};(0,a.useEffect)(()=>()=>window.clearTimeout(null==N?void 0:N.timeoutId),[N]),(0,a.useEffect)(()=>{"entered"===P&&D(),"exiting"===P&&O()},[P]);const x=b&&b.elementType||m.s.toast,{extendContext:U}=(0,p.z)({...b,elementType:x});return a.createElement("div",{className:r()(h.A.toastContainer,h.A[_],k),onMouseEnter:O,onMouseLeave:D,...(0,u.P)(w)},f&&a.createElement("div",{className:h.A.iconContainer},f),a.createElement("div",{className:r()(h.A.textContainer,h.A[_])},a.createElement("div",null,n),t&&a.createElement(c.N,{className:h.A.actionButton,onClick:()=>{null==C||C(),i&&I()},track:U({elementId:"action"}),automation:(0,d.K)(w,"action")},t)),A&&a.createElement(c.N,{className:h.A.dismissButton,onClick:I,track:b},a.createElement(g.L,null)))}},311265:(e,t,n)=>{n.d(t,{g:()=>f});var o=n(296540),a=n(834826),i=n(537179),r=n(612341),s=n(587235),l=n(991907),c=n(730882),u=n(842709),d=n(654291),m=n(388346),p=n(75170);const v=1e3*m.i,g=(e,t,n)=>{const o=(0,p.w$)();if((0,u.z)(o)||(0,d.f)(o.checkoutAccessedAt)&&o.checkoutAccessedAt===t.current)return;(0,d.f)(o.checkoutAccessedAt)&&(t.current=o.checkoutAccessedAt),n.current&&(n.current(),n.current=null);const a=(e=>{let{doTracking:t,onShowToast:n}=e;const o=()=>{(e=>{e({data:{pageProperties:{[r._x]:s.jh.CHECKOUT_RESUME_TOAST_WITH_SPOTS_LEFT}},action:l.A.visible})})(t),n()};if("visible"===document.visibilityState)return void o();const a=()=>{"visible"===document.visibilityState&&(o(),i())},i=()=>{document.removeEventListener("visibilitychange",a)};return document.addEventListener("visibilitychange",a),i})(e);a&&(n.current=a)},h=(e,t)=>{const n=(0,p.w$)();(0,u.z)(n)||(t.current&&clearTimeout(t.current),t.current=setTimeout(e,v))},f=e=>{let{onShowToast:t,doTracking:n}=e;const r=(0,o.useRef)(null),s=(0,o.useRef)(null),l=(0,o.useRef)(null),{behaviours:{isEligibleCheckoutResumeToastWithSpotsLeftExperimentTest:v}}=(0,i.w)(),{toast:f,removeToast:C}=(0,a._)();(0,o.useEffect)(()=>{if(!v)return;const e={doTracking:n,onShowToast:t},o=(0,p.w$)(),a=(0,p.M9)();(0,d.f)(o)&&(0,d.f)(a)&&a>=m.i&&g(e,s,l);const i=((e,t,n,o)=>a=>{if(a.key===c.Z.CHECKOUT_RESUME){const a=(0,p.w$)();(0,u.z)(a)?(o.current&&(clearTimeout(o.current),o.current=null),((e,t)=>{(0,u.z)(e)||(0,u.z)(e.element)||(e=>{if(!e||"object"!=typeof e)return!1;if("type"in e&&e.type){const t=e.type;if("function"==typeof t||"object"==typeof t)return"CheckoutResumeToast"===t.name}return!1})(e.element)&&t()})(t,n)):h(e,o)}})(()=>g(e,s,l),f,C,r);return window.addEventListener("storage",i),h(()=>g(e,s,l),r),()=>{window.removeEventListener("storage",i),r.current&&(clearTimeout(r.current),r.current=null),l.current&&(l.current(),l.current=null)}},[f])}},323919:(e,t,n)=>{n.d(t,{Z:()=>p}),n(962953);var o=n(296540),a=n(246942),i=n.n(a),r=n(407403),s=n(878360),l=n(243228),c=n(834826),u=n(432210);const d=(0,l.R)(()=>n.e(66155).then(n.bind(n,283031)),{resolveComponent:e=>e.Toasts,chunkName:"Toasts"});var m;!function(e){e.topAndBottom="topAndBottom",e.topOnly="topOnly",e.none="none"}(m||(m={}));const p=e=>{let{positionScheme:t=m.topAndBottom,automation:n,...a}=e;const{hasToast:l}=(0,c._)(),[p,v]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{!p&&l&&v(!0)},[l,p]),t===m.none)return null;const g=i()(u.A.toastsOverlay,{[u.A.top]:t===m.topOnly});return o.createElement("div",{className:g},o.createElement(r.m,null,o.createElement("div",{className:u.A.relative},o.createElement("div",{className:u.A.toastsContainer},p&&o.createElement(d,{automation:(0,s.K)(n,"toasts"),...a})))))}},350719:(e,t,n)=>{var o,a;n.d(t,{S:()=>o,o:()=>a}),function(e){e.editable="editable",e.readOnly="readOnly",e.readOnlyWithDates="readOnlyWithDates"}(o||(o={})),function(e){e.none="none",e.dropShadow="dropShadow"}(a||(a={}))},353559:(e,t,n)=>{n.d(t,{i:()=>s});var o=n(296540),a=n(991907),i=n(914794),r=n(530409);const s=e=>{(0,o.useEffect)(()=>{var t;const{innerWidth:n,innerHeight:o,screen:s}=window,l=o>n?"portrait":"landscape";let c=!1,u=null;i.B&&(c=navigator.maxTouchPoints>1,u=window.matchMedia("(prefers-color-scheme: dark)")),e({action:a.A.visible,elementType:a.s.viewport,data:{pageProperties:{screen:"".concat(s.width,"X").concat(s.height),viewport:"".concat(n,"X").concat(o),orientation:l,multiTouch:"".concat(c),isIOS:"".concat((0,r.c)()),colorScheme:null!==(t=u)&&void 0!==t&&t.matches?"dark":"light"}}})},[])}},360482:(e,t,n)=>{n.d(t,{A:()=>o});const o={skipNavigation:"skipNavigation__V8Z8"}},364783:(e,t,n)=>{n.d(t,{A:()=>o});const o={productImage:"productImage__mn4z",resumeLink:"resumeLink__wp2z"}},388346:(e,t,n)=>{n.d(t,{i:()=>E,l:()=>A}),n(962953);var o=n(296540),a=n(706442),i=n(309415),r=n(807686),s=n(877005),l=n(969965),c=n(537179),u=n(464225),d=n(991907),m=n(764489),p=n(7361),v=n(654291),g=n(842709),h=n(227766),f=n(75170),C=n(364783);const E=10,A=()=>{const e=(0,a.A)(),[t,n]=(0,o.useState)(null),{behaviours:{isVariantACheckoutResumeToastWithSpotsLeftExperimentTest:A,isVariantBCheckoutResumeToastWithSpotsLeftExperimentTest:S},languageCode:y}=(0,c.w)(),{deviceViewport:_}=(0,l.kW)(),b=(0,f.M9)();(0,o.useEffect)(()=>{try{const e=(0,f.w$)();(0,v.f)(e)&&n(e)}catch(e){(0,p.a)("Failed to obtain checkout resume toast data: ".concat(e))}},[]);const{extendContext:w,visibleTarget:k,doTracking:T}=(0,u.z)({elementId:"checkout_resume_toast",data:{pageProperties:{spotsLeft:null==t?void 0:t.spotsLeft,userLanguage:y,deviceType:_,productCode:null==t?void 0:t.productCode}}},!0);if(!A&&!S||(0,g.z)(t)||(0,g.z)(b)||b<E)return null;const P=o.createElement(r.E,{className:C.A.productImage,src:t.productImageUrl,alt:e.formatMessage(h.P.productImageAlt),width:40,height:40}),N="".concat("/checkout/").concat(t.checkoutRef);return o.createElement(i.y,{colorVariant:i.I.dark,autoDismiss:A,autoDismissDelay:A?1e4:void 0,track:w(),icon:P,onDismiss:()=>{(0,f.pM)(),T({action:d.A.close})},showDismissButton:!0},o.createElement("div",{ref:k},o.createElement("div",null,o.createElement(m.w,{...h.P.spotsLeft,values:{count:t.spotsLeft}})),o.createElement("div",{className:C.A.resumeLink},o.createElement(s.N,{href:N,track:w({elementId:"link"}),target:"_blank"},o.createElement(m.w,{...h.P.resumeBooking})))))}},394955:(e,t,n)=>{n.d(t,{P:()=>s,Z:()=>i}),n(962953);var o=n(296540),a=n(850678);const[i,r]=(0,a.q)({}),s=e=>{let{children:t,value:n}=e;return o.createElement(r.Provider,{value:n},t)}},407686:(e,t,n)=>{n.d(t,{L:()=>l});var o=n(296540),a=n(706442),i=n(408604),r=n(383429),s=n(654291);const l=e=>{const{value:t,...n}=e,l=(0,r.M)(t,{utc:!0}),c=(0,a.A)();if((0,s.f)(l)){const e=c.formatDate(l,{timeZone:"UTC",weekday:"long",month:"long",day:"2-digit",year:"numeric"});return o.createElement("span",{"aria-label":e},o.createElement(i.XU,{...n,value:l,timeZone:"UTC"}))}return null}},464828:(e,t,n)=>{n.d(t,{K:()=>c,O:()=>l}),n(962953);var o=n(296540),a=n(464225),i=n(612341),r=n(587235);const s=(0,o.createContext)(void 0),l=e=>{let{children:t}=e;const[n,l]=(0,o.useState)(!1),{extendContext:c}=(0,a.z)({elementId:"language_currency_recommendation",data:{pageProperties:{[i._x]:r.jh.HOMEPAGE_LANGUAGE_CURRENCY_PROMPT}}}),u=(0,o.useMemo)(()=>({isPromptDismissed:n,setIsPromptDismissed:l,extendLanguageCurrencyTracking:c}),[c,n]);return o.createElement(s.Provider,{value:u},t)},c=()=>(0,o.useContext)(s)||{isPromptDismissed:!1,setIsPromptDismissed:()=>{},extendLanguageCurrencyTracking:()=>({elementId:"language_currency_fallback"})}},484518:(e,t,n)=>{n.d(t,{A:()=>o});const o={eligibilityTrackingWrapper:"eligibilityTrackingWrapper__dvvw"}},505169:(e,t,n)=>{n.d(t,{$:()=>k,_:()=>b}),n(16280),n(898992),n(354520),n(962953);var o=n(296540),a=n(585207),i=n(123105),r=n(770111),s=n(509211),l=n(160340),c=n(180059),u=n(673471),d=n(561579),m=n(537179),p=n(914794),v=n(850678),g=n(728101),h=n(915075),f=n(155688),C=n(654291),E=n(668561),A=n(587235),S=n(609673),y=n(19882),_=n(671753);const[b,w]=(0,v.q)({}),k=e=>{var t;const{children:n}=e,[v,b]=(0,o.useState)(!1),[k,T]=(0,o.useState)(null),{behaviours:{hasCartRedesign:P},isUserAuthenticated:N,localeSubfolder:M}=(0,m.w)(),{pageId:L}=(0,u._)(),R=!P||!N||!p.B||d.mO.includes(L),I=null==k||null===(t=k.cart)||void 0===t?void 0:t.cartRef,[D]=(0,a.E)(S.Ksd,R?i.h:{}),O=(0,r.m)(),x=(0,E.g)();(0,o.useEffect)(()=>{if(x){const e=O.readQuery({query:S.Ksd});T(e)}},[x]),(0,o.useEffect)(()=>{if(k){var e,t,n;const o=null!==(e=null===(t=k.cart)||void 0===t?void 0:t.items.length)&&void 0!==e?e:0;(0,c.$)({itemCount:o,lastCartRef:null===(n=k.cart)||void 0===n?void 0:n.cartRef})}},[k]);const[U,{loading:F}]=(0,S.h6G)({update:(e,t)=>{let{data:n}=t;return e.writeQuery({query:S.Ksd,data:{cart:null==n?void 0:n.updatedCart}})}}),[B,{loading:G}]=(0,S.QqO)({optimisticResponse:e=>{var t,n;return{removeCartItems:{__typename:"Cart",cartRef:e.cartRef,items:null!==(t=null==k||null===(n=k.cart)||void 0===n?void 0:n.items.filter(t=>t.cartItemRef!==e.cartItemRef))&&void 0!==t?t:[],pricing:null}}},update:(e,t,n)=>{let{variables:o}=n;return e.evict({id:e.identify({__typename:"CartItem",cartItemRef:o.cartItemRef})})}}),[W]=(0,S.GuO)(),V=(0,o.useCallback)(async e=>{await U({variables:e})},[U]),H=(0,o.useCallback)(async e=>{const{data:t}=await B({variables:{cartRef:I,cartItemRef:e}});null!=t&&t.removeCartItems&&T({cart:{...t.removeCartItems,__typename:"Cart"}})},[B,I]),z=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;const n=e=>{window.location.href=(0,f.F)(M,"".concat(l.wA.CHECKOUT,"/").concat(e))};if(P){if(!t)throw new Error("cannot checkout without a cart ref");b(!0);try{const{data:o}=await W({variables:{input:{cartRef:t,promotionContext:await(0,_.n)(),defaultPaymentScheme:e?S.yOw.ReserveNowPayLater:S.yOw.BookNow}}});return n(o.checkoutSession.checkoutSessionRef),!0}catch(e){if(b(!1),e instanceof s.K4){var o;const t=null===(o=(0,h.U)(e,"CreateCheckoutSessionError"))||void 0===o?void 0:o.reason;if(t)return t}throw e}}else{b(!0);try{const{checkoutSessionRef:t}=await(0,y.e)(e?A.Jw.RESERVE_NOW_PAY_LATER:A.Jw.PAY_NOW);return n(t),!0}catch(e){throw b(!1),e}}},[W,P,M]),K=F||G,q=(0,o.useMemo)(()=>({isCheckoutPageLoading:v,cartMutationInProgress:K,toCheckout:z,addToCart:V,removeFromCart:H,cartSessionQueryRef:D,cartSessionFallbackData:k}),[v,K,z,V,H,D,k]);return o.createElement(w.Provider,{value:q},o.createElement(o.Suspense,null,(0,C.f)(D)&&o.createElement(g.n,{onQueryComplete:e=>{T(e)},queryRef:D})),n)}},523083:(e,t,n)=>{n.d(t,{XC:()=>c,jw:()=>s}),n(842762),n(898992),n(581454),n(962953);var o=n(296540),a=n(573510),i=n(850678),r=n(432210);const[s,l]=(0,i.q)(),c=e=>{const{children:t,...n}=e,i=(0,o.useRef)(null),s=()=>{var e;null===(e=i.current)||void 0===e||e.style.setProperty("max-height","".concat(i.current.scrollHeight,"px"))},c=()=>{var e;null===(e=i.current)||void 0===e||e.style.removeProperty("max-height")};return o.createElement(a.A,{...n,nodeRef:i,classNames:{enter:r.A.enter,enterActive:r.A.enterActive,exitActive:r.A.exitActive},onExit:s,onExiting:c,onEntering:s,onEntered:c,addEndListener:e=>{var t;if(!i.current)return;const n=null===(t=getComputedStyle(i.current).transitionProperty)||void 0===t?void 0:t.split(",").map(e=>e.trim());if(!n)return;const o=n[n.length-1];i.current.addEventListener("transitionend",t=>{t.propertyName===o&&e()})},timeout:2e3},e=>o.createElement(l.Provider,{value:e},o.createElement("div",{ref:i},t)))}},530409:(e,t,n)=>{n.d(t,{c:()=>a});var o=n(914794);const a=()=>{let e=!1,t=!1;if(o.B){const{platform:n}=navigator;e=navigator.maxTouchPoints>1,t=/iPad|iPhone|iPod/.test(n)||"MacIntel"===n&&e}return t}},615196:(e,t,n)=>{n.d(t,{A:()=>o});const o={promoCodeAlert:"promoCodeAlert__Hoxg",content:"content__xK0V",boldText:"boldText__pBLQ",detailsButton:"detailsButton__nXR_"}},664029:(e,t,n)=>{n.d(t,{u:()=>x}),n(962953);var o=n(296540),a=n(845636),i=n(246942),r=n.n(i),s=n(884603),l=n(834826),c=n(323919),u=n(388346),d=n(311265),m=n(673471),p=n(464828),v=n(243228),g=n(669881),h=n(969965),f=n(537179),C=n(464225),E=n(970447),A=n(587235),S=n(246132),y=n(353559),_=n(780123),b=n(880197),w=n(885158),k=n(686476);const T=(0,v.R)(()=>Promise.all([n.e(66608),n.e(30780),n.e(13142)]).then(n.bind(n,814214)),{resolveComponent:e=>e.CustomHtmlHeader,chunkName:"CustomHtmlHeader"}),P=(0,v.R)(()=>Promise.all([n.e(394),n.e(63880)]).then(n.bind(n,560676)),{resolveComponent:e=>e.FooterForViator,chunkName:"FooterForViator"}),N=(0,v.R)(()=>Promise.all([n.e(30780),n.e(57304)]).then(n.bind(n,513307)),{resolveComponent:e=>e.FooterForWhitelabel,chunkName:"FooterForWhiteLabel"}),M=(0,v.R)(()=>n.e(68162).then(n.bind(n,706413)),{resolveComponent:e=>e.FooterForTravelAgent,chunkName:"FooterForTravelAgent"}),L=(0,v.R)(()=>n.e(74186).then(n.bind(n,246554)),{resolveComponent:e=>e.LanguageCurrencyPrompt,chunkName:"LanguageCurrencyPrompt"}),R=(0,v.R)(()=>n.e(68468).then(n.bind(n,88875)),{resolveComponent:e=>e.LanguagePreferenceBanner,chunkName:"LanguagePreferenceBanner"}),I=(0,v.R)(()=>Promise.all([n.e(66608),n.e(1058)]).then(n.bind(n,564986)),{resolveComponent:e=>e.AffiliateSiteStripe,chunkName:"AffiliateSiteStripe"}),D=(0,v.R)(()=>Promise.all([n.e(66608),n.e(21456)]).then(n.bind(n,227152)),{resolveComponent:e=>e.Header,chunkName:"Header"}),O=(0,v.R)(()=>Promise.all([n.e(66608),n.e(38588)]).then(n.bind(n,865511)),{resolveComponent:e=>e.HeaderNotifications,chunkName:"HeaderNotifications"}),x=e=>{let{children:t,search:n=!0,contentStackOrderSameAsHeader:i=!1,toastsOverlayPositionScheme:v,hasDateSearchPlaceholder:x=!1,seoValue:U,hasMinimisedSearchMobile:F=!1,disableFooter:B=!1,noFollow:G=!0,showCruiseSearch:W,disableDiscoverMenu:V,searchShowTextInputForDefaultOption:H,isLanguageCurrencyPromptExperimentEligible:z,languageCurrencyPrompt:K}=e;const{headerCustomisation:{customHtml:q,hasViatorHeaderForWhitelabels:Y}}=(0,m._)(),{footerStyle:Z,behaviours:{canViewAffiliateSiteStripe:$,showLanguagePreferenceBanner:j,hideHeaderAndFooterLayout:J,hasDatePickerInSearchBar:Q,hasDatePickerInGeoHubEligibility:X,hasDatePickerInGeoHubVariantA:ee},notifications:{headerNotifications:te}}=(0,f.w)(),{doTracking:ne}=(0,C.z)("page"),{setToast:oe}=(0,l._)();(0,d.g)({onShowToast:()=>oe(o.createElement(u.l,null)),doTracking:ne});const{isMobileOrTablet:ae}=(0,h.kW)(),ie=(Q||X&&ee)&&ae;(0,S.k)(ne),(0,y.i)(ne);const re=(0,b.d)(q),se=!re||Y,le={[A.E6.VIATOR]:P,[A.E6.WHITELABEL]:N,[A.E6.AGENT]:M}[Z],ce=r()(k.A.content,{[k.A.stackSameAsHeader]:i}),ue=r()(k.A.pageContainer,{[k.A.stickyHeader]:ie}),de=o.createElement("div",{className:ce},t);return J?o.createElement("div",{className:k.A.pageContainerClasses},de):o.createElement(o.Fragment,null,o.createElement(s.o,{hash:"#content"}),o.createElement(g.D,null),o.createElement(_.v,{condition:!!K,wrap:e=>o.createElement(p.O,null,e)},o.createElement("div",{className:ue},z&&o.createElement(E.x,{trackingPageProperty:A.jh.HOMEPAGE_LANGUAGE_CURRENCY_PROMPT,isEligible:z,track:{elementId:"language_currency_recommendation"}},K&&o.createElement(L,{languageCurrencyPrompt:K})),j&&o.createElement(R,null),$&&o.createElement(I,null),(0,a.E)(te)&&o.createElement(O,null),re&&o.createElement(T,null),se&&o.createElement(D,{track:{elementId:"page_header"},automation:"header",search:n,hasDateSearchPlaceholder:x,hasMinimisedSearchMobile:F,showCruiseSearch:W,disableDiscoverMenu:V,searchShowTextInputForDefaultOption:H}),o.createElement(c.Z,{automation:"header",positionScheme:v}),o.createElement("main",{id:"content",className:k.A.mainContent},de),!B&&o.createElement(le,{automation:"footer",seoValue:U,noFollow:G}),o.createElement(w.E,null))))}},669881:(e,t,n)=>{n.d(t,{D:()=>E});var o=n(296540),a=n(176680),i=n(809306),r=n(263512),s=n(838954),l=n(48865),c=n(537179),u=n(464225),d=n(991907),m=n(612341),p=n(587235),v=n(764489),g=n(828979),h=n(615196);const f="FALL2025",C="VIATOR2025",E=()=>{const{behaviours:{isEligibleForUSUserUnpaidTrafficPromoCodeTest:e,isEligibleForNonUSUserUnpaidTrafficPromoCodeTest:t,isTestForNonUSUserUnpaidTrafficPromoCode:n,isTestForUSUserUnpaidTrafficPromoCode:E}}=(0,c.w)(),{openModal:A}=(0,a.y)(),{doTracking:S,extendContext:y}=(0,u.z)("promo_code_alert");if((0,o.useEffect)(()=>{e&&S({action:d.A.visible,data:{pageProperties:{[m._x]:p.jh.US_USER_UNPAID_TRAFFIC_PROMO}}}),t&&S({action:d.A.visible,data:{pageProperties:{[m._x]:p.jh.NON_US_USER_UNPAID_TRAFFIC_PROMO}}}),(E||n)&&S({action:d.A.visible,data:{pageProperties:{isUSDUser:E,promoCode:E?f:C}}})},[]),!E&&!n)return null;const _=()=>{A(l.PROMO_CODE_DETAILS_MODAL)},b=o.createElement(v.w,{...g.P.promoMessageUS,values:{bold:e=>o.createElement("span",{className:h.A.boldText},e),detailsButton:e=>o.createElement(i.N,{onClick:_,className:h.A.detailsButton},e),amount:o.createElement(r.v,{currencyCode:"USD",amount:75,colorVariant:r.P.inherit,maximumFractionDigits:0,minimumFractionDigits:0}),promoCode:f}}),w=o.createElement(v.w,{...g.P.promoMessage,values:{bold:e=>o.createElement("span",{className:h.A.boldText},e),detailsButton:e=>o.createElement(i.N,{onClick:_,className:h.A.detailsButton},e),percentage:10,promoCode:C}});return o.createElement(o.Fragment,null,o.createElement("div",{className:h.A.promoCodeAlert},o.createElement("div",{className:h.A.content},E?b:w)),o.createElement(s.X,{promoCode:E?f:C,isUSUser:E,track:y({elementId:"details_modal"})}))}},686476:(e,t,n)=>{n.d(t,{A:()=>o});const o={pageContainer:"pageContainer__EUTY",stickyHeader:"stickyHeader__VvE5",mainContent:"mainContent__ydWT",content:"content__Ct39",stackSameAsHeader:"stackSameAsHeader__DO1_"}},720930:(e,t,n)=>{n.d(t,{A:()=>o});const o={toastContainer:"toastContainer__gLDK",light:"light__Bh7m",iconContainer:"iconContainer__lBku",textContainer:"textContainer__WRsS",actionButton:"actionButton__uFcU",dismissButton:"dismissButton__laZz"}},744753:(e,t,n)=>{n.r(t),n.d(t,{MODAL_ID:()=>g,PartnerProgramSwitcherModal:()=>h}),n(898992),n(581454),n(962953);var o=n(296540),a=n(849149),i=n(806487),r=n(713854),s=n(458895),l=n(809306),c=n(969965),u=n(864984),d=n(464225),m=n(764489),p=n(452475),v=n(377672);const g="PARTNER_PROGRAM_SWITCHER",h=e=>{const{isMobile:t}=(0,c.kW)(),{isOpen:n}=e,[g,h]=(0,o.useState)([]),[f,C]=(0,o.useState)(!1),{extendContext:E}=(0,d.z)({elementId:"partner_program_switch_modal"});return(0,o.useEffect)(()=>{n&&0===g.length&&(0,i.h)().then(e=>{h(e)})},[n,g]),o.createElement(s.a,{...e,displaySize:"sm",header:o.createElement(a.h,{variant:a.I.title4},o.createElement(m.w,{...p.P.header})),takeover:t,displayVariant:t?"scrollable":void 0,track:E({})},o.createElement("div",{className:v.A.options},g.map(e=>o.createElement(l.N,{className:v.A.option,key:e.partnerAccountRef,onClick:()=>{return t=e.partnerAccountRef,void(f||(C(!0),(0,r.M)(t).catch(()=>(0,u.r)()).then(()=>window.location.reload())));var t},disabled:f,track:E({elementId:"option",data:{pageProperties:{selectedPartnerAccountRef:e.partnerAccountRef}}})},e.partnerAccountRef," - ",e.accountName))))}},747344:(e,t,n)=>{n.d(t,{C:()=>i});var o=n(296540),a=n(458485);const i=(e,t)=>{const n=(0,o.useRef)(e);(0,o.useEffect)(()=>{n.current=e},[e]),(0,o.useEffect)(()=>{const e=setTimeout(()=>(0,a.c)(n.current),t);return()=>clearTimeout(e)},[t])}},807686:(e,t,n)=>{n.d(t,{E:()=>c}),n(962953);var o=n(296540),a=n(203669),i=n(77220),r=n(464225),s=n(991907),l=n(668561);const c=e=>{let{src:t,srcSet:n,alt:c,loading:u="lazy",track:d,trackFirstVisibility:m=!1,automation:p,fallback:v,onError:g,logOnError:h,fetchPriority:f,...C}=e;const[E,A]=(0,o.useState)(v&&!t&&!n),S=(0,l.g)();(0,o.useEffect)(()=>{!S&&E&&(t||n)&&A(!1)},[t,n]);const{visibleTarget:y}=(0,r.z)({...d,elementType:(null==d?void 0:d.elementType)||s.s.image},m);return v&&E?v:o.createElement("img",{...C,fetchpriority:f,onError:e=>{v&&A(!0),(0,i.e)(e,null==h?void 0:h.component,null==h?void 0:h.meta),g&&g(e)},...(0,a.P)(p),ref:y,alt:null!=c?c:"",src:t,srcSet:n,loading:u})}},828979:(e,t,n)=>{n.d(t,{P:()=>o});const o=(0,n(408604).YK)({promoMessage:{id:"orion.promoCodeAlert.nonUSDMessage.v2",defaultMessage:"<bold>{percentage}% off</bold>. Use code <bold>{promoCode}</bold>.<detailsButton>Details</detailsButton>"},promoMessageUS:{id:"orion.promoCodeAlert.usdMessage.v2",defaultMessage:"<bold>Up to {amount} off</bold>. Use code <bold>{promoCode}</bold>.<detailsButton>Details</detailsButton>"}})},833483:(e,t,n)=>{n.d(t,{P:()=>o});const o=(0,n(408604).YK)({nonUsModalTitle:{id:"orion.promoCode.modal.nonUs.title",defaultMessage:"Take {percentage}% off your next experience this year!"},nonUsPromoCode:{id:"orion.promoCode.modal.nonUs.promoCode",defaultMessage:"Use code <b>{promoCode}</b> at checkout to save {percentage}% off your purchase."},nonUsEligibilitySubtitle:{id:"orion.promoCode.modal.nonUs.eligibility.subtitle",defaultMessage:"Eligibility"},nonUsEligibilityText:{id:"orion.promoCode.modal.nonUs.eligibility.text.v2",defaultMessage:"Your travel experience must be booked and take place on or before {expiryDate}."},termsSubtitle:{id:"orion.promoCode.modal.terms.subtitle.v2",defaultMessage:"Terms & Conditions"},termsText:{id:"orion.promoCode.modal.terms.text.v2",defaultMessage:"Offer available for new online bookings only and cannot be applied to existing bookings. Your travel experience must be booked and take place on or before {expiryDate}. Offer available on www.viator.com only. Add the promo code during checkout to apply the discount to your booking. Offer cannot be used in conjunction with any other promotion. Offer applies to the total transaction amount. This code is for your personal use only."},buttonText:{id:"orion.promoCode.modal.button.text",defaultMessage:"Keep exploring"},usModalTitle:{id:"orion.promoCode.modal.us.title",defaultMessage:"Take up to {amount} off your next experience this year!"},usSavingsSubtitle:{id:"orion.promoCode.modal.us.savings.subtitle",defaultMessage:"Savings:"},usSavingsTier:{id:"orion.promoCode.modal.us.savings.tier",defaultMessage:"â€¢ {discountAmount} off when you spend {minimumAmount} or more"},usSavingsPromoCodeEligibleDiscount:{id:"orion.promoCode.modal.us.savings.promoCode.eligible",defaultMessage:"The highest eligible discount will be applied."},usEligibilitySubtitle:{id:"orion.promoCode.modal.us.eligibility.subtitle",defaultMessage:"Eligibility"},usEligibilityText:{id:"orion.promoCode.modal.us.eligibility.text.v2",defaultMessage:"Your travel experience must be booked and take place on or before {expiryDate}. Purchase must be made in US Dollars (USD)."},usePromoCodeText:{id:"orion.promoCode.modal.usePromoCode.v2",defaultMessage:"Use code at checkout"}})},834826:(e,t,n)=>{n.d(t,{_:()=>s,u:()=>c}),n(962953);var o=n(296540),a=n(444296),i=n(850678),r=n(654291);const[s,l]=(0,i.q)({}),c=e=>{const{children:t,value:n}=e,[i,s]=(0,o.useState)(null!=n?n:null),c=e=>{s({element:e,id:(0,a.A)()})},u=()=>{s(null)},d=(0,o.useMemo)(()=>({setToast:c,removeToast:u,hasToast:(0,r.f)(i),toast:i}),[i]);return o.createElement(l.Provider,{value:d},t)}},838954:(e,t,n)=>{n.d(t,{X:()=>s}),n(962953);var o=n(895678),a=n(243228),i=n(48865);const r=(0,a.R)(()=>Promise.resolve().then(n.bind(n,48865)),{resolveComponent:e=>e.PromoCodeDetailsModal,ssr:!1,chunkName:"PromoCodeDetailsModal"}),s=(0,o.v)(r,i.PROMO_CODE_DETAILS_MODAL);s.displayName="PromoCodeDetailsModal"},884603:(e,t,n)=>{n.d(t,{o:()=>l});var o=n(296540),a=n(179153),i=n(764489),r=n(892865),s=n(360482);const l=e=>{const{hash:t}=e;return t.startsWith("#")?o.createElement(a.$,{className:s.A.skipNavigation,href:t},o.createElement(i.w,{...r.P.skipToContent})):null}},885158:(e,t,n)=>{n.d(t,{E:()=>d});var o=n(296540),a=n(176680),i=n(537179),r=n(730882),s=n(840826),l=n(747344),c=n(987764);const u=r.Z.WISHLIST_PARTNER_ONBOARDING_MODAL,d=()=>{const{behaviours:{wishlistBehaviours:{shouldShowShareWishlistMessagingModal:e}}}=(0,i.w)(),{openModal:t}=(0,a.y)();return(0,l.C)(()=>{!(0,s.D)().getData(u)&&e&&((0,s.D)().setItem(u,!0),t(c._))},1),e?o.createElement(c.F,null):null}},892865:(e,t,n)=>{n.d(t,{P:()=>o});const o=(0,n(408604).YK)({skipToContent:{id:"orion.header.skipLink.label",defaultMessage:"Skip to main content"}})},914200:(e,t,n)=>{n.r(t),n.d(t,{PARTNER_LOGIN_MODAL_ID:()=>v,PartnerLoginModal:()=>p}),n(962953);var o=n(296540),a=n(458895),i=n(916135),r=n(464225),s=n(991907),l=n(66479),c=n(478527),u=n(559533),d=n(855661),m=n(976105);const p=e=>{let{email:t="",modalType:n=l.$.SIGN_IN_FORM,onRequestClose:p,closable:v=!0,isOpen:g,...h}=e;const[f,C]=(0,o.useState)(t),[E,A]=(0,o.useState)(n),S="partner-login-modal",y={elementId:"partner_login_modal"},{doTracking:_,extendContext:b}=(0,r.z)(y),w=e=>{_({action:s.A.visible,elementId:e.toLowerCase()}),A(e)};return o.createElement(a.a,{...h,isOpen:g||!v,onRequestClose:p,displaySize:"md",track:y,onAfterClose:()=>A(n),closeOnEsc:v,showCloseBtn:v,closeOnOverlayClick:v},o.createElement("div",{className:m.A.modal,"data-automation":"partner-login-modal"},E===l.$.SIGN_IN_FORM&&o.createElement(d.n,{email:f,onEmailChange:C,onModalTypeChange:w,onSignInSuccess:()=>(0,i.w)(p),track:b({elementId:"sign_in_form"}),automation:S}),E===l.$.RESET_PASSWORD_FORM&&o.createElement(c.J,{email:f,onEmailChange:C,onModalTypeChange:w,track:b({elementId:"reset_password_form"}),automation:S}),E===l.$.RESET_PASSWORD_SUCCESS&&o.createElement(u.K,{email:f,onModalTypeChange:w,track:b({elementId:"reset_password_success"})})))};p.displayName="PartnerLoginModal";const v="PARTNER_LOGIN_MODAL"},970447:(e,t,n)=>{n.d(t,{x:()=>p}),n(16280);var o=n(296540),a=n(246942),i=n.n(a),r=n(612341),s=n(464225),l=n(7361),c=n(780123),u=n(60586),d=n(484518);const m=e=>{var t;let{children:n,trackingPageProperty:a,track:c,hasInlineLayout:m=!1}=e;const{visibleTarget:p}=(0,s.z)({...c,data:{...null==c?void 0:c.data,pageProperties:{...null==c||null===(t=c.data)||void 0===t?void 0:t.pageProperties,[r._x]:a}}},!0),v=m?"span":"div",g=(0,o.useCallback)(e=>{if(e&&"none"===getComputedStyle(e).display){const e=new Error('EligibilityTracking issue: The wrapper for "'.concat(a,'" has display:none, so tracking will not trigger.'));(0,l.a)(e)}},[a]),h=(0,u.p)(p,g);return o.createElement(v,{ref:h,className:i()({[d.A.eligibilityTrackingWrapper]:!m})},n)},p=e=>{const{isEligible:t=!1}=e;return o.createElement(c.v,{condition:t,wrap:()=>o.createElement(m,{...e})},e.children)}},987764:(e,t,n)=>{n.d(t,{F:()=>r,_:()=>i}),n(962953);var o=n(895678);const a=(0,n(243228).R)(()=>n.e(45267).then(n.bind(n,881843)),{resolveComponent:e=>e.WishlistsByAgentModal,ssr:!1,chunkName:"WishlistByAgentModal"}),i="WISHLIST_BY_AGENT_MODAL_ID",r=(0,o.v)(a,i);r.displayName="ManagedWishlistsByAgentModal"}}]);